/*! For license information please see main.9abed5ad.js.LICENSE.txt */
(()=>{var e={393:function(e,t,n){!function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function a(e,t){if(null==e)return{};var n,r,i=o(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function l(e,t){return c(e)||u(e,t)||h(e,t)||f()}function c(e){if(Array.isArray(e))return e}function u(e,t){var n=e&&("undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,i,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);o=!0);}catch(l){a=!0,i=l}finally{try{o||null==n.return||n.return()}finally{if(a)throw i}}return s}}function h(e,t){if(e){if("string"===typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var m,g,y,v,_={exports:{}};function w(){return g?m:(g=1,m="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}function b(){if(v)return y;v=1;var e=w();function t(){}function n(){}return n.resetWarningCache=t,y=function(){function r(t,n,r,i,s,o){if(o!==e){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function i(){return r}r.isRequired=r;var s={array:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:t};return s.PropTypes=s,s}}_.exports=b()();var S=p(_.exports),E=function(e,n,r){var i=!!r,s=t.useRef(r);t.useEffect((function(){s.current=r}),[r]),t.useEffect((function(){if(!i||!e)return function(){};var t=function(){s.current&&s.current.apply(s,arguments)};return e.on(n,t),function(){e.off(n,t)}}),[i,n,e,s])},C=function(e){var n=t.useRef(e);return t.useEffect((function(){n.current=e}),[e]),n.current},k=function(e){return null!==e&&"object"===i(e)},I=function(e){return k(e)&&"function"===typeof e.then},T=function(e){return k(e)&&"function"===typeof e.elements&&"function"===typeof e.createToken&&"function"===typeof e.createPaymentMethod&&"function"===typeof e.confirmCardPayment},x="[object Object]",A=function e(t,n){if(!k(t)||!k(n))return t===n;var r=Array.isArray(t);if(r!==Array.isArray(n))return!1;var i=Object.prototype.toString.call(t)===x;if(i!==(Object.prototype.toString.call(n)===x))return!1;if(!i&&!r)return t===n;var s=Object.keys(t),o=Object.keys(n);if(s.length!==o.length)return!1;for(var a={},l=0;l<s.length;l+=1)a[s[l]]=!0;for(var c=0;c<o.length;c+=1)a[o[c]]=!0;var u=Object.keys(a);if(u.length!==s.length)return!1;var h=t,d=n,f=function(t){return e(h[t],d[t])};return u.every(f)},N=function(e,t,n){return k(e)?Object.keys(e).reduce((function(i,o){var a=!k(t)||!A(e[o],t[o]);return n.includes(o)?(a&&console.warn("Unsupported prop change: options.".concat(o," is not a mutable property.")),i):a?r(r({},i||{}),{},s({},o,e[o])):i}),null):null},P="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",R=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:P;if(null===e||T(e))return e;throw new Error(t)},O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:P;if(I(e))return{tag:"async",stripePromise:Promise.resolve(e).then((function(e){return R(e,t)}))};var n=R(e,t);return null===n?{tag:"empty"}:{tag:"sync",stripe:n}},D=function(e){e&&e._registerWrapper&&e.registerAppInfo&&(e._registerWrapper({name:"react-stripe-js",version:"3.1.0"}),e.registerAppInfo({name:"react-stripe-js",version:"3.1.0",url:"https://stripe.com/docs/stripe-js/react"}))},L=t.createContext(null);L.displayName="ElementsContext";var M=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},F=function(e){var n=e.stripe,r=e.options,i=e.children,s=t.useMemo((function(){return O(n)}),[n]),o=l(t.useState((function(){return{stripe:"sync"===s.tag?s.stripe:null,elements:"sync"===s.tag?s.stripe.elements(r):null}})),2),a=o[0],c=o[1];t.useEffect((function(){var e=!0,t=function(e){c((function(t){return t.stripe?t:{stripe:e,elements:e.elements(r)}}))};return"async"!==s.tag||a.stripe?"sync"!==s.tag||a.stripe||t(s.stripe):s.stripePromise.then((function(n){n&&e&&t(n)})),function(){e=!1}}),[s,a,r]);var u=C(n);t.useEffect((function(){null!==u&&u!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")}),[u,n]);var h=C(r);return t.useEffect((function(){if(a.elements){var e=N(r,h,["clientSecret","fonts"]);e&&a.elements.update(e)}}),[r,h,a.elements]),t.useEffect((function(){D(a.stripe)}),[a.stripe]),t.createElement(L.Provider,{value:a},i)};F.propTypes={stripe:S.any,options:S.object};var U=function(e){var n=t.useContext(L);return M(n,e)},j=function(){return U("calls useElements()").elements},V=function(e){return(0,e.children)(U("mounts <ElementsConsumer>"))};V.propTypes={children:S.func.isRequired};var B=["on","session"],z=t.createContext(null);z.displayName="CheckoutSdkContext";var q=function(e,t){if(!e)throw new Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(t," in an <CheckoutProvider> provider."));return e},W=t.createContext(null);W.displayName="CheckoutContext";var K=function(e,t){if(!e)return null;e.on,e.session;var n=a(e,B);return r(r({},n),t||e.session())},H="Invalid prop `stripe` supplied to `CheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",G=function(e){var n=e.stripe,r=e.options,i=e.children,s=t.useMemo((function(){return O(n,H)}),[n]),o=l(t.useState(null),2),a=o[0],c=o[1],u=l(t.useState((function(){return{stripe:"sync"===s.tag?s.stripe:null,checkoutSdk:null}})),2),h=u[0],d=u[1],f=function(e,t){d((function(n){return n.stripe&&n.checkoutSdk?n:{stripe:e,checkoutSdk:t}}))},p=t.useRef(!1);t.useEffect((function(){var e=!0;return"async"!==s.tag||h.stripe?"sync"===s.tag&&s.stripe&&!p.current&&(p.current=!0,s.stripe.initCheckout(r).then((function(e){e&&(f(s.stripe,e),e.on("change",c))}))):s.stripePromise.then((function(t){t&&e&&!p.current&&(p.current=!0,t.initCheckout(r).then((function(e){e&&(f(t,e),e.on("change",c))})))})),function(){e=!1}}),[s,h,r,c]);var m=C(n);t.useEffect((function(){null!==m&&m!==n&&console.warn("Unsupported prop change on CheckoutProvider: You cannot change the `stripe` prop after setting it.")}),[m,n]);var g=C(r);t.useEffect((function(){var e,t;if(h.checkoutSdk){!r.clientSecret||k(g)||A(r.clientSecret,g.clientSecret)||console.warn("Unsupported prop change: options.clientSecret is not a mutable property.");var n=null===g||void 0===g||null===(e=g.elementsOptions)||void 0===e?void 0:e.appearance,i=null===r||void 0===r||null===(t=r.elementsOptions)||void 0===t?void 0:t.appearance;i&&!A(i,n)&&h.checkoutSdk.changeAppearance(i)}}),[r,g,h.checkoutSdk]),t.useEffect((function(){D(h.stripe)}),[h.stripe]);var y=t.useMemo((function(){return K(h.checkoutSdk,a)}),[h.checkoutSdk,a]);return h.checkoutSdk?t.createElement(z.Provider,{value:h},t.createElement(W.Provider,{value:y},i)):null};G.propTypes={stripe:S.any,options:S.shape({clientSecret:S.string.isRequired,elementsOptions:S.object}).isRequired};var Q=function(e){var n=t.useContext(z);return q(n,e)},Y=function(e){var n=t.useContext(z),r=t.useContext(L);if(n&&r)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return n?q(n,e):M(r,e)},J=function(){Q("calls useCheckout()");var e=t.useContext(W);if(!e)throw new Error("Could not find Checkout Context; You need to wrap the part of your app that calls useCheckout() in an <CheckoutProvider> provider.");return e},$=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},X=function(e,n){var r="".concat($(e),"Element"),i=n?function(e){Y("mounts <".concat(r,">"));var n=e.id,i=e.className;return t.createElement("div",{id:n,className:i})}:function(n){var i,s=n.id,o=n.className,a=n.options,c=void 0===a?{}:a,u=n.onBlur,h=n.onFocus,d=n.onReady,f=n.onChange,p=n.onEscape,m=n.onClick,g=n.onLoadError,y=n.onLoaderStart,v=n.onNetworksChange,_=n.onConfirm,w=n.onCancel,b=n.onShippingAddressChange,S=n.onShippingRateChange,k=Y("mounts <".concat(r,">")),I="elements"in k?k.elements:null,T="checkoutSdk"in k?k.checkoutSdk:null,x=l(t.useState(null),2),A=x[0],P=x[1],R=t.useRef(null),O=t.useRef(null);E(A,"blur",u),E(A,"focus",h),E(A,"escape",p),E(A,"click",m),E(A,"loaderror",g),E(A,"loaderstart",y),E(A,"networkschange",v),E(A,"confirm",_),E(A,"cancel",w),E(A,"shippingaddresschange",b),E(A,"shippingratechange",S),E(A,"change",f),d&&(i="expressCheckout"===e?d:function(){d(A)}),E(A,"ready",i),t.useLayoutEffect((function(){if(null===R.current&&null!==O.current&&(I||T)){var t=null;T?t=T.createElement(e,c):I&&(t=I.create(e,c)),R.current=t,P(t),t&&t.mount(O.current)}}),[I,T,c]);var D=C(c);return t.useEffect((function(){if(R.current){var e=N(c,D,["paymentRequest"]);e&&"update"in R.current&&R.current.update(e)}}),[c,D]),t.useLayoutEffect((function(){return function(){if(R.current&&"function"===typeof R.current.destroy)try{R.current.destroy(),R.current=null}catch(e){}}}),[]),t.createElement("div",{id:s,className:o,ref:O})};return i.propTypes={id:S.string,className:S.string,onChange:S.func,onBlur:S.func,onFocus:S.func,onReady:S.func,onEscape:S.func,onClick:S.func,onLoadError:S.func,onLoaderStart:S.func,onNetworksChange:S.func,onConfirm:S.func,onCancel:S.func,onShippingAddressChange:S.func,onShippingRateChange:S.func,options:S.object},i.displayName=r,i.__elementType=e,i},Z="undefined"===typeof window,ee=t.createContext(null);ee.displayName="EmbeddedCheckoutProviderContext";var te=function(){var e=t.useContext(ee);if(!e)throw new Error("<EmbeddedCheckout> must be used within <EmbeddedCheckoutProvider>");return e},ne="Invalid prop `stripe` supplied to `EmbeddedCheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",re=function(e){var n=e.stripe,r=e.options,i=e.children,s=t.useMemo((function(){return O(n,ne)}),[n]),o=t.useRef(null),a=t.useRef(null),c=l(t.useState({embeddedCheckout:null}),2),u=c[0],h=c[1];t.useEffect((function(){if(!a.current&&!o.current){var e=function(e){a.current||o.current||(a.current=e,o.current=a.current.initEmbeddedCheckout(r).then((function(e){h({embeddedCheckout:e})})))};"async"!==s.tag||a.current||!r.clientSecret&&!r.fetchClientSecret?"sync"!==s.tag||a.current||!r.clientSecret&&!r.fetchClientSecret||e(s.stripe):s.stripePromise.then((function(t){t&&e(t)}))}}),[s,r,u,a]),t.useEffect((function(){return function(){u.embeddedCheckout?(o.current=null,u.embeddedCheckout.destroy()):o.current&&o.current.then((function(){o.current=null,u.embeddedCheckout&&u.embeddedCheckout.destroy()}))}}),[u.embeddedCheckout]),t.useEffect((function(){D(a)}),[a]);var d=C(n);t.useEffect((function(){null!==d&&d!==n&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the `stripe` prop after setting it.")}),[d,n]);var f=C(r);return t.useEffect((function(){null!=f&&(null!=r?(void 0===r.clientSecret&&void 0===r.fetchClientSecret&&console.warn("Invalid props passed to EmbeddedCheckoutProvider: You must provide one of either `options.fetchClientSecret` or `options.clientSecret`."),null!=f.clientSecret&&r.clientSecret!==f.clientSecret&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the client secret after setting it. Unmount and create a new instance of EmbeddedCheckoutProvider instead."),null!=f.fetchClientSecret&&r.fetchClientSecret!==f.fetchClientSecret&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change fetchClientSecret after setting it. Unmount and create a new instance of EmbeddedCheckoutProvider instead."),null!=f.onComplete&&r.onComplete!==f.onComplete&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onComplete option after setting it."),null!=f.onShippingDetailsChange&&r.onShippingDetailsChange!==f.onShippingDetailsChange&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onShippingDetailsChange option after setting it."),null!=f.onLineItemsChange&&r.onLineItemsChange!==f.onLineItemsChange&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onLineItemsChange option after setting it.")):console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot unset options after setting them."))}),[f,r]),t.createElement(ee.Provider,{value:u},i)},ie=function(e){var n=e.id,r=e.className,i=te().embeddedCheckout,s=t.useRef(!1),o=t.useRef(null);return t.useLayoutEffect((function(){return!s.current&&i&&null!==o.current&&(i.mount(o.current),s.current=!0),function(){if(s.current&&i)try{i.unmount(),s.current=!1}catch(e){}}}),[i]),t.createElement("div",{ref:o,id:n,className:r})},se=function(e){var n=e.id,r=e.className;return te(),t.createElement("div",{id:n,className:r})},oe=Z?se:ie,ae=function(){return Y("calls useStripe()").stripe},le=X("auBankAccount",Z),ce=X("card",Z),ue=X("cardNumber",Z),he=X("cardExpiry",Z),de=X("cardCvc",Z),fe=X("fpxBank",Z),pe=X("iban",Z),me=X("idealBank",Z),ge=X("p24Bank",Z),ye=X("epsBank",Z),ve=X("payment",Z),_e=X("expressCheckout",Z),we=X("currencySelector",Z),be=X("paymentRequestButton",Z),Se=X("linkAuthentication",Z),Ee=X("address",Z),Ce=X("shippingAddress",Z),ke=X("paymentMethodMessaging",Z),Ie=X("affirmMessage",Z),Te=X("afterpayClearpayMessage",Z);e.AddressElement=Ee,e.AffirmMessageElement=Ie,e.AfterpayClearpayMessageElement=Te,e.AuBankAccountElement=le,e.CardCvcElement=de,e.CardElement=ce,e.CardExpiryElement=he,e.CardNumberElement=ue,e.CheckoutProvider=G,e.CurrencySelectorElement=we,e.Elements=F,e.ElementsConsumer=V,e.EmbeddedCheckout=oe,e.EmbeddedCheckoutProvider=re,e.EpsBankElement=ye,e.ExpressCheckoutElement=_e,e.FpxBankElement=fe,e.IbanElement=pe,e.IdealBankElement=me,e.LinkAuthenticationElement=Se,e.P24BankElement=ge,e.PaymentElement=ve,e.PaymentMethodMessagingElement=ke,e.PaymentRequestButtonElement=be,e.ShippingAddressElement=Ce,e.useCheckout=J,e.useElements=j,e.useStripe=ae}(t,n(43))},730:(e,t,n)=>{"use strict";var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function _(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),S=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),T=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function V(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function B(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case S:return"Portal";case k:return"Profiler";case C:return"StrictMode";case A:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function X(e,t){$(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function se(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ee=null,Ce=null;function ke(e){if(e=_i(e)){if("function"!==typeof Se)throw Error(s(280));var t=e.stateNode;t&&(t=bi(t),Se(e.stateNode,e.type,t))}}function Ie(e){Ee?Ce?Ce.push(e):Ce=[e]:Ee=e}function Te(){if(Ee){var e=Ee,t=Ce;if(Ce=Ee=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function xe(e,t){return e(t)}function Ae(){}var Ne=!1;function Pe(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return xe(e,t,n)}finally{Ne=!1,(null!==Ee||null!==Ce)&&(Ae(),Te())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=bi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Oe=!1;if(u)try{var De={};Object.defineProperty(De,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ue){Oe=!1}function Le(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Me=!1,Fe=null,Ue=!1,je=null,Ve={onError:function(e){Me=!0,Fe=e}};function Be(e,t,n,r,i,s,o,a,l){Me=!1,Fe=null,Le.apply(Ve,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(ze(e)!==e)throw Error(s(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Je=i.unstable_requestPaint,$e=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var _t=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,St,Et,Ct,kt,It=!1,Tt=[],xt=null,At=null,Nt=null,Pt=new Map,Rt=new Map,Ot=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":xt=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=_i(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=vi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void kt(e.priority,(function(){Et(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=_i(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function jt(e,t,n){Ut(e)&&n.delete(t)}function Vt(){It=!1,null!==xt&&Ut(xt)&&(xt=null),null!==At&&Ut(At)&&(At=null),null!==Nt&&Ut(Nt)&&(Nt=null),Pt.forEach(jt),Rt.forEach(jt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,It||(It=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function zt(e){function t(t){return Bt(t,e)}if(0<Tt.length){Bt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==xt&&Bt(xt,e),null!==At&&Bt(At,e),null!==Nt&&Bt(Nt,e),Pt.forEach(t),Rt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Ft(n),null===n.blockedOn&&Ot.shift()}var qt=w.ReactCurrentBatchConfig,Wt=!0;function Kt(e,t,n,r){var i=_t,s=qt.transition;qt.transition=null;try{_t=1,Gt(e,t,n,r)}finally{_t=i,qt.transition=s}}function Ht(e,t,n,r){var i=_t,s=qt.transition;qt.transition=null;try{_t=4,Gt(e,t,n,r)}finally{_t=i,qt.transition=s}}function Gt(e,t,n,r){if(Wt){var i=Yt(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return xt=Mt(xt,e,t,n,r,i),!0;case"dragenter":return At=Mt(At,e,t,n,r,i),!0;case"mouseover":return Nt=Mt(Nt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Pt.set(s,Mt(Pt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Rt.set(s,Mt(Rt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var s=_i(i);if(null!==s&&bt(s),null===(s=Yt(e,t,n,r))&&Wr(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=vi(e=be(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in $t?$t.value:$t.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=F({},cn,{view:0,detail:0}),dn=sn(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),mn=sn(F({},fn,{dataTransfer:0})),gn=sn(F({},hn,{relatedTarget:0})),yn=sn(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=sn(vn),wn=sn(F({},cn,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function kn(){return Cn}var In=F({},hn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=sn(In),xn=sn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=sn(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),Nn=sn(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=sn(Pn),On=[9,13,27,32],Dn=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Mn=u&&"TextEvent"in window&&!Ln,Fn=u&&(!Dn||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),jn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Kn(e,t,n,r){Ie(r),0<(t=Hr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Gn=null;function Qn(e){Ur(e,0)}function Yn(e){if(G(wi(e)))return e}function Jn(e,t){if("change"===e)return t}var $n=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;$n=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Gn=Hn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Kn(t,Gn,e,be(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function sr(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,_r=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Hr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function br(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},Er={},Cr={};function kr(e){if(Er[e])return Er[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Cr)return Er[e]=n[t];return e}u&&(Cr=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var Ir=kr("animationend"),Tr=kr("animationiteration"),xr=kr("animationstart"),Ar=kr("transitionend"),Nr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Nr.set(e,t),l(t,[e])}for(var Or=0;Or<Pr.length;Or++){var Dr=Pr[Or];Rr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Rr(Ir,"onAnimationEnd"),Rr(Tr,"onAnimationIteration"),Rr(xr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,c){if(Be.apply(this,arguments),Me){if(!Me)throw Error(s(198));var u=Fe;Me=!1,Fe=null,Ue||(Ue=!0,je=u)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}}}if(Ue)throw e=je,Ue=!1,je=null,e}function jr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Jt(t)){case 1:var i=Kt;break;case 4:i=Ht;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=vi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Pe((function(){var r=s,i=be(n),o=[];e:{var a=Nr.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Tn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Ir:case Tr:case xr:l=yn;break;case Ar:l=Nn;break;case"scroll":l=dn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=xn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Re(p,d))&&u.push(Kr(p,m,f)))),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(h=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=xn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:wi(l),f=null==c?a:wi(c),(a=new u(m,p+"leave",l,n,i)).target=h,a.relatedTarget=f,m=null,vi(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Gr(f))p++;for(f=0,m=d;m;m=Gr(m))f++;for(;0<p-f;)u=Gr(u),p--;for(;0<f-p;)d=Gr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Gr(u),d=Gr(d)}u=null}else u=null;null!==l&&Qr(o,a,l,u,!1),null!==c&&null!==h&&Qr(o,h,c,u,!0)}if("select"===(l=(a=r?wi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Jn;else if(Wn(a))if($n)g=or;else{g=ir;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Kn(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?wi(r):window,e){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,wr(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":wr(o,n,i)}var v;if(Dn)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else zn?Vn(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==_?"onCompositionEnd"===_&&zn&&(v=en()):(Xt="value"in($t=i)?$t.value:$t.textContent,zn=!0)),0<(y=Hr(r,_)).length&&(_=new wn(_,e,null,n,i),o.push({event:_,listeners:y}),v?_.data=v:null!==(v=Bn(n))&&(_.data=v))),(v=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(jn=!0,Un);case"textInput":return(e=t.data)===Un&&jn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Dn&&Vn(e,t)?(e=en(),Zt=Xt=$t=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}Ur(o,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Re(e,n))&&r.unshift(Kr(e,s,i)),null!=(s=Re(e,t))&&r.push(Kr(e,s,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Re(n,s))&&o.unshift(Kr(n,l,a)):i||null!=(l=Re(n,s))&&o.push(Kr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Jr,"")}function Xr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function _i(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function bi(e){return e[fi]||null}var Si=[],Ei=-1;function Ci(e){return{current:e}}function ki(e){0>Ei||(e.current=Si[Ei],Si[Ei]=null,Ei--)}function Ii(e,t){Ei++,Si[Ei]=e.current,e.current=t}var Ti={},xi=Ci(Ti),Ai=Ci(!1),Ni=Ti;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){ki(Ai),ki(xi)}function Di(e,t,n){if(xi.current!==Ti)throw Error(s(168));Ii(xi,t),Ii(Ai,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ni=xi.current,Ii(xi,e),Ii(Ai,Ai.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Li(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,ki(Ai),ki(xi),Ii(xi,e)):ki(Ai),Ii(Ai,n)}var Ui=null,ji=!1,Vi=!1;function Bi(e){null===Ui?Ui=[e]:Ui.push(e)}function zi(){if(!Vi&&null!==Ui){Vi=!0;var e=0,t=_t;try{var n=Ui;for(_t=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,ji=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ge(Ze,zi),i}finally{_t=t,Vi=!1}}return null}var qi=[],Wi=0,Ki=null,Hi=0,Gi=[],Qi=0,Yi=null,Ji=1,$i="";function Xi(e,t){qi[Wi++]=Hi,qi[Wi++]=Ki,Ki=e,Hi=t}function Zi(e,t,n){Gi[Qi++]=Ji,Gi[Qi++]=$i,Gi[Qi++]=Yi,Yi=e;var r=Ji;e=$i;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ji=1<<32-ot(t)+i|n<<i|r,$i=s+e}else Ji=1<<s|n<<i|r,$i=e}function es(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ts(e){for(;e===Ki;)Ki=qi[--Wi],qi[Wi]=null,Hi=qi[--Wi],qi[Wi]=null;for(;e===Yi;)Yi=Gi[--Qi],Gi[Qi]=null,$i=Gi[--Qi],Gi[Qi]=null,Ji=Gi[--Qi],Gi[Qi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Ji,overflow:$i}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=ci(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=w.ReactCurrentBatchConfig;function gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function ys(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vs(e){return(0,e._init)(e._payload)}function _s(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===E?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===R&&vs(s)===t.type)?((r=i(t,n.props)).ref=gs(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=gs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=gs(e,null,t),n.return=e,n;case S:return(t=Uc(t,e.mode,n)).return=e,t;case R:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;ys(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?c(e,t,n,r):null;case S:return n.key===i?u(e,t,n,r):null;case R:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);ys(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);ys(t,r)}return null}function m(i,s,a,l){for(var c=null,u=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,a[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),s=o(y,s,m),null===u?c=y:u.sibling=y,u=y,h=g}if(m===a.length)return n(i,h),is&&Xi(i,m),c;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(s=o(h,s,m),null===u?c=h:u.sibling=h,u=h);return is&&Xi(i,m),c}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),is&&Xi(i,m),c}function g(i,a,l,c){var u=L(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var _=f(i,m,v.value,c);if(null===_){null===m&&(m=y);break}e&&m&&null===_.alternate&&t(i,m),a=o(_,a,g),null===h?u=_:h.sibling=_,h=_,m=y}if(v.done)return n(i,m),is&&Xi(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,c))&&(a=o(v,a,g),null===h?u=v:h.sibling=v,h=v);return is&&Xi(i,g),u}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=o(v,a,g),null===h?u=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),is&&Xi(i,g),u}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===E&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===E){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&vs(c)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=gs(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===E?((s=Lc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Dc(o.type,o.key,o.props,null,r.mode,l)).ref=gs(r,s,o),l.return=r,r=l)}return a(r);case S:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Uc(o,r.mode,l)).return=r,r=s}return a(r);case R:return e(r,s,(u=o._init)(o._payload),l)}if(te(o))return m(r,s,o,l);if(L(o))return g(r,s,o,l);ys(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Fc(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var ws=_s(!0),bs=_s(!1),Ss=Ci(null),Es=null,Cs=null,ks=null;function Is(){ks=Cs=Es=null}function Ts(e){var t=Ss.current;ki(Ss),e._currentValue=t}function xs(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function As(e,t){Es=e,ks=Cs=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(_a=!0),e.firstContext=null)}function Ns(e){var t=e._currentValue;if(ks!==e)if(e={context:e,memoizedValue:t,next:null},null===Cs){if(null===Es)throw Error(s(308));Cs=e,Es.dependencies={lanes:0,firstContext:e}}else Cs=Cs.next=e;return t}var Ps=null;function Rs(e){null===Ps?Ps=[e]:Ps.push(e)}function Os(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Rs(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ds(e,r)}function Ds(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ls=!1;function Ms(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Us(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function js(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&xl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ds(e,n)}return null===(i=r.interleaved)?(t.next=t,Rs(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ds(e,n)}function Vs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Bs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function zs(e,t,n,r){var i=e.updateQueue;Ls=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,u=c=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=F({},h,d);break e;case 2:Ls=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Ml|=o,e.lanes=o,e.memoizedState=h}}function qs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Ws={},Ks=Ci(Ws),Hs=Ci(Ws),Gs=Ci(Ws);function Qs(e){if(e===Ws)throw Error(s(174));return e}function Ys(e,t){switch(Ii(Gs,t),Ii(Hs,e),Ii(Ks,Ws),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ki(Ks),Ii(Ks,t)}function Js(){ki(Ks),ki(Hs),ki(Gs)}function $s(e){Qs(Gs.current);var t=Qs(Ks.current),n=le(t,e.type);t!==n&&(Ii(Hs,e),Ii(Ks,n))}function Xs(e){Hs.current===e&&(ki(Ks),ki(Hs))}var Zs=Ci(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var ro=w.ReactCurrentDispatcher,io=w.ReactCurrentBatchConfig,so=0,oo=null,ao=null,lo=null,co=!1,uo=!1,ho=0,fo=0;function po(){throw Error(s(321))}function mo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function go(e,t,n,r,i,o){if(so=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ro.current=null===e||null===e.memoizedState?Zo:ea,e=n(r,i),uo){o=0;do{if(uo=!1,ho=0,25<=o)throw Error(s(301));o+=1,lo=ao=null,t.updateQueue=null,ro.current=ta,e=n(r,i)}while(uo)}if(ro.current=Xo,t=null!==ao&&null!==ao.next,so=0,lo=ao=oo=null,co=!1,t)throw Error(s(300));return e}function yo(){var e=0!==ho;return ho=0,e}function vo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=e:lo=lo.next=e,lo}function _o(){if(null===ao){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=ao.next;var t=null===lo?oo.memoizedState:lo.next;if(null!==t)lo=t,ao=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ao=e).memoizedState,baseState:ao.baseState,baseQueue:ao.baseQueue,queue:ao.queue,next:null},null===lo?oo.memoizedState=lo=e:lo=lo.next=e}return lo}function wo(e,t){return"function"===typeof t?t(e):t}function bo(e){var t=_o(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=ao,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var h=u.lane;if((so&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=r):c=c.next=d,oo.lanes|=h,Ml|=h}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(_a=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,oo.lanes|=o,Ml|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function So(e){var t=_o(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(_a=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Eo(){}function Co(e,t){var n=oo,r=_o(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,_a=!0),r=r.queue,Mo(To.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==lo&&1&lo.memoizedState.tag){if(n.flags|=2048,Po(9,Io.bind(null,n,r,i,t),void 0,null),null===Al)throw Error(s(349));0!==(30&so)||ko(n,t,i)}return i}function ko(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Io(e,t,n,r){t.value=n,t.getSnapshot=r,xo(t)&&Ao(e)}function To(e,t,n){return n((function(){xo(t)&&Ao(e)}))}function xo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Ao(e){var t=Ds(e,1);null!==t&&nc(t,e,1,-1)}function No(e){var t=vo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:e},t.queue=e,e=e.dispatch=Qo.bind(null,oo,e),[t.memoizedState,e]}function Po(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ro(){return _o().memoizedState}function Oo(e,t,n,r){var i=vo();oo.flags|=e,i.memoizedState=Po(1|t,n,void 0,void 0===r?null:r)}function Do(e,t,n,r){var i=_o();r=void 0===r?null:r;var s=void 0;if(null!==ao){var o=ao.memoizedState;if(s=o.destroy,null!==r&&mo(r,o.deps))return void(i.memoizedState=Po(t,n,s,r))}oo.flags|=e,i.memoizedState=Po(1|t,n,s,r)}function Lo(e,t){return Oo(8390656,8,e,t)}function Mo(e,t){return Do(2048,8,e,t)}function Fo(e,t){return Do(4,2,e,t)}function Uo(e,t){return Do(4,4,e,t)}function jo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Vo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Do(4,4,jo.bind(null,t,e),n)}function Bo(){}function zo(e,t){var n=_o();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qo(e,t){var n=_o();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Wo(e,t,n){return 0===(21&so)?(e.baseState&&(e.baseState=!1,_a=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),oo.lanes|=n,Ml|=n,e.baseState=!0),t)}function Ko(e,t){var n=_t;_t=0!==n&&4>n?n:4,e(!0);var r=io.transition;io.transition={};try{e(!1),t()}finally{_t=n,io.transition=r}}function Ho(){return _o().memoizedState}function Go(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Yo(e))Jo(t,n);else if(null!==(n=Os(e,t,n,r))){nc(n,e,r,ec()),$o(n,t,r)}}function Qo(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yo(e))Jo(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,Rs(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Os(e,t,i,r))&&(nc(n,e,r,i=ec()),$o(n,t,r))}}function Yo(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function Jo(e,t){uo=co=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function $o(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Xo={readContext:Ns,useCallback:po,useContext:po,useEffect:po,useImperativeHandle:po,useInsertionEffect:po,useLayoutEffect:po,useMemo:po,useReducer:po,useRef:po,useState:po,useDebugValue:po,useDeferredValue:po,useTransition:po,useMutableSource:po,useSyncExternalStore:po,useId:po,unstable_isNewReconciler:!1},Zo={readContext:Ns,useCallback:function(e,t){return vo().memoizedState=[e,void 0===t?null:t],e},useContext:Ns,useEffect:Lo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oo(4194308,4,jo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Oo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Oo(4,2,e,t)},useMemo:function(e,t){var n=vo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Go.bind(null,oo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},vo().memoizedState=e},useState:No,useDebugValue:Bo,useDeferredValue:function(e){return vo().memoizedState=e},useTransition:function(){var e=No(!1),t=e[0];return e=Ko.bind(null,e[1]),vo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oo,i=vo();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Al)throw Error(s(349));0!==(30&so)||ko(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Lo(To.bind(null,r,o,e),[e]),r.flags|=2048,Po(9,Io.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=vo(),t=Al.identifierPrefix;if(is){var n=$i;t=":"+t+"R"+(n=(Ji&~(1<<32-ot(Ji)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:Ns,useCallback:zo,useContext:Ns,useEffect:Mo,useImperativeHandle:Vo,useInsertionEffect:Fo,useLayoutEffect:Uo,useMemo:qo,useReducer:bo,useRef:Ro,useState:function(){return bo(wo)},useDebugValue:Bo,useDeferredValue:function(e){return Wo(_o(),ao.memoizedState,e)},useTransition:function(){return[bo(wo)[0],_o().memoizedState]},useMutableSource:Eo,useSyncExternalStore:Co,useId:Ho,unstable_isNewReconciler:!1},ta={readContext:Ns,useCallback:zo,useContext:Ns,useEffect:Mo,useImperativeHandle:Vo,useInsertionEffect:Fo,useLayoutEffect:Uo,useMemo:qo,useReducer:So,useRef:Ro,useState:function(){return So(wo)},useDebugValue:Bo,useDeferredValue:function(e){var t=_o();return null===ao?t.memoizedState=e:Wo(t,ao.memoizedState,e)},useTransition:function(){return[So(wo)[0],_o().memoizedState]},useMutableSource:Eo,useSyncExternalStore:Co,useId:Ho,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ra(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ia={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Us(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=js(e,s,i))&&(nc(t,e,i,r),Vs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Us(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=js(e,s,i))&&(nc(t,e,i,r),Vs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Us(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=js(e,i,r))&&(nc(t,e,r,n),Vs(t,e,r))}};function sa(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function oa(e,t,n){var r=!1,i=Ti,s=t.contextType;return"object"===typeof s&&null!==s?s=Ns(s):(i=Ri(t)?Ni:xi.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ti),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ia,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function aa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ia.enqueueReplaceState(t,t.state,null)}function la(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ms(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Ns(s):(s=Ri(t)?Ni:xi.current,i.context=Pi(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ra(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ia.enqueueReplaceState(i,i.state,null),zs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function ca(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ua(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ha(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var da="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,n){(n=Us(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,Kl=r),ha(0,t)},n}function pa(e,t,n){(n=Us(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ha(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){ha(0,t),"function"!==typeof r&&(null===Hl?Hl=new Set([this]):Hl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new da;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=kc.bind(null,e,t,n),t.then(e,e))}function ga(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Us(-1,1)).tag=2,js(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var va=w.ReactCurrentOwner,_a=!1;function wa(e,t,n,r){t.child=null===e?bs(t,null,n,r):ws(t,e.child,n,r)}function ba(e,t,n,r,i){n=n.render;var s=t.ref;return As(t,i),r=go(e,t,n,r,s,i),n=yo(),null===e||_a?(is&&n&&es(t),t.flags|=1,wa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function Sa(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Rc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ea(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Wa(e,t,i)}return t.flags|=1,(e=Oc(s,r)).ref=t.ref,e.return=t,t.child=e}function Ea(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(_a=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Wa(e,t,i);0!==(131072&e.flags)&&(_a=!0)}}return Ia(e,t,n,r,i)}function Ca(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ii(Ol,Rl),Rl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ii(Ol,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ii(Ol,Rl),Rl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ii(Ol,Rl),Rl|=r;return wa(e,t,i,n),t.child}function ka(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ia(e,t,n,r,i){var s=Ri(n)?Ni:xi.current;return s=Pi(t,s),As(t,i),n=go(e,t,n,r,s,i),r=yo(),null===e||_a?(is&&r&&es(t),t.flags|=1,wa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function Ta(e,t,n,r,i){if(Ri(n)){var s=!0;Mi(t)}else s=!1;if(As(t,i),null===t.stateNode)qa(e,t),oa(t,n,r),la(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ns(c):c=Pi(t,c=Ri(n)?Ni:xi.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&aa(t,o,r,c),Ls=!1;var d=t.memoizedState;o.state=d,zs(t,r,o,i),l=t.memoizedState,a!==r||d!==l||Ai.current||Ls?("function"===typeof u&&(ra(t,n,u,r),l=t.memoizedState),(a=Ls||sa(t,n,a,r,d,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Fs(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:na(t.type,a),o.props=c,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ns(l):l=Pi(t,l=Ri(n)?Ni:xi.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&aa(t,o,r,l),Ls=!1,d=t.memoizedState,o.state=d,zs(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||Ai.current||Ls?("function"===typeof f&&(ra(t,n,f,r),p=t.memoizedState),(c=Ls||sa(t,n,c,r,d,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return xa(e,t,n,r,s,i)}function xa(e,t,n,r,i,s){ka(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Wa(e,t,s);r=t.stateNode,va.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=ws(t,e.child,null,s),t.child=ws(t,null,a,s)):wa(e,t,a,s),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Aa(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),Ys(e,t.containerInfo)}function Na(e,t,n,r,i){return fs(),ps(i),t.flags|=256,wa(e,t,n,r),t.child}var Pa,Ra,Oa,Da,La={dehydrated:null,treeContext:null,retryLane:0};function Ma(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fa(e,t,n){var r,i=t.pendingProps,o=Zs.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ii(Zs,1&o),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Mc(l,i,0,null),e=Lc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ma(n),t.memoizedState=La,e):Ua(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,ja(e,t,a,r=ua(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&ws(t,e.child,null,a),t.child.memoizedState=Ma(a),t.memoizedState=La,o);if(0===(1&t.mode))return ja(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,ja(e,t,a,r=ua(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),_a||l){if(null!==(r=Al)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ds(e,i),nc(r,e,i,-1))}return mc(),ja(e,t,a,r=ua(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Gi[Qi++]=Ji,Gi[Qi++]=$i,Gi[Qi++]=Yi,Ji=e.id,$i=e.overflow,Yi=t),t=Ua(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Oc(r,a):(a=Lc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Ma(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=La,i}return e=(a=e.child).sibling,i=Oc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ua(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function ja(e,t,n,r){return null!==r&&ps(r),ws(t,e.child,null,n),(e=Ua(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Va(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xs(e.return,t,n)}function Ba(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function za(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(wa(e,t,r.children,n),0!==(2&(r=Zs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Va(e,n,t);else if(19===e.tag)Va(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ii(Zs,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ba(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===eo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ba(t,!0,n,null,s);break;case"together":Ba(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ml|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ka(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ha(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ga(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ha(t),null;case 1:case 17:return Ri(t.type)&&Oi(),Ha(t),null;case 3:return r=t.stateNode,Js(),ki(Ai),ki(xi),no(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(oc(ss),ss=null))),Ra(e,t),Ha(t),null;case 5:Xs(t);var i=Qs(Gs.current);if(n=t.type,null!==e&&null!=t.stateNode)Oa(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ha(t),null}if(e=Qs(Ks.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":J(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var l in ve(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&jr("scroll",r)}switch(n){case"input":H(r),Z(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Pa(e,t,!1,!1),t.stateNode=e;e:{switch(l=_e(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":J(e,r),i=Y(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in ve(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&jr("scroll",e):null!=u&&_(e,o,u,l))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ha(t),null;case 6:if(e&&null!=t.stateNode)Da(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Qs(Gs.current),Qs(Ks.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ha(t),null;case 13:if(ki(Zs),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ha(t),o=!1}else null!==ss&&(oc(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Dl&&(Dl=3):mc())),null!==t.updateQueue&&(t.flags|=4),Ha(t),null);case 4:return Js(),Ra(e,t),null===e&&zr(t.stateNode.containerInfo),Ha(t),null;case 10:return Ts(t.type._context),Ha(t),null;case 19:if(ki(Zs),null===(o=t.memoizedState))return Ha(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Ka(o,!1);else{if(0!==Dl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=eo(e))){for(t.flags|=128,Ka(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ii(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>zl&&(t.flags|=128,r=!0,Ka(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=eo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ka(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return Ha(t),null}else 2*$e()-o.renderingStartTime>zl&&1073741824!==n&&(t.flags|=128,r=!0,Ka(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=Zs.current,Ii(Zs,r?1&n|2:1&n),t):(Ha(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rl)&&(Ha(t),6&t.subtreeFlags&&(t.flags|=8192)):Ha(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Qa(e,t){switch(ts(t),t.tag){case 1:return Ri(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Js(),ki(Ai),ki(xi),no(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xs(t),null;case 13:if(ki(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ki(Zs),null;case 4:return Js(),null;case 10:return Ts(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Pa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ra=function(){},Oa=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Qs(Ks.current);var s,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&jr("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Da=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ya=!1,Ja=!1,$a="function"===typeof WeakSet?WeakSet:Set,Xa=null;function Za(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Cc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Cc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&el(t,n,s)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,hl=!1;function dl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Ja||Za(n,t);case 6:var r=ul,i=hl;ul=null,dl(e,t,n),hl=i,null!==(ul=r)&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),zt(e)):li(ul,n.stateNode));break;case 4:r=ul,i=hl,ul=n.stateNode.containerInfo,hl=!0,dl(e,t,n),ul=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Ja&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&el(n,t,o),i=i.next}while(i!==r)}dl(e,t,n);break;case 1:if(!Ja&&(Za(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Cc(n,t,a)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Ja=(r=Ja)||null!==n.memoizedState,dl(e,t,n),Ja=r):dl(e,t,n);break;default:dl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $a),t.forEach((function(t){var r=xc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,hl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===ul)throw Error(s(160));fl(o,a,i),ul=null,hl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Cc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Cc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Cc(e,e.return,g)}}break;case 1:ml(t,e),yl(e),512&r&&null!==n&&Za(n,n.return);break;case 5:if(ml(t,e),yl(e),512&r&&null!==n&&Za(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Cc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&$(i,o),_e(l,a);var u=_e(l,o);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):_(i,h,d,u)}switch(l){case"input":X(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(g){Cc(e,e.return,g)}}break;case 6:if(ml(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Cc(e,e.return,g)}}break;case 3:if(ml(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(g){Cc(e,e.return,g)}break;case 4:default:ml(t,e),yl(e);break;case 13:ml(t,e),yl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bl=$e())),4&r&&pl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ja=(u=Ja)||h,ml(t,e),Ja=u):ml(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Xa=e,h=e.child;null!==h;){for(d=Xa=h;null!==Xa;){switch(p=(f=Xa).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Za(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Cc(r,n,g)}}break;case 5:Za(f,f.return);break;case 22:if(null!==f.memoizedState){bl(d);continue}}null!==p?(p.return=f,Xa=p):bl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){Cc(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Cc(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),yl(e),4&r&&pl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),cl(e,al(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ll(e,al(e),o);break;default:throw Error(s(161))}}catch(a){Cc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Xa=e,_l(e,t,n)}function _l(e,t,n){for(var r=0!==(1&e.mode);null!==Xa;){var i=Xa,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ya;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Ja;a=Ya;var c=Ja;if(Ya=o,(Ja=l)&&!c)for(Xa=i;null!==Xa;)l=(o=Xa).child,22===o.tag&&null!==o.memoizedState?Sl(i):null!==l?(l.return=o,Xa=l):Sl(i);for(;null!==s;)Xa=s,_l(s,t,n),s=s.sibling;Xa=i,Ya=a,Ja=c}wl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Xa=s):wl(e)}}function wl(e){for(;null!==Xa;){var t=Xa;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ja||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ja)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&qs(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}qs(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&zt(d)}}}break;default:throw Error(s(163))}Ja||512&t.flags&&il(t)}catch(f){Cc(t,t.return,f)}}if(t===e){Xa=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xa=n;break}Xa=t.return}}function bl(e){for(;null!==Xa;){var t=Xa;if(t===e){Xa=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xa=n;break}Xa=t.return}}function Sl(e){for(;null!==Xa;){var t=Xa;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Cc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Cc(t,i,l)}}var s=t.return;try{il(t)}catch(l){Cc(t,s,l)}break;case 5:var o=t.return;try{il(t)}catch(l){Cc(t,o,l)}}}catch(l){Cc(t,t.return,l)}if(t===e){Xa=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Xa=a;break}Xa=t.return}}var El,Cl=Math.ceil,kl=w.ReactCurrentDispatcher,Il=w.ReactCurrentOwner,Tl=w.ReactCurrentBatchConfig,xl=0,Al=null,Nl=null,Pl=0,Rl=0,Ol=Ci(0),Dl=0,Ll=null,Ml=0,Fl=0,Ul=0,jl=null,Vl=null,Bl=0,zl=1/0,ql=null,Wl=!1,Kl=null,Hl=null,Gl=!1,Ql=null,Yl=0,Jl=0,$l=null,Xl=-1,Zl=0;function ec(){return 0!==(6&xl)?$e():-1!==Xl?Xl:Xl=$e()}function tc(e){return 0===(1&e.mode)?1:0!==(2&xl)&&0!==Pl?Pl&-Pl:null!==ms.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=_t)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function nc(e,t,n,r){if(50<Jl)throw Jl=0,$l=null,Error(s(185));yt(e,n,r),0!==(2&xl)&&e===Al||(e===Al&&(0===(2&xl)&&(Fl|=n),4===Dl&&ac(e,Pl)),rc(e,r),1===n&&0===xl&&0===(1&t.mode)&&(zl=$e()+500,ji&&zi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Al?Pl:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){ji=!0,Bi(e)}(lc.bind(null,e)):Bi(lc.bind(null,e)),oi((function(){0===(6&xl)&&zi()})),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Xl=-1,Zl=0,0!==(6&xl))throw Error(s(327));var n=e.callbackNode;if(Sc()&&e.callbackNode!==n)return null;var r=dt(e,e===Al?Pl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=xl;xl|=2;var o=pc();for(Al===e&&Pl===t||(ql=null,zl=$e()+500,dc(e,t));;)try{vc();break}catch(l){fc(e,l)}Is(),kl.current=o,xl=i,null!==Nl?t=0:(Al=null,Pl=0,t=Dl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=sc(e,i))),1===t)throw n=Ll,dc(e,0),ac(e,r),rc(e,$e()),n;if(6===t)ac(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(o=pt(e))&&(r=o,t=sc(e,o))),1===t))throw n=Ll,dc(e,0),ac(e,r),rc(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:bc(e,Vl,ql);break;case 3:if(ac(e,r),(130023424&r)===r&&10<(t=Bl+500-$e())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(bc.bind(null,e,Vl,ql),t);break}bc(e,Vl,ql);break;case 4:if(ac(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cl(r/1960))-r)){e.timeoutHandle=ri(bc.bind(null,e,Vl,ql),r);break}bc(e,Vl,ql);break;default:throw Error(s(329))}}}return rc(e,$e()),e.callbackNode===n?ic.bind(null,e):null}function sc(e,t){var n=jl;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Vl,Vl=n,null!==t&&oc(t)),e}function oc(e){null===Vl?Vl=e:Vl.push.apply(Vl,e)}function ac(e,t){for(t&=~Ul,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&xl))throw Error(s(327));Sc();var t=dt(e,0);if(0===(1&t))return rc(e,$e()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Ll,dc(e,0),ac(e,t),rc(e,$e()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bc(e,Vl,ql),rc(e,$e()),null}function cc(e,t){var n=xl;xl|=1;try{return e(t)}finally{0===(xl=n)&&(zl=$e()+500,ji&&zi())}}function uc(e){null!==Ql&&0===Ql.tag&&0===(6&xl)&&Sc();var t=xl;xl|=1;var n=Tl.transition,r=_t;try{if(Tl.transition=null,_t=1,e)return e()}finally{_t=r,Tl.transition=n,0===(6&(xl=t))&&zi()}}function hc(){Rl=Ol.current,ki(Ol)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Nl)for(n=Nl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:Js(),ki(Ai),ki(xi),no();break;case 5:Xs(r);break;case 4:Js();break;case 13:case 19:ki(Zs);break;case 10:Ts(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Al=e,Nl=e=Oc(e.current,null),Pl=Rl=t,Dl=0,Ll=null,Ul=Fl=Ml=0,Vl=jl=null,null!==Ps){for(t=0;t<Ps.length;t++)if(null!==(r=(n=Ps[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Ps=null}return e}function fc(e,t){for(;;){var n=Nl;try{if(Is(),ro.current=Xo,co){for(var r=oo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}co=!1}if(so=0,lo=ao=oo=null,uo=!1,ho=0,Il.current=null,null===n||null===n.return){Dl=1,Ll=t,Nl=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Pl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ga(a);if(null!==p){p.flags&=-257,ya(p,a,l,0,t),1&p.mode&&ma(o,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ma(o,u,t),mc();break e}c=Error(s(426))}else if(is&&1&l.mode){var y=ga(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ya(y,a,l,0,t),ps(ca(c,l));break e}}o=c=ca(c,l),4!==Dl&&(Dl=2),null===jl?jl=[o]:jl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Bs(o,fa(0,c,t));break e;case 1:l=c;var v=o.type,_=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Hl||!Hl.has(_)))){o.flags|=65536,t&=-t,o.lanes|=t,Bs(o,pa(o,l,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(w){t=w,Nl===n&&null!==n&&(Nl=n=n.return);continue}break}}function pc(){var e=kl.current;return kl.current=Xo,null===e?Xo:e}function mc(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===Al||0===(268435455&Ml)&&0===(268435455&Fl)||ac(Al,Pl)}function gc(e,t){var n=xl;xl|=2;var r=pc();for(Al===e&&Pl===t||(ql=null,dc(e,t));;)try{yc();break}catch(i){fc(e,i)}if(Is(),xl=n,kl.current=r,null!==Nl)throw Error(s(261));return Al=null,Pl=0,Dl}function yc(){for(;null!==Nl;)_c(Nl)}function vc(){for(;null!==Nl&&!Ye();)_c(Nl)}function _c(e){var t=El(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?wc(e):Nl=t,Il.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ga(n,t,Rl)))return void(Nl=n)}else{if(null!==(n=Qa(n,t)))return n.flags&=32767,void(Nl=n);if(null===e)return Dl=6,void(Nl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Nl=t);Nl=t=e}while(null!==t);0===Dl&&(Dl=5)}function bc(e,t,n){var r=_t,i=Tl.transition;try{Tl.transition=null,_t=1,function(e,t,n,r){do{Sc()}while(null!==Ql);if(0!==(6&xl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Al&&(Nl=Al=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,Ac(tt,(function(){return Sc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Tl.transition,Tl.transition=null;var a=_t;_t=1;var l=xl;xl|=4,Il.current=null,function(e,t){if(ei=Wt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(b){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==o||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=a),f===o&&++h===r&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Xa=t;null!==Xa;)if(e=(t=Xa).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xa=e;else for(;null!==Xa;){t=Xa;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,_=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:na(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(b){Cc(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Xa=e;break}Xa=t.return}m=tl,tl=!1}(e,n),gl(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,vl(n,e,i),Je(),xl=l,_t=a,Tl.transition=o}else e.current=n;if(Gl&&(Gl=!1,Ql=e,Yl=i),o=e.pendingLanes,0===o&&(Hl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wl)throw Wl=!1,e=Kl,Kl=null,e;0!==(1&Yl)&&0!==e.tag&&Sc(),o=e.pendingLanes,0!==(1&o)?e===$l?Jl++:(Jl=0,$l=e):Jl=0,zi()}(e,t,n,r)}finally{Tl.transition=i,_t=r}return null}function Sc(){if(null!==Ql){var e=wt(Yl),t=Tl.transition,n=_t;try{if(Tl.transition=null,_t=16>e?16:e,null===Ql)var r=!1;else{if(e=Ql,Ql=null,Yl=0,0!==(6&xl))throw Error(s(331));var i=xl;for(xl|=4,Xa=e.current;null!==Xa;){var o=Xa,a=o.child;if(0!==(16&Xa.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Xa=u;null!==Xa;){var h=Xa;switch(h.tag){case 0:case 11:case 15:nl(8,h,o)}var d=h.child;if(null!==d)d.return=h,Xa=d;else for(;null!==Xa;){var f=(h=Xa).sibling,p=h.return;if(sl(h),h===u){Xa=null;break}if(null!==f){f.return=p,Xa=f;break}Xa=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Xa=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Xa=a;else e:for(;null!==Xa;){if(0!==(2048&(o=Xa).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,Xa=v;break e}Xa=o.return}}var _=e.current;for(Xa=_;null!==Xa;){var w=(a=Xa).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,Xa=w;else e:for(a=_;null!==Xa;){if(0!==(2048&(l=Xa).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(S){Cc(l,l.return,S)}if(l===a){Xa=null;break e}var b=l.sibling;if(null!==b){b.return=l.return,Xa=b;break e}Xa=l.return}}if(xl=i,zi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(S){}r=!0}return r}finally{_t=n,Tl.transition=t}}return!1}function Ec(e,t,n){e=js(e,t=fa(0,t=ca(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function Cc(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hl||!Hl.has(r))){t=js(t,e=pa(t,e=ca(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function kc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Al===e&&(Pl&n)===n&&(4===Dl||3===Dl&&(130023424&Pl)===Pl&&500>$e()-Bl?dc(e,0):Ul|=n),rc(e,t)}function Ic(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Ds(e,t))&&(yt(e,t,n),rc(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ic(e,n)}function xc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Ic(e,n)}function Ac(e,t){return Ge(e,t)}function Nc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Nc(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Rc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case E:return Lc(n.children,i,o,t);case C:a=8,i|=8;break;case k:return(e=Pc(12,n,t,2|i)).elementType=k,e.lanes=o,e;case A:return(e=Pc(13,n,t,i)).elementType=A,e.lanes=o,e;case N:return(e=Pc(19,n,t,i)).elementType=N,e.lanes=o,e;case O:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:a=10;break e;case T:a=9;break e;case x:a=11;break e;case P:a=14;break e;case R:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Pc(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,s,o,a,l){return e=new jc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Pc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ms(s),e}function Bc(e){if(!e)return Ti;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Li(e,n,t)}return t}function zc(e,t,n,r,i,s,o,a,l){return(e=Vc(n,r,!0,e,0,s,0,a,l)).context=Bc(null),n=e.current,(s=Us(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,js(n,s,i),e.current.lanes=i,yt(e,i,r),rc(e,r),e}function qc(e,t,n,r){var i=t.current,s=ec(),o=tc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Us(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=js(i,t,o))&&(nc(e,i,o,s),Vs(e,i,o)),o}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}El=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)_a=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return _a=!1,function(e,t,n){switch(t.tag){case 3:Aa(t),fs();break;case 5:$s(t);break;case 1:Ri(t.type)&&Mi(t);break;case 4:Ys(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ii(Ss,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ii(Zs,1&Zs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fa(e,t,n):(Ii(Zs,1&Zs.current),null!==(e=Wa(e,t,n))?e.sibling:null);Ii(Zs,1&Zs.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return za(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ii(Zs,Zs.current),r)break;return null;case 22:case 23:return t.lanes=0,Ca(e,t,n)}return Wa(e,t,n)}(e,t,n);_a=0!==(131072&e.flags)}else _a=!1,is&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qa(e,t),e=t.pendingProps;var i=Pi(t,xi.current);As(t,n),i=go(null,t,r,e,i,n);var o=yo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ms(t),i.updater=ia,t.stateNode=i,i._reactInternals=t,la(t,r,e,n),t=xa(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),wa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qa(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===x)return 11;if(e===P)return 14}return 2}(r),e=na(r,e),i){case 0:t=Ia(null,t,r,e,n);break e;case 1:t=Ta(null,t,r,e,n);break e;case 11:t=ba(null,t,r,e,n);break e;case 14:t=Sa(null,t,r,na(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ia(e,t,r,i=t.elementType===r?i:na(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ta(e,t,r,i=t.elementType===r?i:na(r,i),n);case 3:e:{if(Aa(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Fs(e,t),zs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Na(e,t,r,n,i=ca(Error(s(423)),t));break e}if(r!==i){t=Na(e,t,r,n,i=ca(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=bs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Wa(e,t,n);break e}wa(e,t,r,n)}t=t.child}return t;case 5:return $s(t),null===e&&cs(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),ka(e,t),wa(e,t,a,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Fa(e,t,n);case 4:return Ys(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ws(t,null,r,n):wa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ba(e,t,r,i=t.elementType===r?i:na(r,i),n);case 7:return wa(e,t,t.pendingProps,n),t.child;case 8:case 12:return wa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Ii(Ss,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ai.current){t=Wa(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Us(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xs(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),xs(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}wa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,As(t,n),r=r(i=Ns(i)),t.flags|=1,wa(e,t,r,n),t.child;case 14:return i=na(r=t.type,t.pendingProps),Sa(e,t,r,i=na(r.type,i),n);case 15:return Ea(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:na(r,i),qa(e,t),t.tag=1,Ri(r)?(e=!0,Mi(t)):e=!1,As(t,n),oa(t,r,i),la(t,r,i,n),xa(null,t,r,!0,e,n);case 19:return za(e,t,n);case 22:return Ca(e,t,n)}throw Error(s(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Zc(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Wc(o);a.call(e)}}qc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Wc(o);s.call(e)}}var o=zc(t,r,e,0,null,!1,0,"",Xc);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),uc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Wc(l);a.call(e)}}var l=Vc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[pi]=l.current,zr(8===e.nodeType?e.parentNode:e),uc((function(){qc(t,l,n,r)})),l}(n,t,e,i,r);return Wc(o)}Yc.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));qc(e,t,null,null)},Yc.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){qc(null,e,null,null)})),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ct();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Ft(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),rc(t,$e()),0===(6&xl)&&(zl=$e()+500,zi()))}break;case 13:uc((function(){var t=Ds(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Hc(e,1)}},St=function(e){if(13===e.tag){var t=Ds(e,134217728);if(null!==t)nc(t,e,134217728,ec());Hc(e,134217728)}},Et=function(e){if(13===e.tag){var t=tc(e),n=Ds(e,t);if(null!==n)nc(n,e,t,ec());Hc(e,t)}},Ct=function(){return _t},kt=function(e,t){var n=_t;try{return _t=e,t()}finally{_t=n}},Se=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=bi(r);if(!i)throw Error(s(90));G(r),X(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},xe=cc,Ae=uc;var eu={usingClientEntryPoint:!1,Events:[_i,wi,bi,Ie,Te,cc]},tu={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),st=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(s(299));var n=!1,r="",i=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!$c(t))throw Error(s(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!$c(t))throw Error(s(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(s(40));return!!e._reactRootContainer&&(uc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$c(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153:(e,t,n)=>{"use strict";var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function _(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=_.prototype=new v;w.constructor=_,m(w,y.prototype),w.isPureReactComponent=!0;var b=Array.isArray,S=Object.prototype.hasOwnProperty,E={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)S.call(t,i)&&!C.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:E.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function x(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+x(l,0):s,b(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),A(o,t,i,"",(function(e){return e}))):null!=o&&(I(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",b(e))for(var c=0;c<e.length;c++){var u=s+x(a=e[c],c);l+=A(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=A(a=a.value,t,i,u=s+x(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function N(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},O={transition:null},D={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:O,ReactCurrentOwner:E};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=_,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=E.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!C.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},43:(e,t,n)=>{"use strict";e.exports=n(202)},579:(e,t,n)=>{"use strict";e.exports=n(153)},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function b(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,O(S);else{var t=r(u);null!==t&&D(b,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,v(I),I=-1),p=!0;var s=f;try{for(w(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!A());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(c)&&i(c),w(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&D(b,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,C=!1,k=null,I=-1,T=5,x=-1;function A(){return!(t.unstable_now()-x<T)}function N(){if(null!==k){var e=t.unstable_now();x=e;var n=!0;try{n=k(!0,e)}finally{n?E():(C=!1,k=null)}}else C=!1}if("function"===typeof _)E=function(){_(N)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=N,E=function(){R.postMessage(null)}}else E=function(){y(N,0)};function O(e){k=e,C||(C=!0,E())}function D(e,n){I=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,O(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(v(I),I=-1):g=!0,D(b,s-o))):(e.sortIndex=a,n(c,e),m||p||(m=!0,O(S))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},853:(e,t,n)=>{"use strict";e.exports=n(234)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".17d3dcb5.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="amazon-clone:";n.l=(r,i,s,o)=>{if(e[r])e[r].push(i);else{var a,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+s){a=h;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+s),a.src=r),e[r]=[i];var d=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((e=>e(n))),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var s=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=s);var o=n.p+n.u(t),a=new Error;n.l(o,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,i[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,s,o=r[0],a=r[1],l=r[2],c=0;if(o.some((t=>0!==e[t]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)l(n)}for(t&&t(r);c<o.length;c++)s=o[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkamazon_clone=self.webpackChunkamazon_clone||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{FirebaseError:()=>no,SDK_VERSION:()=>Qa,_DEFAULT_ENTRY_NAME:()=>Ra,_addComponent:()=>Fa,_addOrOverwriteComponent:()=>Ua,_apps:()=>Da,_clearComponents:()=>Wa,_components:()=>Ma,_getProvider:()=>Va,_isFirebaseApp:()=>za,_isFirebaseServerApp:()=>qa,_registerComponent:()=>ja,_removeServiceInstance:()=>Ba,_serverApps:()=>La,deleteApp:()=>Za,getApp:()=>$a,getApps:()=>Xa,initializeApp:()=>Ya,initializeServerApp:()=>Ja,onLog:()=>tl,registerVersion:()=>el,setLogLevel:()=>nl});var t={};n.r(t),n.d(t,{hasBrowserEnv:()=>VD,hasStandardBrowserEnv:()=>zD,hasStandardBrowserWebWorkerEnv:()=>qD,navigator:()=>BD,origin:()=>WD});var r=n(43),i=n.t(r,2),s=n(391);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}function l(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function d(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=d(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}const f=function(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=d(e))&&(r&&(r+=" "),r+=t);return r};function p(e){const t=new URL("https://mui.com/production-error/?code=".concat(e));for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((e=>t.searchParams.append("args[]",e))),"Minified MUI error #".concat(e,"; visit ").concat(t," for the full message.")}function m(e){if("string"!==typeof e)throw new Error(p(7));return e.charAt(0).toUpperCase()+e.slice(1)}const g=m;function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y.apply(null,arguments)}var v=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)})),this.tags=[],this.ctr=0},e}(),_=Math.abs,w=String.fromCharCode,b=Object.assign;function S(e){return e.trim()}function E(e,t,n){return e.replace(t,n)}function C(e,t){return e.indexOf(t)}function k(e,t){return 0|e.charCodeAt(t)}function I(e,t,n){return e.slice(t,n)}function T(e){return e.length}function x(e){return e.length}function A(e,t){return t.push(e),e}var N=1,P=1,R=0,O=0,D=0,L="";function M(e,t,n,r,i,s,o){return{value:e,root:t,parent:n,type:r,props:i,children:s,line:N,column:P,length:o,return:""}}function F(e,t){return b(M("",null,null,"",null,null,0),e,{length:-e.length},t)}function U(){return D=O>0?k(L,--O):0,P--,10===D&&(P=1,N--),D}function j(){return D=O<R?k(L,O++):0,P++,10===D&&(P=1,N++),D}function V(){return k(L,O)}function B(){return O}function z(e,t){return I(L,e,t)}function q(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function W(e){return N=P=1,R=T(L=e),O=0,[]}function K(e){return L="",e}function H(e){return S(z(O-1,Y(91===e?e+2:40===e?e+1:e)))}function G(e){for(;(D=V())&&D<33;)j();return q(e)>2||q(D)>3?"":" "}function Q(e,t){for(;--t&&j()&&!(D<48||D>102||D>57&&D<65||D>70&&D<97););return z(e,B()+(t<6&&32==V()&&32==j()))}function Y(e){for(;j();)switch(D){case e:return O;case 34:case 39:34!==e&&39!==e&&Y(D);break;case 40:41===e&&Y(e);break;case 92:j()}return O}function J(e,t){for(;j()&&e+D!==57&&(e+D!==84||47!==V()););return"/*"+z(t,O-1)+"*"+w(47===e?e:j())}function $(e){for(;!q(V());)j();return z(e,O)}var X="-ms-",Z="-moz-",ee="-webkit-",te="comm",ne="rule",re="decl",ie="@keyframes";function se(e,t){for(var n="",r=x(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function oe(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case re:return e.return=e.return||e.value;case te:return"";case ie:return e.return=e.value+"{"+se(e.children,r)+"}";case ne:e.value=e.props.join(",")}return T(n=se(e.children,r))?e.return=e.value+"{"+n+"}":""}function ae(e){return K(le("",null,null,null,[""],e=W(e),0,[0],e))}function le(e,t,n,r,i,s,o,a,l){for(var c=0,u=0,h=o,d=0,f=0,p=0,m=1,g=1,y=1,v=0,_="",b=i,S=s,I=r,x=_;g;)switch(p=v,v=j()){case 40:if(108!=p&&58==k(x,h-1)){-1!=C(x+=E(H(v),"&","&\f"),"&\f")&&(y=-1);break}case 34:case 39:case 91:x+=H(v);break;case 9:case 10:case 13:case 32:x+=G(p);break;case 92:x+=Q(B()-1,7);continue;case 47:switch(V()){case 42:case 47:A(ue(J(j(),B()),t,n),l);break;default:x+="/"}break;case 123*m:a[c++]=T(x)*y;case 125*m:case 59:case 0:switch(v){case 0:case 125:g=0;case 59+u:-1==y&&(x=E(x,/\f/g,"")),f>0&&T(x)-h&&A(f>32?he(x+";",r,n,h-1):he(E(x," ","")+";",r,n,h-2),l);break;case 59:x+=";";default:if(A(I=ce(x,t,n,c,u,i,a,_,b=[],S=[],h),s),123===v)if(0===u)le(x,t,I,I,b,s,h,a,S);else switch(99===d&&110===k(x,3)?100:d){case 100:case 108:case 109:case 115:le(e,I,I,r&&A(ce(e,I,I,0,0,i,a,_,i,b=[],h),S),i,S,h,a,r?b:S);break;default:le(x,I,I,I,[""],S,0,a,S)}}c=u=f=0,m=y=1,_=x="",h=o;break;case 58:h=1+T(x),f=p;default:if(m<1)if(123==v)--m;else if(125==v&&0==m++&&125==U())continue;switch(x+=w(v),v*m){case 38:y=u>0?1:(x+="\f",-1);break;case 44:a[c++]=(T(x)-1)*y,y=1;break;case 64:45===V()&&(x+=H(j())),d=V(),u=h=T(_=x+=$(B())),v++;break;case 45:45===p&&2==T(x)&&(m=0)}}return s}function ce(e,t,n,r,i,s,o,a,l,c,u){for(var h=i-1,d=0===i?s:[""],f=x(d),p=0,m=0,g=0;p<r;++p)for(var y=0,v=I(e,h+1,h=_(m=o[p])),w=e;y<f;++y)(w=S(m>0?d[y]+" "+v:E(v,/&\f/g,d[y])))&&(l[g++]=w);return M(e,t,n,0===i?ne:a,l,c,u)}function ue(e,t,n){return M(e,t,n,te,w(D),I(e,2,-2),0)}function he(e,t,n,r){return M(e,t,n,re,I(e,0,r),I(e,r+1,-1),r)}var de=function(e,t,n){for(var r=0,i=0;r=i,i=V(),38===r&&12===i&&(t[n]=1),!q(i);)j();return z(e,O)},fe=function(e,t){return K(function(e,t){var n=-1,r=44;do{switch(q(r)){case 0:38===r&&12===V()&&(t[n]=1),e[n]+=de(O-1,t,n);break;case 2:e[n]+=H(r);break;case 4:if(44===r){e[++n]=58===V()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=w(r)}}while(r=j());return e}(W(e),t))},pe=new WeakMap,me=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||pe.get(n))&&!r){pe.set(e,!0);for(var i=[],s=fe(t,i),o=n.props,a=0,l=0;a<s.length;a++)for(var c=0;c<o.length;c++,l++)e.props[l]=i[a]?s[a].replace(/&\f/g,o[c]):o[c]+" "+s[a]}}},ge=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function ye(e,t){switch(function(e,t){return 45^k(e,0)?(((t<<2^k(e,0))<<2^k(e,1))<<2^k(e,2))<<2^k(e,3):0}(e,t)){case 5103:return ee+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ee+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return ee+e+Z+e+X+e+e;case 6828:case 4268:return ee+e+X+e+e;case 6165:return ee+e+X+"flex-"+e+e;case 5187:return ee+e+E(e,/(\w+).+(:[^]+)/,ee+"box-$1$2"+X+"flex-$1$2")+e;case 5443:return ee+e+X+"flex-item-"+E(e,/flex-|-self/,"")+e;case 4675:return ee+e+X+"flex-line-pack"+E(e,/align-content|flex-|-self/,"")+e;case 5548:return ee+e+X+E(e,"shrink","negative")+e;case 5292:return ee+e+X+E(e,"basis","preferred-size")+e;case 6060:return ee+"box-"+E(e,"-grow","")+ee+e+X+E(e,"grow","positive")+e;case 4554:return ee+E(e,/([^-])(transform)/g,"$1"+ee+"$2")+e;case 6187:return E(E(E(e,/(zoom-|grab)/,ee+"$1"),/(image-set)/,ee+"$1"),e,"")+e;case 5495:case 3959:return E(e,/(image-set\([^]*)/,ee+"$1$`$1");case 4968:return E(E(e,/(.+:)(flex-)?(.*)/,ee+"box-pack:$3"+X+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ee+e+e;case 4095:case 3583:case 4068:case 2532:return E(e,/(.+)-inline(.+)/,ee+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(T(e)-1-t>6)switch(k(e,t+1)){case 109:if(45!==k(e,t+4))break;case 102:return E(e,/(.+:)(.+)-([^]+)/,"$1"+ee+"$2-$3$1"+Z+(108==k(e,t+3)?"$3":"$2-$3"))+e;case 115:return~C(e,"stretch")?ye(E(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==k(e,t+1))break;case 6444:switch(k(e,T(e)-3-(~C(e,"!important")&&10))){case 107:return E(e,":",":"+ee)+e;case 101:return E(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ee+(45===k(e,14)?"inline-":"")+"box$3$1"+ee+"$2$3$1"+X+"$2box$3")+e}break;case 5936:switch(k(e,t+11)){case 114:return ee+e+X+E(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return ee+e+X+E(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return ee+e+X+E(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return ee+e+X+e+e}return e}var ve=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case re:e.return=ye(e.value,e.length);break;case ie:return se([F(e,{value:E(e.value,"@","@"+ee)})],r);case ne:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return se([F(e,{props:[E(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return se([F(e,{props:[E(t,/:(plac\w+)/,":"+ee+"input-$1")]}),F(e,{props:[E(t,/:(plac\w+)/,":-moz-$1")]}),F(e,{props:[E(t,/:(plac\w+)/,X+"input-$1")]})],r)}return""}))}}],_e=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r,i,s=e.stylisPlugins||ve,o={},a=[];r=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)o[t[n]]=!0;a.push(e)}));var l,c,u=[oe,(c=function(e){l.insert(e)},function(e){e.root||(e=e.return)&&c(e)})],h=function(e){var t=x(e);return function(n,r,i,s){for(var o="",a=0;a<t;a++)o+=e[a](n,r,i,s)||"";return o}}([me,ge].concat(s,u));i=function(e,t,n,r){l=n,se(ae(e?e+"{"+t.styles+"}":t.styles),h),r&&(d.inserted[t.name]=!0)};var d={key:t,sheet:new v({key:t,container:r,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:i};return d.sheet.hydrate(a),d};var we={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function be(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var Se=/[A-Z]|^ms/g,Ee=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Ce=function(e){return 45===e.charCodeAt(1)},ke=function(e){return null!=e&&"boolean"!==typeof e},Ie=be((function(e){return Ce(e)?e:e.replace(Se,"-$&").toLowerCase()})),Te=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(Ee,(function(e,t,n){return Ae={name:t,styles:n,next:Ae},t}))}return 1===we[e]||Ce(e)||"number"!==typeof t||0===t?t:t+"px"};function xe(e,t,n){if(null==n)return"";var r=n;if(void 0!==r.__emotion_styles)return r;switch(typeof n){case"boolean":return"";case"object":var i=n;if(1===i.anim)return Ae={name:i.name,styles:i.styles,next:Ae},i.name;var s=n;if(void 0!==s.styles){var o=s.next;if(void 0!==o)for(;void 0!==o;)Ae={name:o.name,styles:o.styles,next:Ae},o=o.next;return s.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=xe(e,t,n[i])+";";else for(var s in n){var o=n[s];if("object"!==typeof o){var a=o;null!=t&&void 0!==t[a]?r+=s+"{"+t[a]+"}":ke(a)&&(r+=Ie(s)+":"+Te(s,a)+";")}else if(!Array.isArray(o)||"string"!==typeof o[0]||null!=t&&void 0!==t[o[0]]){var l=xe(e,t,o);switch(s){case"animation":case"animationName":r+=Ie(s)+":"+l+";";break;default:r+=s+"{"+l+"}"}}else for(var c=0;c<o.length;c++)ke(o[c])&&(r+=Ie(s)+":"+Te(s,o[c])+";")}return r}(e,t,n);case"function":if(void 0!==e){var a=Ae,l=n(e);return Ae=a,xe(e,t,l)}}var c=n;if(null==t)return c;var u=t[c];return void 0!==u?u:c}var Ae,Ne=/label:\s*([^\s;{]+)\s*(;|$)/g;function Pe(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";Ae=void 0;var s=e[0];null==s||void 0===s.raw?(r=!1,i+=xe(n,t,s)):i+=s[0];for(var o=1;o<e.length;o++){if(i+=xe(n,t,e[o]),r)i+=s[o]}Ne.lastIndex=0;for(var a,l="";null!==(a=Ne.exec(i));)l+="-"+a[1];var c=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+l;return{name:c,styles:i,next:Ae}}var Re=!!i.useInsertionEffect&&i.useInsertionEffect,Oe=Re||function(e){return e()},De=(Re||r.useLayoutEffect,r.createContext("undefined"!==typeof HTMLElement?_e({key:"css"}):null)),Le=(De.Provider,function(e){return(0,r.forwardRef)((function(t,n){var i=(0,r.useContext)(De);return e(t,i,n)}))}),Me=r.createContext({});var Fe=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},Ue=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,je=be((function(e){return Ue.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),Ve=function(e){return"theme"!==e},Be=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?je:Ve},ze=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},qe=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return Fe(t,n,r),Oe((function(){return function(e,t,n){Fe(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+r:"",i,e.sheet,!0),i=i.next}while(void 0!==i)}}(t,n,r)})),null},We=function e(t,n){var i,s,o=t.__emotion_real===t,a=o&&t.__emotion_base||t;void 0!==n&&(i=n.label,s=n.target);var l=ze(t,n,o),c=l||Be(a),u=!c("as");return function(){var h=arguments,d=o&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==i&&d.push("label:"+i+";"),null==h[0]||void 0===h[0].raw)d.push.apply(d,h);else{var f=h[0];d.push(f[0]);for(var p=h.length,m=1;m<p;m++)d.push(h[m],f[m])}var g=Le((function(e,t,n){var i=u&&e.as||a,o="",h=[],f=e;if(null==e.theme){for(var p in f={},e)f[p]=e[p];f.theme=r.useContext(Me)}"string"===typeof e.className?o=function(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):n&&(r+=n+" ")})),r}(t.registered,h,e.className):null!=e.className&&(o=e.className+" ");var m=Pe(d.concat(h),t.registered,f);o+=t.key+"-"+m.name,void 0!==s&&(o+=" "+s);var g=u&&void 0===l?Be(i):c,y={};for(var v in e)u&&"as"===v||g(v)&&(y[v]=e[v]);return y.className=o,n&&(y.ref=n),r.createElement(r.Fragment,null,r.createElement(qe,{cache:t,serialized:m,isStringTag:"string"===typeof i}),r.createElement(i,y))}));return g.displayName=void 0!==i?i:"Styled("+("string"===typeof a?a:a.displayName||a.name||"Component")+")",g.defaultProps=t.defaultProps,g.__emotion_real=g,g.__emotion_base=a,g.__emotion_styles=d,g.__emotion_forwardProp=l,Object.defineProperty(g,"toString",{value:function(){return"."+s}}),g.withComponent=function(t,r){return e(t,y({},n,r,{shouldForwardProp:ze(g,r,!0)})).apply(void 0,d)},g}}.bind(null);["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){We[e]=We(e)}));const Ke=[];function He(e){return Ke[0]=e,Pe(Ke)}function Ge(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Qe(e){if(r.isValidElement(e)||!Ge(e))return e;const t={};return Object.keys(e).forEach((n=>{t[n]=Qe(e[n])})),t}function Ye(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0};const i=n.clone?u({},e):e;return Ge(e)&&Ge(t)&&Object.keys(t).forEach((s=>{r.isValidElement(t[s])?i[s]=t[s]:Ge(t[s])&&Object.prototype.hasOwnProperty.call(e,s)&&Ge(e[s])?i[s]=Ye(e[s],t[s],n):n.clone?i[s]=Ge(t[s])?Qe(t[s]):t[s]:i[s]=t[s]})),i}const Je=["values","unit","step"];function $e(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5}=e,i=h(e,Je),s=(e=>{const t=Object.keys(e).map((t=>({key:t,val:e[t]})))||[];return t.sort(((e,t)=>e.val-t.val)),t.reduce(((e,t)=>u(u({},e),{},{[t.key]:t.val})),{})})(t),o=Object.keys(s);function a(e){const r="number"===typeof t[e]?t[e]:e;return"@media (min-width:".concat(r).concat(n,")")}function l(e){const i="number"===typeof t[e]?t[e]:e;return"@media (max-width:".concat(i-r/100).concat(n,")")}function c(e,i){const s=o.indexOf(i);return"@media (min-width:".concat("number"===typeof t[e]?t[e]:e).concat(n,") and ")+"(max-width:".concat((-1!==s&&"number"===typeof t[o[s]]?t[o[s]]:i)-r/100).concat(n,")")}return u({keys:o,values:s,up:a,down:l,between:c,only:function(e){return o.indexOf(e)+1<o.length?c(e,o[o.indexOf(e)+1]):a(e)},not:function(e){const t=o.indexOf(e);return 0===t?a(o[1]):t===o.length-1?l(o[t]):c(e,o[o.indexOf(e)+1]).replace("@media","@media not all and")},unit:n},i)}const Xe={borderRadius:4},Ze={xs:0,sm:600,md:900,lg:1200,xl:1536},et={keys:["xs","sm","md","lg","xl"],up:e=>"@media (min-width:".concat(Ze[e],"px)")},tt={containerQueries:e=>({up:t=>{let n="number"===typeof t?t:Ze[t]||t;return"number"===typeof n&&(n="".concat(n,"px")),e?"@container ".concat(e," (min-width:").concat(n,")"):"@container (min-width:".concat(n,")")}})};function nt(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const e=r.breakpoints||et;return t.reduce(((r,i,s)=>(r[e.up(e.keys[s])]=n(t[s]),r)),{})}if("object"===typeof t){const e=r.breakpoints||et;return Object.keys(t).reduce(((i,s)=>{if(function(e,t){return"@"===t||t.startsWith("@")&&(e.some((e=>t.startsWith("@".concat(e))))||!!t.match(/^@\d/))}(e.keys,s)){const e=function(e,t){const n=t.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,r,i]=n,s=Number.isNaN(+r)?r||0:+r;return e.containerQueries(i).up(s)}(r.containerQueries?r:tt,s);e&&(i[e]=n(t[s],s))}else if(Object.keys(e.values||Ze).includes(s)){i[e.up(s)]=n(t[s],s)}else{const e=s;i[e]=t[e]}return i}),{})}return n(t)}function rt(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(null===(e=t.keys)||void 0===e?void 0:e.reduce(((e,n)=>(e[t.up(n)]={},e)),{}))||{}}function it(e,t){return e.reduce(((e,t)=>{const n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}function st(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){const n="vars.".concat(t).split(".").reduce(((e,t)=>e&&e[t]?e[t]:null),e);if(null!=n)return n}return t.split(".").reduce(((e,t)=>e&&null!=e[t]?e[t]:null),e)}function ot(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:st(e,n)||i,t&&(r=t(r,i,e)),r}const at=function(e){const{prop:t,cssProperty:n=e.prop,themeKey:r,transform:i}=e,s=e=>{if(null==e[t])return null;const s=e[t],o=st(e.theme,r)||{};return nt(e,s,(e=>{let r=ot(o,i,e);return e===r&&"string"===typeof e&&(r=ot(o,i,"".concat(t).concat("default"===e?"":m(e)),e)),!1===n?r:{[n]:r}}))};return s.propTypes={},s.filterProps=[t],s};const lt=function(e,t){return t?Ye(e,t,{clone:!1}):e};const ct={m:"margin",p:"padding"},ut={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},ht={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},dt=function(e){const t={};return n=>(void 0===t[n]&&(t[n]=e(n)),t[n])}((e=>{if(e.length>2){if(!ht[e])return[e];e=ht[e]}const[t,n]=e.split(""),r=ct[t],i=ut[n]||"";return Array.isArray(i)?i.map((e=>r+e)):[r+i]})),ft=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],pt=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],mt=[...ft,...pt];function gt(e,t,n,r){var i;const s=null!==(i=st(e,t,!0))&&void 0!==i?i:n;return"number"===typeof s||"string"===typeof s?e=>"string"===typeof e?e:"string"===typeof s?"calc(".concat(e," * ").concat(s,")"):s*e:Array.isArray(s)?e=>{if("string"===typeof e)return e;const t=Math.abs(e);const n=s[t];return e>=0?n:"number"===typeof n?-n:"-".concat(n)}:"function"===typeof s?s:()=>{}}function yt(e){return gt(e,"spacing",8)}function vt(e,t){return"string"===typeof t||null==t?t:e(t)}function _t(e,t,n,r){if(!t.includes(n))return null;const i=function(e,t){return n=>e.reduce(((e,r)=>(e[r]=vt(t,n),e)),{})}(dt(n),r);return nt(e,e[n],i)}function wt(e,t){const n=yt(e.theme);return Object.keys(e).map((r=>_t(e,t,r,n))).reduce(lt,{})}function bt(e){return wt(e,ft)}function St(e){return wt(e,pt)}function Et(e){return wt(e,mt)}bt.propTypes={},bt.filterProps=ft,St.propTypes={},St.filterProps=pt,Et.propTypes={},Et.filterProps=mt;function Ct(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yt({spacing:e});if(e.mui)return e;const n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0===n.length?[1]:n).map((e=>{const n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}const kt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>(t.filterProps.forEach((n=>{e[n]=t})),e)),{}),i=e=>Object.keys(e).reduce(((t,n)=>r[n]?lt(t,r[n](e)):t),{});return i.propTypes={},i.filterProps=t.reduce(((e,t)=>e.concat(t.filterProps)),[]),i};function It(e){return"number"!==typeof e?e:"".concat(e,"px solid")}function Tt(e,t){return at({prop:e,themeKey:"borders",transform:t})}const xt=Tt("border",It),At=Tt("borderTop",It),Nt=Tt("borderRight",It),Pt=Tt("borderBottom",It),Rt=Tt("borderLeft",It),Ot=Tt("borderColor"),Dt=Tt("borderTopColor"),Lt=Tt("borderRightColor"),Mt=Tt("borderBottomColor"),Ft=Tt("borderLeftColor"),Ut=Tt("outline",It),jt=Tt("outlineColor"),Vt=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=gt(e.theme,"shape.borderRadius",4),n=e=>({borderRadius:vt(t,e)});return nt(e,e.borderRadius,n)}return null};Vt.propTypes={},Vt.filterProps=["borderRadius"];kt(xt,At,Nt,Pt,Rt,Ot,Dt,Lt,Mt,Ft,Vt,Ut,jt);const Bt=e=>{if(void 0!==e.gap&&null!==e.gap){const t=gt(e.theme,"spacing",8),n=e=>({gap:vt(t,e)});return nt(e,e.gap,n)}return null};Bt.propTypes={},Bt.filterProps=["gap"];const zt=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=gt(e.theme,"spacing",8),n=e=>({columnGap:vt(t,e)});return nt(e,e.columnGap,n)}return null};zt.propTypes={},zt.filterProps=["columnGap"];const qt=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=gt(e.theme,"spacing",8),n=e=>({rowGap:vt(t,e)});return nt(e,e.rowGap,n)}return null};qt.propTypes={},qt.filterProps=["rowGap"];kt(Bt,zt,qt,at({prop:"gridColumn"}),at({prop:"gridRow"}),at({prop:"gridAutoFlow"}),at({prop:"gridAutoColumns"}),at({prop:"gridAutoRows"}),at({prop:"gridTemplateColumns"}),at({prop:"gridTemplateRows"}),at({prop:"gridTemplateAreas"}),at({prop:"gridArea"}));function Wt(e,t){return"grey"===t?t:e}kt(at({prop:"color",themeKey:"palette",transform:Wt}),at({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Wt}),at({prop:"backgroundColor",themeKey:"palette",transform:Wt}));function Kt(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}const Ht=at({prop:"width",transform:Kt}),Gt=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{var n,r;const i=(null===(n=e.theme)||void 0===n||null===(n=n.breakpoints)||void 0===n||null===(n=n.values)||void 0===n?void 0:n[t])||Ze[t];return i?"px"!==(null===(r=e.theme)||void 0===r||null===(r=r.breakpoints)||void 0===r?void 0:r.unit)?{maxWidth:"".concat(i).concat(e.theme.breakpoints.unit)}:{maxWidth:i}:{maxWidth:Kt(t)}};return nt(e,e.maxWidth,t)}return null};Gt.filterProps=["maxWidth"];const Qt=at({prop:"minWidth",transform:Kt}),Yt=at({prop:"height",transform:Kt}),Jt=at({prop:"maxHeight",transform:Kt}),$t=at({prop:"minHeight",transform:Kt}),Xt=(at({prop:"size",cssProperty:"width",transform:Kt}),at({prop:"size",cssProperty:"height",transform:Kt}),kt(Ht,Gt,Qt,Yt,Jt,$t,at({prop:"boxSizing"})),{border:{themeKey:"borders",transform:It},borderTop:{themeKey:"borders",transform:It},borderRight:{themeKey:"borders",transform:It},borderBottom:{themeKey:"borders",transform:It},borderLeft:{themeKey:"borders",transform:It},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:It},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Vt},color:{themeKey:"palette",transform:Wt},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Wt},backgroundColor:{themeKey:"palette",transform:Wt},p:{style:St},pt:{style:St},pr:{style:St},pb:{style:St},pl:{style:St},px:{style:St},py:{style:St},padding:{style:St},paddingTop:{style:St},paddingRight:{style:St},paddingBottom:{style:St},paddingLeft:{style:St},paddingX:{style:St},paddingY:{style:St},paddingInline:{style:St},paddingInlineStart:{style:St},paddingInlineEnd:{style:St},paddingBlock:{style:St},paddingBlockStart:{style:St},paddingBlockEnd:{style:St},m:{style:bt},mt:{style:bt},mr:{style:bt},mb:{style:bt},ml:{style:bt},mx:{style:bt},my:{style:bt},margin:{style:bt},marginTop:{style:bt},marginRight:{style:bt},marginBottom:{style:bt},marginLeft:{style:bt},marginX:{style:bt},marginY:{style:bt},marginInline:{style:bt},marginInlineStart:{style:bt},marginInlineEnd:{style:bt},marginBlock:{style:bt},marginBlockStart:{style:bt},marginBlockEnd:{style:bt},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Bt},rowGap:{style:qt},columnGap:{style:zt},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Kt},maxWidth:{style:Gt},minWidth:{transform:Kt},height:{transform:Kt},maxHeight:{transform:Kt},minHeight:{transform:Kt},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}});const Zt=function(){function e(e,t,n,r){const i={[e]:t,theme:n},s=r[e];if(!s)return{[e]:t};const{cssProperty:o=e,themeKey:a,transform:l,style:c}=s;if(null==t)return null;if("typography"===a&&"inherit"===t)return{[e]:t};const u=st(n,a)||{};if(c)return c(i);return nt(i,t,(t=>{let n=ot(u,l,t);return t===n&&"string"===typeof t&&(n=ot(u,l,"".concat(e).concat("default"===t?"":m(t)),t)),!1===o?n:{[o]:n}}))}return function t(n){var r;const{sx:i,theme:s={}}=n||{};if(!i)return null;const o=null!==(r=s.unstable_sxConfig)&&void 0!==r?r:Xt;function a(n){let r=n;if("function"===typeof n)r=n(s);else if("object"!==typeof n)return n;if(!r)return null;const i=rt(s.breakpoints),a=Object.keys(i);let l=i;return Object.keys(r).forEach((n=>{const i=function(e,t){return"function"===typeof e?e(t):e}(r[n],s);if(null!==i&&void 0!==i)if("object"===typeof i)if(o[n])l=lt(l,e(n,i,s,o));else{const e=nt({theme:s},i,(e=>({[n]:e})));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>e.concat(Object.keys(t))),[]),i=new Set(r);return t.every((e=>i.size===Object.keys(e).length))}(e,i)?l=lt(l,e):l[n]=t({sx:i,theme:s})}else l=lt(l,e(n,i,s,o))})),function(e,t){if(!e.containerQueries)return t;const n=Object.keys(t).filter((e=>e.startsWith("@container"))).sort(((e,t)=>{var n,r;const i=/min-width:\s*([0-9.]+)/;return+((null===(n=e.match(i))||void 0===n?void 0:n[1])||0)-+((null===(r=t.match(i))||void 0===r?void 0:r[1])||0)}));return n.length?n.reduce(((e,n)=>{const r=t[n];return delete e[n],e[n]=r,e}),u({},t)):t}(s,it(a,l))}return Array.isArray(i)?i.map(a):a(i)}}();Zt.filterProps=["sx"];const en=Zt;function tn(e,t){const n=this;if(n.vars){var r;if(null===(r=n.colorSchemes)||void 0===r||!r[e]||"function"!==typeof n.getColorSchemeSelector)return{};let i=n.getColorSchemeSelector(e);return"&"===i?t:((i.includes("data-")||i.includes("."))&&(i="*:where(".concat(i.replace(/\s*&$/,""),") &")),{[i]:t})}return n.palette.mode===e?t:{}}const nn=["breakpoints","palette","spacing","shape"];const rn=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t={},palette:n={},spacing:r,shape:i={}}=e,s=h(e,nn),o=$e(t),a=Ct(r);let l=Ye({breakpoints:o,direction:"ltr",components:{},palette:u({mode:"light"},n),spacing:a,shape:u(u({},Xe),i)},s);l=function(e){const t=(e,t)=>e.replace("@media",t?"@container ".concat(t):"@container");function n(n,r){n.up=function(){return t(e.breakpoints.up(...arguments),r)},n.down=function(){return t(e.breakpoints.down(...arguments),r)},n.between=function(){return t(e.breakpoints.between(...arguments),r)},n.only=function(){return t(e.breakpoints.only(...arguments),r)},n.not=function(){const n=t(e.breakpoints.not(...arguments),r);return n.includes("not all and")?n.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):n}}const r={},i=e=>(n(r,e),r);return n(i),u(u({},e),{},{containerQueries:i})}(l),l.applyStyles=tn;for(var c=arguments.length,d=new Array(c>1?c-1:0),f=1;f<c;f++)d[f-1]=arguments[f];return l=d.reduce(((e,t)=>Ye(e,t)),l),l.unstable_sxConfig=u(u({},Xt),null===s||void 0===s?void 0:s.unstable_sxConfig),l.unstable_sx=function(e){return en({sx:e,theme:this})},l},sn=["variants"];function on(e){const{variants:t}=e,n=h(e,sn),r={variants:t,style:He(n),isProcessed:!0};return r.style===n||t&&t.forEach((e=>{"function"!==typeof e.style&&(e.style=He(e.style))})),r}const an=["variants"],ln=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],cn=rn();function un(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}function hn(e){return e?(t,n)=>n[e]:null}function dn(e,t){const n="function"===typeof t?t(e):t;if(Array.isArray(n))return n.flatMap((t=>dn(e,t)));if(Array.isArray(null===n||void 0===n?void 0:n.variants)){let t;if(n.isProcessed)t=n.style;else{const{variants:e}=n;t=h(n,an)}return fn(e,n.variants,[t])}return null!==n&&void 0!==n&&n.isProcessed?n.style:n}function fn(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e:for(let a=0;a<t.length;a+=1){const l=t[a];var i,s;if("function"===typeof l.props){if(null!==(i=n)&&void 0!==i||(n=u(u(u({},e),e.ownerState),{},{ownerState:e.ownerState})),!l.props(n))continue}else for(const t in l.props){var o;if(e[t]!==l.props[t]&&(null===(o=e.ownerState)||void 0===o?void 0:o[t])!==l.props[t])continue e}if("function"===typeof l.style)null!==(s=n)&&void 0!==s||(n=u(u(u({},e),e.ownerState),{},{ownerState:e.ownerState})),r.push(l.style(n));else r.push(l.style)}return r}function pn(e,t){}function mn(e){return e?e.charAt(0).toLowerCase()+e.slice(1):e}const gn=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MIN_SAFE_INTEGER,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;return Math.max(t,Math.min(e,n))};function yn(e){return gn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1)}function vn(e){if(e.type)return e;if("#"===e.charAt(0))return vn(function(e){e=e.slice(1);const t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map((e=>e+e))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", "),")"):""}(e));const t=e.indexOf("("),n=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(p(9,e));let r,i=e.substring(t+1,e.length-1);if("color"===n){if(i=i.split(" "),r=i.shift(),4===i.length&&"/"===i[3].charAt(0)&&(i[3]=i[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(r))throw new Error(p(10,r))}else i=i.split(",");return i=i.map((e=>parseFloat(e))),{type:n,values:i,colorSpace:r}}const _n=(e,t)=>{try{return(e=>{const t=vn(e);return t.values.slice(0,3).map(((e,n)=>t.type.includes("hsl")&&0!==n?"".concat(e,"%"):e)).join(" ")})(e)}catch(BI){return e}};function wn(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return t.includes("rgb")?r=r.map(((e,t)=>t<3?parseInt(e,10):e)):t.includes("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=t.includes("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(t,"(").concat(r,")")}function bn(e){e=vn(e);const{values:t}=e,n=t[0],r=t[1]/100,i=t[2]/100,s=r*Math.min(i,1-i),o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-s*Math.max(Math.min(t-3,9-t,1),-1)};let a="rgb";const l=[Math.round(255*o(0)),Math.round(255*o(8)),Math.round(255*o(4))];return"hsla"===e.type&&(a+="a",l.push(t[3])),wn({type:a,values:l})}function Sn(e){let t="hsl"===(e=vn(e)).type||"hsla"===e.type?vn(bn(e)).values:e.values;return t=t.map((t=>("color"!==e.type&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4))),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function En(e,t,n){try{return function(e,t){return e=vn(e),t=yn(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]="/".concat(t):e.values[3]=t,wn(e)}(e,t)}catch(BI){return e}}function Cn(e,t){if(e=vn(e),t=yn(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return wn(e)}function kn(e,t,n){try{return Cn(e,t)}catch(BI){return e}}function In(e,t){if(e=vn(e),t=yn(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return wn(e)}function Tn(e,t,n){try{return In(e,t)}catch(BI){return e}}function xn(e,t,n){try{return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;return Sn(e)>.5?Cn(e,t):In(e,t)}(e,t)}catch(BI){return e}}const An={black:"#000",white:"#fff"},Nn={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Pn={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Rn={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},On={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Dn={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Ln={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Mn={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Fn=["mode","contrastThreshold","tonalOffset"];function Un(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:An.white,default:An.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const jn=Un();function Vn(){return{text:{primary:An.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:An.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const Bn=Vn();function zn(e,t,n,r){const i=r.light||r,s=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=In(e.main,i):"dark"===t&&(e.dark=Cn(e.main,s)))}function qn(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:r=.2}=e,i=h(e,Fn),s=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Dn[200],light:Dn[50],dark:Dn[400]}:{main:Dn[700],light:Dn[400],dark:Dn[800]}}(t),o=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Pn[200],light:Pn[50],dark:Pn[400]}:{main:Pn[500],light:Pn[300],dark:Pn[700]}}(t),a=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Rn[500],light:Rn[300],dark:Rn[700]}:{main:Rn[700],light:Rn[400],dark:Rn[800]}}(t),l=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Ln[400],light:Ln[300],dark:Ln[700]}:{main:Ln[700],light:Ln[500],dark:Ln[900]}}(t),c=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Mn[400],light:Mn[300],dark:Mn[700]}:{main:Mn[800],light:Mn[500],dark:Mn[900]}}(t),d=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:On[400],light:On[300],dark:On[700]}:{main:"#ed6c02",light:On[500],dark:On[900]}}(t);function f(e){const t=function(e,t){const n=Sn(e),r=Sn(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(e,Bn.text.primary)>=n?Bn.text.primary:jn.text.primary;return t}const m=e=>{let{color:t,name:n,mainShade:i=500,lightShade:s=300,darkShade:o=700}=e;if(t=u({},t),!t.main&&t[i]&&(t.main=t[i]),!t.hasOwnProperty("main"))throw new Error(p(11,n?" (".concat(n,")"):"",i));if("string"!==typeof t.main)throw new Error(p(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return zn(t,"light",s,r),zn(t,"dark",o,r),t.contrastText||(t.contrastText=f(t.main)),t};let g;"light"===t?g=Un():"dark"===t&&(g=Vn());return Ye(u({common:u({},An),mode:t,primary:m({color:s,name:"primary"}),secondary:m({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:m({color:a,name:"error"}),warning:m({color:d,name:"warning"}),info:m({color:l,name:"info"}),success:m({color:c,name:"success"}),grey:Nn,contrastThreshold:n,getContrastText:f,augmentColor:m,tonalOffset:r},g),i)}function Wn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";function t(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];if(!r.length)return"";const s=r[0];return"string"!==typeof s||s.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?", ".concat(s):", var(--".concat(e?"".concat(e,"-"):"").concat(s).concat(t(...r.slice(1)),")")}return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return"var(--".concat(e?"".concat(e,"-"):"").concat(n).concat(t(...i),")")}}function Kn(e){const t={};return Object.entries(e).forEach((e=>{const[n,r]=e;"object"===typeof r&&(t[n]="".concat(r.fontStyle?"".concat(r.fontStyle," "):"").concat(r.fontVariant?"".concat(r.fontVariant," "):"").concat(r.fontWeight?"".concat(r.fontWeight," "):"").concat(r.fontStretch?"".concat(r.fontStretch," "):"").concat(r.fontSize||"").concat(r.lineHeight?"/".concat(r.lineHeight," "):"").concat(r.fontFamily||""))})),t}const Hn=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=e;t.forEach(((e,s)=>{s===t.length-1?Array.isArray(i)?i[Number(e)]=n:i&&"object"===typeof i&&(i[e]=n):i&&"object"===typeof i&&(i[e]||(i[e]=r.includes(e)?[]:{}),i=i[e])}))};function Gn(e,t){const{prefix:n,shouldSkipGeneratingVar:r}=t||{},i={},s={},o={};var a,l;return a=(e,t,a)=>{if(("string"===typeof t||"number"===typeof t)&&(!r||!r(e,t))){const r="--".concat(n?"".concat(n,"-"):"").concat(e.join("-")),l=((e,t)=>"number"===typeof t?["lineHeight","fontWeight","opacity","zIndex"].some((t=>e.includes(t)))||e[e.length-1].toLowerCase().includes("opacity")?t:"".concat(t,"px"):t)(e,t);Object.assign(i,{[r]:l}),Hn(s,e,"var(".concat(r,")"),a),Hn(o,e,"var(".concat(r,", ").concat(l,")"),a)}},l=e=>"vars"===e[0],function e(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];Object.entries(t).forEach((t=>{let[i,s]=t;(!l||l&&!l([...n,i]))&&void 0!==s&&null!==s&&("object"===typeof s&&Object.keys(s).length>0?e(s,[...n,i],Array.isArray(s)?[...r,i]:r):a([...n,i],s,r))}))}(e),{css:i,vars:s,varsWithDefaults:o}}const Qn=["colorSchemes","components","defaultColorScheme"];const Yn=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{getSelector:n=_,disableCssColorScheme:r,colorSchemeSelector:i}=t,{colorSchemes:s={},components:o,defaultColorScheme:l="light"}=e,c=h(e,Qn),{vars:d,css:f,varsWithDefaults:p}=Gn(c,t);let m=p;const g={},{[l]:y}=s,v=h(s,[l].map(a));if(Object.entries(v||{}).forEach((e=>{let[n,r]=e;const{vars:i,css:s,varsWithDefaults:o}=Gn(r,t);m=Ye(m,o),g[n]={css:s,vars:i}})),y){const{css:e,vars:n,varsWithDefaults:r}=Gn(y,t);m=Ye(m,r),g[l]={css:e,vars:n}}function _(t,n){let r=i;if("class"===i&&(r=".%s"),"data"===i&&(r="[data-%s]"),null!==i&&void 0!==i&&i.startsWith("data-")&&!i.includes("%s")&&(r="[".concat(i,'="%s"]')),t){if("media"===r){var o;if(e.defaultColorScheme===t)return":root";const r=(null===(o=s[t])||void 0===o||null===(o=o.palette)||void 0===o?void 0:o.mode)||t;return{["@media (prefers-color-scheme: ".concat(r,")")]:{":root":n}}}if(r)return e.defaultColorScheme===t?":root, ".concat(r.replace("%s",String(t))):r.replace("%s",String(t))}return":root"}return{vars:m,generateThemeVars:()=>{let e=u({},d);return Object.entries(g).forEach((t=>{let[,{vars:n}]=t;e=Ye(e,n)})),e},generateStyleSheets:()=>{const t=[],i=e.defaultColorScheme||"light";function o(e,n){Object.keys(n).length&&t.push("string"===typeof e?{[e]:u({},n)}:e)}o(n(void 0,u({},f)),f);const{[i]:l}=g,c=h(g,[i].map(a));if(l){var d;const{css:e}=l,t=null===(d=s[i])||void 0===d||null===(d=d.palette)||void 0===d?void 0:d.mode,a=u(!r&&t?{colorScheme:t}:{},e);o(n(i,u({},a)),a)}return Object.entries(c).forEach((e=>{var t;let[i,{css:a}]=e;const l=null===(t=s[i])||void 0===t||null===(t=t.palette)||void 0===t?void 0:t.mode,c=u(!r&&l?{colorScheme:l}:{},a);o(n(i,u({},c)),c)})),t}}};function Jn(e,t){return u({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}const $n=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];const Xn={textTransform:"uppercase"},Zn='"Roboto", "Helvetica", "Arial", sans-serif';function er(e,t){const n="function"===typeof t?t(e):t,{fontFamily:r=Zn,fontSize:i=14,fontWeightLight:s=300,fontWeightRegular:o=400,fontWeightMedium:a=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:d,pxToRem:f}=n,p=h(n,$n);const m=i/14,g=f||(e=>"".concat(e/c*m,"rem")),y=(e,t,n,i,s)=>{return u(u(u({fontFamily:r,fontWeight:e,fontSize:g(t),lineHeight:n},r===Zn?{letterSpacing:"".concat((o=i/t,Math.round(1e5*o)/1e5),"em")}:{}),s),d);var o},v={h1:y(s,96,1.167,-1.5),h2:y(s,60,1.2,-.5),h3:y(o,48,1.167,0),h4:y(o,34,1.235,.25),h5:y(o,24,1.334,0),h6:y(a,20,1.6,.15),subtitle1:y(o,16,1.75,.15),subtitle2:y(a,14,1.57,.1),body1:y(o,16,1.5,.15),body2:y(o,14,1.43,.15),button:y(a,14,1.75,.4,Xn),caption:y(o,12,1.66,.4),overline:y(o,12,2.66,1,Xn),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Ye(u({htmlFontSize:c,pxToRem:g,fontFamily:r,fontSize:i,fontWeightLight:s,fontWeightRegular:o,fontWeightMedium:a,fontWeightBold:l},v),p,{clone:!1})}function tr(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}const nr=["none",tr(0,2,1,-1,0,1,1,0,0,1,3,0),tr(0,3,1,-2,0,2,2,0,0,1,5,0),tr(0,3,3,-2,0,3,4,0,0,1,8,0),tr(0,2,4,-1,0,4,5,0,0,1,10,0),tr(0,3,5,-1,0,5,8,0,0,1,14,0),tr(0,3,5,-1,0,6,10,0,0,1,18,0),tr(0,4,5,-2,0,7,10,1,0,2,16,1),tr(0,5,5,-3,0,8,10,1,0,3,14,2),tr(0,5,6,-3,0,9,12,1,0,3,16,2),tr(0,6,6,-3,0,10,14,1,0,4,18,3),tr(0,6,7,-4,0,11,15,1,0,4,20,3),tr(0,7,8,-4,0,12,17,2,0,5,22,4),tr(0,7,8,-4,0,13,19,2,0,5,24,4),tr(0,7,9,-4,0,14,21,2,0,5,26,4),tr(0,8,9,-5,0,15,22,2,0,6,28,5),tr(0,8,10,-5,0,16,24,2,0,6,30,5),tr(0,8,11,-5,0,17,26,2,0,6,32,5),tr(0,9,11,-5,0,18,28,2,0,7,34,6),tr(0,9,12,-6,0,19,29,2,0,7,36,6),tr(0,10,13,-6,0,20,31,3,0,8,38,7),tr(0,10,13,-6,0,21,33,3,0,8,40,7),tr(0,10,14,-6,0,22,35,3,0,8,42,7),tr(0,11,14,-7,0,23,36,3,0,9,44,8),tr(0,11,15,-7,0,24,38,3,0,9,46,8)],rr=["duration","easing","delay"],ir={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},sr={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function or(e){return"".concat(Math.round(e),"ms")}function ar(e){if(!e)return 0;const t=e/36;return Math.min(Math.round(10*(4+15*t**.25+t/5)),3e3)}function lr(e){const t=u(u({},ir),e.easing),n=u(u({},sr),e.duration);return u(u({getAutoHeightDuration:ar,create:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:i=n.standard,easing:s=t.easeInOut,delay:o=0}=r;h(r,rr);return(Array.isArray(e)?e:[e]).map((e=>"".concat(e," ").concat("string"===typeof i?i:or(i)," ").concat(s," ").concat("string"===typeof o?o:or(o)))).join(",")}},e),{},{easing:t,duration:n})}const cr={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function ur(){const e=u({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return function e(t){const n=Object.entries(t);for(let i=0;i<n.length;i++){const[s,o]=n[i];!Ge(r=o)&&"undefined"!==typeof r&&"string"!==typeof r&&"boolean"!==typeof r&&"number"!==typeof r&&!Array.isArray(r)||s.startsWith("unstable_")?delete t[s]:Ge(o)&&(t[s]=u({},o),e(t[s]))}var r}(e),"import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';\n\nconst theme = ".concat(JSON.stringify(e,null,2),";\n\ntheme.breakpoints = createBreakpoints(theme.breakpoints || {});\ntheme.transitions = createTransitions(theme.transitions || {});\n\nexport default theme;")}const hr=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function dr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t,mixins:n={},spacing:r,palette:i={},transitions:s={},typography:o={},shape:a}=e,l=h(e,hr);if(e.vars)throw new Error(p(20));const c=qn(i),d=rn(e);let f=Ye(d,{mixins:Jn(d.breakpoints,n),palette:c,shadows:nr.slice(),typography:er(c,o),transitions:lr(s),zIndex:u({},cr)});f=Ye(f,l);for(var m=arguments.length,g=new Array(m>1?m-1:0),y=1;y<m;y++)g[y-1]=arguments[y];return f=g.reduce(((e,t)=>Ye(e,t)),f),f.unstable_sxConfig=u(u({},Xt),null===l||void 0===l?void 0:l.unstable_sxConfig),f.unstable_sx=function(e){return en({sx:e,theme:this})},f.toRuntimeSource=ur,f}const fr=dr;const pr=["palette","opacity","overlays"],mr=[...Array(25)].map(((e,t)=>{if(0===t)return"none";const n=function(e){let t;return t=e<1?5.11916*e**2:4.5*Math.log(e+1)+2,Math.round(10*t)/1e3}(t);return"linear-gradient(rgba(255 255 255 / ".concat(n,"), rgba(255 255 255 / ").concat(n,"))")}));function gr(e){return{inputPlaceholder:"dark"===e?.5:.42,inputUnderline:"dark"===e?.7:.42,switchTrackDisabled:"dark"===e?.2:.12,switchTrack:"dark"===e?.3:.38}}function yr(e){return"dark"===e?mr:[]}function vr(e){var t;return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||"palette"===e[0]&&!(null===(t=e[1])||void 0===t||!t.match(/(mode|contrastThreshold|tonalOffset)/))}const _r=e=>[...[...Array(25)].map(((t,n)=>"--".concat(e?"".concat(e,"-"):"","overlays-").concat(n))),"--".concat(e?"".concat(e,"-"):"","palette-AppBar-darkBg"),"--".concat(e?"".concat(e,"-"):"","palette-AppBar-darkColor")],wr=e=>(t,n)=>{const r=e.rootSelector||":root",i=e.colorSchemeSelector;let s=i;if("class"===i&&(s=".%s"),"data"===i&&(s="[data-%s]"),null!==i&&void 0!==i&&i.startsWith("data-")&&!i.includes("%s")&&(s="[".concat(i,'="%s"]')),e.defaultColorScheme===t){if("dark"===t){const i={};return _r(e.cssVarPrefix).forEach((e=>{i[e]=n[e],delete n[e]})),"media"===s?{[r]:n,"@media (prefers-color-scheme: dark)":{[r]:i}}:s?{[s.replace("%s",t)]:i,["".concat(r,", ").concat(s.replace("%s",t))]:n}:{[r]:u(u({},n),i)}}if(s&&"media"!==s)return"".concat(r,", ").concat(s.replace("%s",String(t)))}else if(t){if("media"===s)return{["@media (prefers-color-scheme: ".concat(String(t),")")]:{[r]:n}};if(s)return s.replace("%s",String(t))}return r},br=["palette"],Sr=["colorSchemes","defaultColorScheme","disableCssColorScheme","cssVarPrefix","shouldSkipGeneratingVar","colorSchemeSelector","rootSelector"];function Er(e,t,n){!e[t]&&n&&(e[t]=n)}function Cr(e){return"string"===typeof e&&e.startsWith("hsl")?bn(e):e}function kr(e,t){"".concat(t,"Channel")in e||(e["".concat(t,"Channel")]=_n(Cr(e[t]),("MUI: Can't create `palette.".concat(t,"Channel` because `palette.").concat(t,"` is not one of these formats: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color()."),"To suppress this warning, you need to explicitly provide the `palette.".concat(t,'Channel` as a string (in rgb format, for example "12 12 12") or undefined if you want to remove the channel token.'))))}const Ir=e=>{try{return e()}catch(BI){}};function Tr(e,t,n,r){var i,s,o;if(!t)return;t=!0===t?{}:t;const a="dark"===r?"dark":"light";var l;if(!n)return void(e[r]=function(e){const{palette:t={mode:"light"},opacity:n,overlays:r}=e,i=h(e,pr),s=qn(t);return u({palette:s,opacity:u(u({},gr(s.mode)),n),overlays:r||yr(s.mode)},i)}(u(u({},t),{},{palette:u({mode:a},null===(l=t)||void 0===l?void 0:l.palette)})));const c=fr(u(u({},n),{},{palette:u({mode:a},null===(i=t)||void 0===i?void 0:i.palette)})),{palette:d}=c,f=h(c,br);return e[r]=u(u({},t),{},{palette:d,opacity:u(u({},gr(a)),null===(s=t)||void 0===s?void 0:s.opacity),overlays:(null===(o=t)||void 0===o?void 0:o.overlays)||yr(a)}),f}function xr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{colorSchemes:t={light:!0},defaultColorScheme:n,disableCssColorScheme:r=!1,cssVarPrefix:i="mui",shouldSkipGeneratingVar:s=vr,colorSchemeSelector:o=(t.light&&t.dark?"media":void 0),rootSelector:l=":root"}=e,c=h(e,Sr),d=Object.keys(t)[0],f=n||(t.light&&"light"!==d?"light":d),m=function(){return Wn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mui")}(i),{[f]:g,light:y,dark:v}=t,_=u({},h(t,[f,"light","dark"].map(a)));let w=g;if(("dark"===f&&!("dark"in t)||"light"===f&&!("light"in t))&&(w=!0),!w)throw new Error(p(21,f));const b=Tr(_,w,c,f);y&&!_.light&&Tr(_,y,void 0,"light"),v&&!_.dark&&Tr(_,v,void 0,"dark");let S=u(u({defaultColorScheme:f},b),{},{cssVarPrefix:i,colorSchemeSelector:o,rootSelector:l,getCssVar:m,colorSchemes:_,font:u(u({},Kn(b.typography)),b.font),spacing:(E=c.spacing,"number"===typeof E?"".concat(E,"px"):"string"===typeof E||"function"===typeof E||Array.isArray(E)?E:"8px")});var E;Object.keys(S.colorSchemes).forEach((e=>{const t=S.colorSchemes[e].palette,n=e=>{const n=e.split("-"),r=n[1],i=n[2];return m(e,t[r][i])};var r;if("light"===t.mode&&(Er(t.common,"background","#fff"),Er(t.common,"onBackground","#000")),"dark"===t.mode&&(Er(t.common,"background","#000"),Er(t.common,"onBackground","#fff")),r=t,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"].forEach((e=>{r[e]||(r[e]={})})),"light"===t.mode){Er(t.Alert,"errorColor",kn(t.error.light,.6)),Er(t.Alert,"infoColor",kn(t.info.light,.6)),Er(t.Alert,"successColor",kn(t.success.light,.6)),Er(t.Alert,"warningColor",kn(t.warning.light,.6)),Er(t.Alert,"errorFilledBg",n("palette-error-main")),Er(t.Alert,"infoFilledBg",n("palette-info-main")),Er(t.Alert,"successFilledBg",n("palette-success-main")),Er(t.Alert,"warningFilledBg",n("palette-warning-main")),Er(t.Alert,"errorFilledColor",Ir((()=>t.getContrastText(t.error.main)))),Er(t.Alert,"infoFilledColor",Ir((()=>t.getContrastText(t.info.main)))),Er(t.Alert,"successFilledColor",Ir((()=>t.getContrastText(t.success.main)))),Er(t.Alert,"warningFilledColor",Ir((()=>t.getContrastText(t.warning.main)))),Er(t.Alert,"errorStandardBg",Tn(t.error.light,.9)),Er(t.Alert,"infoStandardBg",Tn(t.info.light,.9)),Er(t.Alert,"successStandardBg",Tn(t.success.light,.9)),Er(t.Alert,"warningStandardBg",Tn(t.warning.light,.9)),Er(t.Alert,"errorIconColor",n("palette-error-main")),Er(t.Alert,"infoIconColor",n("palette-info-main")),Er(t.Alert,"successIconColor",n("palette-success-main")),Er(t.Alert,"warningIconColor",n("palette-warning-main")),Er(t.AppBar,"defaultBg",n("palette-grey-100")),Er(t.Avatar,"defaultBg",n("palette-grey-400")),Er(t.Button,"inheritContainedBg",n("palette-grey-300")),Er(t.Button,"inheritContainedHoverBg",n("palette-grey-A100")),Er(t.Chip,"defaultBorder",n("palette-grey-400")),Er(t.Chip,"defaultAvatarColor",n("palette-grey-700")),Er(t.Chip,"defaultIconColor",n("palette-grey-700")),Er(t.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),Er(t.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),Er(t.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),Er(t.LinearProgress,"primaryBg",Tn(t.primary.main,.62)),Er(t.LinearProgress,"secondaryBg",Tn(t.secondary.main,.62)),Er(t.LinearProgress,"errorBg",Tn(t.error.main,.62)),Er(t.LinearProgress,"infoBg",Tn(t.info.main,.62)),Er(t.LinearProgress,"successBg",Tn(t.success.main,.62)),Er(t.LinearProgress,"warningBg",Tn(t.warning.main,.62)),Er(t.Skeleton,"bg","rgba(".concat(n("palette-text-primaryChannel")," / 0.11)")),Er(t.Slider,"primaryTrack",Tn(t.primary.main,.62)),Er(t.Slider,"secondaryTrack",Tn(t.secondary.main,.62)),Er(t.Slider,"errorTrack",Tn(t.error.main,.62)),Er(t.Slider,"infoTrack",Tn(t.info.main,.62)),Er(t.Slider,"successTrack",Tn(t.success.main,.62)),Er(t.Slider,"warningTrack",Tn(t.warning.main,.62));const e=xn(t.background.default,.8);Er(t.SnackbarContent,"bg",e),Er(t.SnackbarContent,"color",Ir((()=>t.getContrastText(e)))),Er(t.SpeedDialAction,"fabHoverBg",xn(t.background.paper,.15)),Er(t.StepConnector,"border",n("palette-grey-400")),Er(t.StepContent,"border",n("palette-grey-400")),Er(t.Switch,"defaultColor",n("palette-common-white")),Er(t.Switch,"defaultDisabledColor",n("palette-grey-100")),Er(t.Switch,"primaryDisabledColor",Tn(t.primary.main,.62)),Er(t.Switch,"secondaryDisabledColor",Tn(t.secondary.main,.62)),Er(t.Switch,"errorDisabledColor",Tn(t.error.main,.62)),Er(t.Switch,"infoDisabledColor",Tn(t.info.main,.62)),Er(t.Switch,"successDisabledColor",Tn(t.success.main,.62)),Er(t.Switch,"warningDisabledColor",Tn(t.warning.main,.62)),Er(t.TableCell,"border",Tn(En(t.divider,1),.88)),Er(t.Tooltip,"bg",En(t.grey[700],.92))}if("dark"===t.mode){Er(t.Alert,"errorColor",Tn(t.error.light,.6)),Er(t.Alert,"infoColor",Tn(t.info.light,.6)),Er(t.Alert,"successColor",Tn(t.success.light,.6)),Er(t.Alert,"warningColor",Tn(t.warning.light,.6)),Er(t.Alert,"errorFilledBg",n("palette-error-dark")),Er(t.Alert,"infoFilledBg",n("palette-info-dark")),Er(t.Alert,"successFilledBg",n("palette-success-dark")),Er(t.Alert,"warningFilledBg",n("palette-warning-dark")),Er(t.Alert,"errorFilledColor",Ir((()=>t.getContrastText(t.error.dark)))),Er(t.Alert,"infoFilledColor",Ir((()=>t.getContrastText(t.info.dark)))),Er(t.Alert,"successFilledColor",Ir((()=>t.getContrastText(t.success.dark)))),Er(t.Alert,"warningFilledColor",Ir((()=>t.getContrastText(t.warning.dark)))),Er(t.Alert,"errorStandardBg",kn(t.error.light,.9)),Er(t.Alert,"infoStandardBg",kn(t.info.light,.9)),Er(t.Alert,"successStandardBg",kn(t.success.light,.9)),Er(t.Alert,"warningStandardBg",kn(t.warning.light,.9)),Er(t.Alert,"errorIconColor",n("palette-error-main")),Er(t.Alert,"infoIconColor",n("palette-info-main")),Er(t.Alert,"successIconColor",n("palette-success-main")),Er(t.Alert,"warningIconColor",n("palette-warning-main")),Er(t.AppBar,"defaultBg",n("palette-grey-900")),Er(t.AppBar,"darkBg",n("palette-background-paper")),Er(t.AppBar,"darkColor",n("palette-text-primary")),Er(t.Avatar,"defaultBg",n("palette-grey-600")),Er(t.Button,"inheritContainedBg",n("palette-grey-800")),Er(t.Button,"inheritContainedHoverBg",n("palette-grey-700")),Er(t.Chip,"defaultBorder",n("palette-grey-700")),Er(t.Chip,"defaultAvatarColor",n("palette-grey-300")),Er(t.Chip,"defaultIconColor",n("palette-grey-300")),Er(t.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),Er(t.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),Er(t.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),Er(t.LinearProgress,"primaryBg",kn(t.primary.main,.5)),Er(t.LinearProgress,"secondaryBg",kn(t.secondary.main,.5)),Er(t.LinearProgress,"errorBg",kn(t.error.main,.5)),Er(t.LinearProgress,"infoBg",kn(t.info.main,.5)),Er(t.LinearProgress,"successBg",kn(t.success.main,.5)),Er(t.LinearProgress,"warningBg",kn(t.warning.main,.5)),Er(t.Skeleton,"bg","rgba(".concat(n("palette-text-primaryChannel")," / 0.13)")),Er(t.Slider,"primaryTrack",kn(t.primary.main,.5)),Er(t.Slider,"secondaryTrack",kn(t.secondary.main,.5)),Er(t.Slider,"errorTrack",kn(t.error.main,.5)),Er(t.Slider,"infoTrack",kn(t.info.main,.5)),Er(t.Slider,"successTrack",kn(t.success.main,.5)),Er(t.Slider,"warningTrack",kn(t.warning.main,.5));const e=xn(t.background.default,.98);Er(t.SnackbarContent,"bg",e),Er(t.SnackbarContent,"color",Ir((()=>t.getContrastText(e)))),Er(t.SpeedDialAction,"fabHoverBg",xn(t.background.paper,.15)),Er(t.StepConnector,"border",n("palette-grey-600")),Er(t.StepContent,"border",n("palette-grey-600")),Er(t.Switch,"defaultColor",n("palette-grey-300")),Er(t.Switch,"defaultDisabledColor",n("palette-grey-600")),Er(t.Switch,"primaryDisabledColor",kn(t.primary.main,.55)),Er(t.Switch,"secondaryDisabledColor",kn(t.secondary.main,.55)),Er(t.Switch,"errorDisabledColor",kn(t.error.main,.55)),Er(t.Switch,"infoDisabledColor",kn(t.info.main,.55)),Er(t.Switch,"successDisabledColor",kn(t.success.main,.55)),Er(t.Switch,"warningDisabledColor",kn(t.warning.main,.55)),Er(t.TableCell,"border",kn(En(t.divider,1),.68)),Er(t.Tooltip,"bg",En(t.grey[700],.92))}kr(t.background,"default"),kr(t.background,"paper"),kr(t.common,"background"),kr(t.common,"onBackground"),kr(t,"divider"),Object.keys(t).forEach((e=>{const n=t[e];"tonalOffset"!==e&&n&&"object"===typeof n&&(n.main&&Er(t[e],"mainChannel",_n(Cr(n.main))),n.light&&Er(t[e],"lightChannel",_n(Cr(n.light))),n.dark&&Er(t[e],"darkChannel",_n(Cr(n.dark))),n.contrastText&&Er(t[e],"contrastTextChannel",_n(Cr(n.contrastText))),"text"===e&&(kr(t[e],"primary"),kr(t[e],"secondary")),"action"===e&&(n.active&&kr(t[e],"active"),n.selected&&kr(t[e],"selected")))}))}));for(var C=arguments.length,k=new Array(C>1?C-1:0),I=1;I<C;I++)k[I-1]=arguments[I];S=k.reduce(((e,t)=>Ye(e,t)),S);const T={prefix:i,disableCssColorScheme:r,shouldSkipGeneratingVar:s,getSelector:wr(S)},{vars:x,generateThemeVars:A,generateStyleSheets:N}=Yn(S,T);return S.vars=x,Object.entries(S.colorSchemes[S.defaultColorScheme]).forEach((e=>{let[t,n]=e;S[t]=n})),S.generateThemeVars=A,S.generateStyleSheets=N,S.generateSpacing=function(){return Ct(c.spacing,yt(this))},S.getColorSchemeSelector=function(e){return function(t){return"media"===e?"@media (prefers-color-scheme: ".concat(t,")"):e?e.startsWith("data-")&&!e.includes("%s")?"[".concat(e,'="').concat(t,'"] &'):"class"===e?".".concat(t," &"):"data"===e?"[data-".concat(t,"] &"):"".concat(e.replace("%s",t)," &"):"&"}}(o),S.spacing=S.generateSpacing(),S.shouldSkipGeneratingVar=s,S.unstable_sxConfig=u(u({},Xt),null===c||void 0===c?void 0:c.unstable_sxConfig),S.unstable_sx=function(e){return en({sx:e,theme:this})},S.toRuntimeSource=ur,S}const Ar=["palette","cssVariables","colorSchemes","defaultColorScheme"];function Nr(e,t,n){e.colorSchemes&&n&&(e.colorSchemes[t]=u(u({},!0!==n&&n),{},{palette:qn(u(u({},!0===n?{}:n.palette),{},{mode:t}))}))}const Pr=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{palette:t,cssVariables:n=!1,colorSchemes:r=(t?void 0:{light:!0}),defaultColorScheme:i=(null===t||void 0===t?void 0:t.mode)}=e,s=h(e,Ar),o=i||"light",a=null===r||void 0===r?void 0:r[o],l=u(u({},r),t?{[o]:u(u({},"boolean"!==typeof a&&a),{},{palette:t})}:void 0);for(var c=arguments.length,d=new Array(c>1?c-1:0),f=1;f<c;f++)d[f-1]=arguments[f];if(!1===n){if(!("colorSchemes"in e))return fr(e,...d);let n=t;"palette"in e||l[o]&&(!0!==l[o]?n=l[o].palette:"dark"===o&&(n={mode:"dark"}));const r=fr(u(u({},e),{},{palette:n}),...d);return r.defaultColorScheme=o,r.colorSchemes=l,"light"===r.palette.mode&&(r.colorSchemes.light=u(u({},!0!==l.light&&l.light),{},{palette:r.palette}),Nr(r,"dark",l.dark)),"dark"===r.palette.mode&&(r.colorSchemes.dark=u(u({},!0!==l.dark&&l.dark),{},{palette:r.palette}),Nr(r,"light",l.light)),r}return t||"light"in l||"light"!==o||(l.light=!0),xr(u(u({},s),{},{colorSchemes:l,defaultColorScheme:o},"boolean"!==typeof n&&n),...d)}();const Rr=function(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e},Or=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n=cn,rootShouldForwardProp:r=un,slotShouldForwardProp:i=un}=e;function s(e){!function(e,t,n){e.theme=function(e){for(const t in e)return!1;return!0}(e.theme)?n:e.theme[t]||e.theme}(e,t,n)}return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}(e,(e=>e.filter((e=>e!==en))));const{name:n,slot:o,skipVariantsResolver:a,skipSx:l,overridesResolver:c=hn(mn(o))}=t,d=h(t,ln),f=void 0!==a?a:o&&"Root"!==o&&"root"!==o||!1,p=l||!1;let m=un;"Root"===o||"root"===o?m=r:o?m=i:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(m=void 0);const g=function(e,t){return We(e,t)}(e,u({shouldForwardProp:m,label:pn(n,o)},d)),y=e=>{if("function"===typeof e&&e.__emotion_real!==e)return function(t){return dn(t,e)};if(Ge(e)){const t=on(e);return t.variants?function(e){return dn(e,t)}:t.style}return e},v=function(){const t=[];for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];const a=i.map(y),l=[];if(t.push(s),n&&c&&l.push((function(e){var t;const r=null===(t=e.theme.components)||void 0===t||null===(t=t[n])||void 0===t?void 0:t.styleOverrides;if(!r)return null;const i={};for(const n in r)i[n]=dn(e,r[n]);return c(e,i)})),n&&!f&&l.push((function(e){var t;const r=e.theme,i=null===r||void 0===r||null===(t=r.components)||void 0===t||null===(t=t[n])||void 0===t?void 0:t.variants;return i?fn(e,i):null})),p||l.push(en),Array.isArray(a[0])){const e=a.shift(),n=new Array(t.length).fill(""),r=new Array(l.length).fill("");let i;i=[...n,...e,...r],i.raw=[...n,...e.raw,...r],t.unshift(i)}const u=[...t,...a,...l],h=g(...u);return e.muiName&&(h.muiName=e.muiName),h};return g.withConfig&&(v.withConfig=g.withConfig),v}}({themeId:"$$material",defaultTheme:Pr,rootShouldForwardProp:e=>Rr(e)&&"classes"!==e}),Dr=Or,Lr={theme:void 0};const Mr=function(e){let t,n;return function(r){let i=t;return void 0!==i&&r.theme===n||(Lr.theme=r.theme,i=on(e(Lr)),t=i,n=r.theme),i}};function Fr(e,t){const n=u({},t);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const i=r;if("components"===i||"slots"===i)n[i]=u(u({},e[i]),n[i]);else if("componentsProps"===i||"slotProps"===i){const r=e[i],s=t[i];if(s)if(r){n[i]=u({},s);for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e)){const t=e;n[i][t]=Fr(r[t],s[t])}}else n[i]=s;else n[i]=r||{}}else void 0===n[i]&&(n[i]=e[i])}return n}var Ur=n(579);const jr=r.createContext(void 0);function Vr(e){let{props:t,name:n}=e;return function(e){const{theme:t,name:n,props:r}=e;if(!t||!t.components||!t.components[n])return r;const i=t.components[n];return i.defaultProps?Fr(i.defaultProps,r):i.styleOverrides||i.variants?r:Fr(i,r)}({props:t,name:n,theme:{components:r.useContext(jr)}})}const Br=e=>e,zr=(()=>{let e=Br;return{configure(t){e=t},generate:t=>e(t),reset(){e=Br}}})(),qr={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Wr(e,t){const n=qr[t];return n?"".concat(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui","-").concat(n):"".concat(zr.generate(e),"-").concat(t)}function Kr(e){return Wr("MuiSvgIcon",e)}!function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const r={};t.forEach((t=>{r[t]=Wr(e,t,n)}))}("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Hr=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],Gr=Dr("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"inherit"!==n.color&&t["color".concat(g(n.color))],t["fontSize".concat(g(n.fontSize))]]}})(Mr((e=>{var t,n,r,i,s,o,a,l,c,u,h,d,f,p,m;let{theme:g}=e;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:null===(t=g.transitions)||void 0===t||null===(n=t.create)||void 0===n?void 0:n.call(t,"fill",{duration:null===(r=(null!==(i=g.vars)&&void 0!==i?i:g).transitions)||void 0===r||null===(r=r.duration)||void 0===r?void 0:r.shorter}),variants:[{props:e=>!e.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:(null===(s=g.typography)||void 0===s||null===(o=s.pxToRem)||void 0===o?void 0:o.call(s,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:(null===(a=g.typography)||void 0===a||null===(l=a.pxToRem)||void 0===l?void 0:l.call(a,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:(null===(c=g.typography)||void 0===c||null===(u=c.pxToRem)||void 0===u?void 0:u.call(c,35))||"2.1875rem"}},...Object.entries((null!==(h=g.vars)&&void 0!==h?h:g).palette).filter((e=>{let[,t]=e;return t&&t.main})).map((e=>{var t,n;let[r]=e;return{props:{color:r},style:{color:null===(t=(null!==(n=g.vars)&&void 0!==n?n:g).palette)||void 0===t||null===(t=t[r])||void 0===t?void 0:t.main}}})),{props:{color:"action"},style:{color:null===(d=(null!==(f=g.vars)&&void 0!==f?f:g).palette)||void 0===d||null===(d=d.action)||void 0===d?void 0:d.active}},{props:{color:"disabled"},style:{color:null===(p=(null!==(m=g.vars)&&void 0!==m?m:g).palette)||void 0===p||null===(p=p.action)||void 0===p?void 0:p.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}}))),Qr=r.forwardRef((function(e,t){const n=Vr({props:e,name:"MuiSvgIcon"});const{children:i,className:s,color:o="inherit",component:a="svg",fontSize:l="medium",htmlColor:c,inheritViewBox:d=!1,titleAccess:p,viewBox:m="0 0 24 24"}=n,y=h(n,Hr),v=r.isValidElement(i)&&"svg"===i.type,_=u(u({},n),{},{color:o,component:a,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:d,viewBox:m,hasSvgAsChild:v}),w={};d||(w.viewBox=m);const b=(e=>{const{color:t,fontSize:n,classes:r}=e;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const r={};for(const i in e){const s=e[i];let o="",a=!0;for(let e=0;e<s.length;e+=1){const r=s[e];r&&(o+=(!0===a?"":" ")+t(r),a=!1,n&&n[r]&&(o+=" "+n[r]))}r[i]=o}return r}({root:["root","inherit"!==t&&"color".concat(g(t)),"fontSize".concat(g(n))]},Kr,r)})(_);return(0,Ur.jsxs)(Gr,u(u(u(u({as:a,className:f(b.root,s),focusable:"false",color:c,"aria-hidden":!p||void 0,role:p?"img":void 0,ref:t},w),y),v&&i.props),{},{ownerState:_,children:[v?i.props.children:i,p?(0,Ur.jsx)("title",{children:p}):null]}))}));Qr.muiName="SvgIcon";const Yr=Qr;function Jr(e,t){function n(n,r){return(0,Ur.jsx)(Yr,u(u({"data-testid":"".concat(t,"Icon"),ref:r},n),{},{children:e}))}return n.muiName=Yr.muiName,r.memo(r.forwardRef(n))}const $r=Jr((0,Ur.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search"),Xr=Jr((0,Ur.jsx)("path",{d:"M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2M1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2"}),"ShoppingCart");var Zr,ei=n(950),ti=n.t(ei,2);function ni(){return ni=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ni.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(Zr||(Zr={}));const ri="popstate";function ii(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function si(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function oi(e,t){return{usr:e.state,key:e.key,idx:t}}function ai(e,t,n,r){return void 0===n&&(n=null),ni({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?ci(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function li(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function ci(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function ui(e,t,n,r){void 0===r&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Zr.Pop,l=null,c=u();function u(){return(o.state||{idx:null}).idx}function h(){a=Zr.Pop;let e=u(),t=null==e?null:e-c;c=e,l&&l({action:a,location:f.location,delta:t})}function d(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:li(e);return n=n.replace(/ $/,"%20"),ii(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==c&&(c=0,o.replaceState(ni({},o.state,{idx:c}),""));let f={get action(){return a},get location(){return e(i,o)},listen(e){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(ri,h),l=e,()=>{i.removeEventListener(ri,h),l=null}},createHref:e=>t(i,e),createURL:d,encodeLocation(e){let t=d(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){a=Zr.Push;let r=ai(f.location,e,t);n&&n(r,e),c=u()+1;let h=oi(r,c),d=f.createHref(r);try{o.pushState(h,"",d)}catch(BI){if(BI instanceof DOMException&&"DataCloneError"===BI.name)throw BI;i.location.assign(d)}s&&l&&l({action:a,location:f.location,delta:1})},replace:function(e,t){a=Zr.Replace;let r=ai(f.location,e,t);n&&n(r,e),c=u();let i=oi(r,c),h=f.createHref(r);o.replaceState(i,"",h),s&&l&&l({action:a,location:f.location,delta:0})},go:e=>o.go(e)};return f}var hi;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(hi||(hi={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function di(e,t,n){return void 0===n&&(n="/"),fi(e,t,n,!1)}function fi(e,t,n,r){let i=Ti(("string"===typeof t?ci(t):t).pathname||"/",n);if(null==i)return null;let s=pi(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(s);let o=null;for(let a=0;null==o&&a<s.length;++a){let e=Ii(i);o=Ci(s[a],e,r)}return o}function pi(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(ii(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=Ri([r,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(ii(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),pi(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:Ei(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of mi(e.path))i(e,t,r);else i(e,t)})),t}function mi(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=mi(r.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),i&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const gi=/^:[\w-]+$/,yi=3,vi=2,_i=1,wi=10,bi=-2,Si=e=>"*"===e;function Ei(e,t){let n=e.split("/"),r=n.length;return n.some(Si)&&(r+=bi),t&&(r+=vi),n.filter((e=>!Si(e))).reduce(((e,t)=>e+(gi.test(t)?yi:""===t?_i:wi)),r)}function Ci(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let e=r[a],l=a===r.length-1,c="/"===s?t:t.slice(s.length)||"/",u=ki({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),h=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=ki({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),o.push({params:i,pathname:Ri([s,u.pathname]),pathnameBase:Oi(Ri([s,u.pathnameBase])),route:h}),"/"!==u.pathnameBase&&(s=Ri([s,u.pathnameBase]))}return o}function ki(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);si("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:s,pathnameBase:o,pattern:e}}function Ii(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(BI){return si(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+BI+")."),e}}function Ti(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function xi(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function Ai(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function Ni(e,t){let n=Ai(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function Pi(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=ci(e):(i=ni({},e),ii(!i.pathname||!i.pathname.includes("?"),xi("?","pathname","search",i)),ii(!i.pathname||!i.pathname.includes("#"),xi("#","pathname","hash",i)),ii(!i.search||!i.search.includes("#"),xi("#","search","hash",i)));let s,o=""===e||""===i.pathname,a=o?"/":i.pathname;if(null==a)s=n;else{let e=t.length-1;if(!r&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?ci(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:Di(r),hash:Li(i)}}(i,s),c=a&&"/"!==a&&a.endsWith("/"),u=(o||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}const Ri=e=>e.join("/").replace(/\/\/+/g,"/"),Oi=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Di=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",Li=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function Mi(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const Fi=["post","put","patch","delete"],Ui=(new Set(Fi),["get",...Fi]);new Set(Ui),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function ji(){return ji=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ji.apply(this,arguments)}const Vi=r.createContext(null);const Bi=r.createContext(null);const zi=r.createContext(null);const qi=r.createContext(null);const Wi=r.createContext({outlet:null,matches:[],isDataRoute:!1});const Ki=r.createContext(null);function Hi(){return null!=r.useContext(qi)}function Gi(){return Hi()||ii(!1),r.useContext(qi).location}function Qi(e){r.useContext(zi).static||r.useLayoutEffect(e)}function Yi(){let{isDataRoute:e}=r.useContext(Wi);return e?function(){let{router:e}=ss(rs.UseNavigateStable),t=as(is.UseNavigateStable),n=r.useRef(!1);return Qi((()=>{n.current=!0})),r.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,ji({fromRouteId:t},i)))}),[e,t])}():function(){Hi()||ii(!1);let e=r.useContext(Vi),{basename:t,future:n,navigator:i}=r.useContext(zi),{matches:s}=r.useContext(Wi),{pathname:o}=Gi(),a=JSON.stringify(Ni(s,n.v7_relativeSplatPath)),l=r.useRef(!1);return Qi((()=>{l.current=!0})),r.useCallback((function(n,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof n)return void i.go(n);let s=Pi(n,JSON.parse(a),o,"path"===r.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:Ri([t,s.pathname])),(r.replace?i.replace:i.push)(s,r.state,r)}),[t,i,a,o,e])}()}function Ji(e,t){let{relative:n}=void 0===t?{}:t,{future:i}=r.useContext(zi),{matches:s}=r.useContext(Wi),{pathname:o}=Gi(),a=JSON.stringify(Ni(s,i.v7_relativeSplatPath));return r.useMemo((()=>Pi(e,JSON.parse(a),o,"path"===n)),[e,a,o,n])}function $i(e,t,n,i){Hi()||ii(!1);let{navigator:s}=r.useContext(zi),{matches:o}=r.useContext(Wi),a=o[o.length-1],l=a?a.params:{},c=(a&&a.pathname,a?a.pathnameBase:"/");a&&a.route;let u,h=Gi();if(t){var d;let e="string"===typeof t?ci(t):t;"/"===c||(null==(d=e.pathname)?void 0:d.startsWith(c))||ii(!1),u=e}else u=h;let f=u.pathname||"/",p=f;if("/"!==c){let e=c.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(e.length).join("/")}let m=di(e,{pathname:p});let g=ns(m&&m.map((e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:Ri([c,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:Ri([c,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),o,n,i);return t&&g?r.createElement(qi.Provider,{value:{location:ji({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Zr.Pop}},g):g}function Xi(){let e=function(){var e;let t=r.useContext(Ki),n=os(is.UseRouteError),i=as(is.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=Mi(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:s},n):null,null)}const Zi=r.createElement(Xi,null);class es extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(Wi.Provider,{value:this.props.routeContext},r.createElement(Ki.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ts(e){let{routeContext:t,match:n,children:i}=e,s=r.useContext(Vi);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(Wi.Provider,{value:t},i)}function ns(e,t,n,i){var s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==e){var o;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(o=i)&&o.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let a=e,l=null==(s=n)?void 0:s.errors;if(null!=l){let e=a.findIndex((e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id])));e>=0||ii(!1),a=a.slice(0,Math.min(a.length,e+1))}let c=!1,u=-1;if(n&&i&&i.v7_partialHydration)for(let r=0;r<a.length;r++){let e=a[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=r),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){c=!0,a=u>=0?a.slice(0,u+1):[a[0]];break}}}return a.reduceRight(((e,i,s)=>{let o,h=!1,d=null,f=null;var p;n&&(o=l&&i.route.id?l[i.route.id]:void 0,d=i.route.errorElement||Zi,c&&(u<0&&0===s?(p="route-fallback",!1||ls[p]||(ls[p]=!0),h=!0,f=null):u===s&&(h=!0,f=i.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,s+1)),g=()=>{let t;return t=o?d:h?f:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(ts,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===s)?r.createElement(es,{location:n.location,revalidation:n.revalidation,component:d,error:o,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var rs=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(rs||{}),is=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(is||{});function ss(e){let t=r.useContext(Vi);return t||ii(!1),t}function os(e){let t=r.useContext(Bi);return t||ii(!1),t}function as(e){let t=function(){let e=r.useContext(Wi);return e||ii(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||ii(!1),n.route.id}const ls={};const cs={};const us=(e,t,n)=>{var r;cs[r="\u26a0\ufe0f React Router Future Flag Warning: "+t+". You can use the `"+e+"` future flag to opt-in early. For more information, see "+n+"."]||(cs[r]=!0,console.warn(r))};function hs(e,t){void 0===(null==e?void 0:e.v7_startTransition)&&us("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),void 0!==(null==e?void 0:e.v7_relativeSplatPath)||t&&t.v7_relativeSplatPath||us("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath"),t&&(void 0===t.v7_fetcherPersist&&us("v7_fetcherPersist","The persistence behavior of fetchers is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_fetcherpersist"),void 0===t.v7_normalizeFormMethod&&us("v7_normalizeFormMethod","Casing of `formMethod` fields is being normalized to uppercase in v7","https://reactrouter.com/v6/upgrading/future#v7_normalizeformmethod"),void 0===t.v7_partialHydration&&us("v7_partialHydration","`RouterProvider` hydration behavior is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_partialhydration"),void 0===t.v7_skipActionErrorRevalidation&&us("v7_skipActionErrorRevalidation","The revalidation behavior after 4xx/5xx `action` responses is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_skipactionerrorrevalidation"))}i.startTransition;function ds(e){ii(!1)}function fs(e){let{basename:t="/",children:n=null,location:i,navigationType:s=Zr.Pop,navigator:o,static:a=!1,future:l}=e;Hi()&&ii(!1);let c=t.replace(/^\/*/,"/"),u=r.useMemo((()=>({basename:c,navigator:o,static:a,future:ji({v7_relativeSplatPath:!1},l)})),[c,l,o,a]);"string"===typeof i&&(i=ci(i));let{pathname:h="/",search:d="",hash:f="",state:p=null,key:m="default"}=i,g=r.useMemo((()=>{let e=Ti(h,c);return null==e?null:{location:{pathname:e,search:d,hash:f,state:p,key:m},navigationType:s}}),[c,h,d,f,p,m,s]);return null==g?null:r.createElement(zi.Provider,{value:u},r.createElement(qi.Provider,{children:n,value:g}))}function ps(e){let{children:t,location:n}=e;return $i(ms(t),n)}new Promise((()=>{}));r.Component;function ms(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,((e,i)=>{if(!r.isValidElement(e))return;let s=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,ms(e.props.children,s));e.type!==ds&&ii(!1),e.props.index&&e.props.children&&ii(!1);let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=ms(e.props.children,s)),n.push(o)})),n}function gs(){return gs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gs.apply(this,arguments)}function ys(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const vs=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(SM){}new Map;const _s=i.startTransition;ti.flushSync,i.useId;function ws(e){let{basename:t,children:n,future:i,window:s}=e,o=r.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:s,v5Compat:!0})&&(a={}),ui((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return ai("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:li(t)}),null,a)));let l=o.current,[c,u]=r.useState({action:l.action,location:l.location}),{v7_startTransition:h}=i||{},d=r.useCallback((e=>{h&&_s?_s((()=>u(e))):u(e)}),[u,h]);return r.useLayoutEffect((()=>l.listen(d)),[l,d]),r.useEffect((()=>hs(i)),[i]),r.createElement(fs,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:i})}const bs="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ss=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Es=r.forwardRef((function(e,t){let n,{onClick:i,relative:s,reloadDocument:o,replace:a,state:l,target:c,to:u,preventScrollReset:h,viewTransition:d}=e,f=ys(e,vs),{basename:p}=r.useContext(zi),m=!1;if("string"===typeof u&&Ss.test(u)&&(n=u,bs))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=Ti(t.pathname,p);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:m=!0}catch(SM){}let g=function(e,t){let{relative:n}=void 0===t?{}:t;Hi()||ii(!1);let{basename:i,navigator:s}=r.useContext(zi),{hash:o,pathname:a,search:l}=Ji(e,{relative:n}),c=a;return"/"!==i&&(c="/"===a?i:Ri([i,a])),s.createHref({pathname:c,search:l,hash:o})}(u,{relative:s}),y=function(e,t){let{target:n,replace:i,state:s,preventScrollReset:o,relative:a,viewTransition:l}=void 0===t?{}:t,c=Yi(),u=Gi(),h=Ji(e,{relative:a});return r.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==i?i:li(u)===li(h);c(e,{replace:n,state:s,preventScrollReset:o,relative:a,viewTransition:l})}}),[u,c,h,i,s,n,e,o,a,l])}(u,{replace:a,state:l,target:c,preventScrollReset:h,relative:s,viewTransition:d});return r.createElement("a",gs({},f,{href:n||g,onClick:m||o?i:function(e){i&&i(e),e.defaultPrevented||y(e)},ref:t,target:c}))}));var Cs,ks;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Cs||(Cs={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(ks||(ks={}));const Is=(0,r.createContext)(),Ts=e=>{let{reducer:t,initialState:n,children:i}=e;return(0,Ur.jsx)(Is.Provider,{value:(0,r.useReducer)(t,n),children:i})},xs=()=>(0,r.useContext)(Is),As=!1,Ns=!1,Ps="${JSCORE_VERSION}",Rs=function(e,t){if(!e)throw Os(t)},Os=function(e){return new Error("Firebase Database ("+Ps+") INTERNAL ASSERT FAILED: "+e)},Ds=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Ls={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ds(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new Ms;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Ms extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Fs=function(e){const t=Ds(e);return Ls.encodeByteArray(t,!0)},Us=function(e){return Fs(e).replace(/\./g,"")},js=function(e){try{return Ls.decodeString(e,!0)}catch(SM){console.error("base64Decode failed: ",SM)}return null};function Vs(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Vs(e[n],t[n]));return e}function Bs(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const zs=()=>{try{return Bs().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(SM){return}const t=e&&js(e[1]);return t&&JSON.parse(t)})()}catch(SM){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(SM))}},qs=()=>{var e;return null===(e=zs())||void 0===e?void 0:e.config};class Ws{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Ks(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Us(JSON.stringify({alg:"none",type:"JWT"})),Us(JSON.stringify(s)),""].join(".")}function Hs(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Gs(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Hs())}function Qs(){var e;const t=null===(e=zs())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(SM){return!1}}function Ys(){return"undefined"!==typeof WorkerGlobalScope&&"undefined"!==typeof self&&self instanceof WorkerGlobalScope}function Js(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function $s(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Xs(){const e=Hs();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Zs(){return!0===As||!0===Ns}function eo(){return!Qs()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function to(){try{return"object"===typeof indexedDB}catch(SM){return!1}}class no extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,no.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ro.prototype.create)}}class ro{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(io,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new no(n,s,t)}}const io=/\{\$([^}]+)}/g;function so(e){return JSON.parse(e)}function oo(e){return JSON.stringify(e)}const ao=function(e){let t={},n={},r={},i="";try{const s=e.split(".");t=so(js(s[0])||""),n=so(js(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(SM){}return{header:t,claims:n,data:r,signature:i}};function lo(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function co(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function uo(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function ho(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function fo(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(po(n)&&po(s)){if(!fo(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function po(e){return null!==e&&"object"===typeof e}function mo(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function go(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function yo(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class vo{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let r,i,s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(r=l^o&(a^l),i=1518500249):(r=o^a^l,i=1859775393):u<60?(r=o&a|l&(o|a),i=2400959708):(r=o^a^l,i=3395469782);const e=(s<<5|s>>>27)+r+c+i+n[u]&4294967295;c=l,l=a,a=4294967295&(o<<30|o>>>2),o=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let s=this.inbuf_;for(;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}function _o(e,t){const n=new wo(e,t);return n.subscribe.bind(n)}class wo{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=bo),void 0===r.error&&(r.error=bo),void 0===r.complete&&(r.complete=bo);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(SM){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(SM){"undefined"!==typeof console&&console.error&&console.error(SM)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function bo(){}const So=function(e,t,n,r){let i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i){throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}};function Eo(e,t){return"".concat(e," failed: ").concat(t," argument ")}function Co(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(Eo(e,t)+"must be a valid function.")}function ko(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(Eo(e,t)+"must be a valid context object.")}const Io=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function To(e){return e&&e._delegate?e._delegate:e}class xo{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ao="[DEFAULT]";class No{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Ws;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(SM){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(SM){if(r)return null;throw SM}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ao})}catch(SM){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(SM){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ao;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ao;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ao;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Po(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ao;return this.component?this.component.multipleInstances?e:Ao:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function Po(e){return e===Ao?void 0:e}class Ro{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new No(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Oo=[];var Do;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Do||(Do={}));const Lo={debug:Do.DEBUG,verbose:Do.VERBOSE,info:Do.INFO,warn:Do.WARN,error:Do.ERROR,silent:Do.SILENT},Mo=Do.INFO,Fo={[Do.DEBUG]:"log",[Do.VERBOSE]:"log",[Do.INFO]:"info",[Do.WARN]:"warn",[Do.ERROR]:"error"},Uo=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Fo[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class jo{constructor(e){this.name=e,this._logLevel=Mo,this._logHandler=Uo,this._userLogHandler=null,Oo.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Do))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Lo[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Do.DEBUG,...t),this._logHandler(this,Do.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Do.VERBOSE,...t),this._logHandler(this,Do.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Do.INFO,...t),this._logHandler(this,Do.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Do.WARN,...t),this._logHandler(this,Do.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Do.ERROR,...t),this._logHandler(this,Do.ERROR,...t)}}let Vo,Bo;const zo=new WeakMap,qo=new WeakMap,Wo=new WeakMap,Ko=new WeakMap,Ho=new WeakMap;let Go={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return qo.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Wo.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Jo(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Qo(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Bo||(Bo=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply($o(this),n),Jo(zo.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Jo(e.apply($o(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call($o(this),t,...r);return Wo.set(s,t.sort?t.sort():[t]),Jo(s)}}function Yo(e){return"function"===typeof e?Qo(e):(e instanceof IDBTransaction&&function(e){if(qo.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));qo.set(e,t)}(e),t=e,(Vo||(Vo=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,Go):e);var t}function Jo(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Jo(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&zo.set(t,e)})).catch((()=>{})),Ho.set(t,e),t}(e);if(Ko.has(e))return Ko.get(e);const t=Yo(e);return t!==e&&(Ko.set(e,t),Ho.set(t,e)),t}const $o=e=>Ho.get(e);const Xo=["get","getKey","getAll","getAllKeys","count"],Zo=["put","add","delete","clear"],ea=new Map;function ta(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(ea.get(t))return ea.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Zo.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Xo.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return ea.set(t,s),s}Go=(e=>u(u({},e),{},{get:(t,n,r)=>ta(t,n)||e.get(t,n,r),has:(t,n)=>!!ta(t,n)||e.has(t,n)}))(Go);class na{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const ra="@firebase/app",ia="0.10.17",sa=new jo("@firebase/app"),oa="@firebase/app-compat",aa="@firebase/analytics-compat",la="@firebase/analytics",ca="@firebase/app-check-compat",ua="@firebase/app-check",ha="@firebase/auth",da="@firebase/auth-compat",fa="@firebase/database",pa="@firebase/data-connect",ma="@firebase/database-compat",ga="@firebase/functions",ya="@firebase/functions-compat",va="@firebase/installations",_a="@firebase/installations-compat",wa="@firebase/messaging",ba="@firebase/messaging-compat",Sa="@firebase/performance",Ea="@firebase/performance-compat",Ca="@firebase/remote-config",ka="@firebase/remote-config-compat",Ia="@firebase/storage",Ta="@firebase/storage-compat",xa="@firebase/firestore",Aa="@firebase/vertexai",Na="@firebase/firestore-compat",Pa="firebase",Ra="[DEFAULT]",Oa={[ra]:"fire-core",[oa]:"fire-core-compat",[la]:"fire-analytics",[aa]:"fire-analytics-compat",[ua]:"fire-app-check",[ca]:"fire-app-check-compat",[ha]:"fire-auth",[da]:"fire-auth-compat",[fa]:"fire-rtdb",[pa]:"fire-data-connect",[ma]:"fire-rtdb-compat",[ga]:"fire-fn",[ya]:"fire-fn-compat",[va]:"fire-iid",[_a]:"fire-iid-compat",[wa]:"fire-fcm",[ba]:"fire-fcm-compat",[Sa]:"fire-perf",[Ea]:"fire-perf-compat",[Ca]:"fire-rc",[ka]:"fire-rc-compat",[Ia]:"fire-gcs",[Ta]:"fire-gcs-compat",[xa]:"fire-fst",[Na]:"fire-fst-compat",[Aa]:"fire-vertex","fire-js":"fire-js",[Pa]:"fire-js-all"},Da=new Map,La=new Map,Ma=new Map;function Fa(e,t){try{e.container.addComponent(t)}catch(SM){sa.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),SM)}}function Ua(e,t){e.container.addOrOverwriteComponent(t)}function ja(e){const t=e.name;if(Ma.has(t))return sa.debug("There were multiple attempts to register component ".concat(t,".")),!1;Ma.set(t,e);for(const n of Da.values())Fa(n,e);for(const n of La.values())Fa(n,e);return!0}function Va(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ba(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ra;Va(e,t).clearInstance(n)}function za(e){return void 0!==e.options}function qa(e){return void 0!==e.settings}function Wa(){Ma.clear()}const Ka=new ro("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Ha{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new xo("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ka.create("app-deleted",{appName:this._name})}}class Ga extends Ha{constructor(e,t,n,r){const i=void 0!==t.automaticDataCollectionEnabled&&t.automaticDataCollectionEnabled,s={name:n,automaticDataCollectionEnabled:i};if(void 0!==e.apiKey)super(e,s,r);else{super(e.options,s,r)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:i},t),this._finalizationRegistry=null,"undefined"!==typeof FinalizationRegistry&&(this._finalizationRegistry=new FinalizationRegistry((()=>{this.automaticCleanup()}))),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,el(ra,ia,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Za(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Ka.create("server-app-deleted")}}const Qa="11.1.0";function Ya(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Ra,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Ka.create("bad-app-name",{appName:String(i)});if(n||(n=qs()),!n)throw Ka.create("no-options");const s=Da.get(i);if(s){if(fo(n,s.options)&&fo(r,s.config))return s;throw Ka.create("duplicate-app",{appName:i})}const o=new Ro(i);for(const l of Ma.values())o.addComponent(l);const a=new Ha(n,r,o);return Da.set(i,a),a}function Ja(e,t){if(("undefined"!==typeof window||Ys())&&!Ys())throw Ka.create("invalid-server-app-environment");let n;void 0===t.automaticDataCollectionEnabled&&(t.automaticDataCollectionEnabled=!1),n=za(e)?e.options:e;const r=Object.assign(Object.assign({},t),n);void 0!==r.releaseOnDeref&&delete r.releaseOnDeref;if(void 0!==t.releaseOnDeref&&"undefined"===typeof FinalizationRegistry)throw Ka.create("finalization-registry-not-supported",{});const i=""+(s=JSON.stringify(r),[...s].reduce(((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0),0));var s;const o=La.get(i);if(o)return o.incRefCount(t.releaseOnDeref),o;const a=new Ro(i);for(const c of Ma.values())a.addComponent(c);const l=new Ga(n,t,i,a);return La.set(i,l),l}function $a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ra;const t=Da.get(e);if(!t&&e===Ra&&qs())return Ya();if(!t)throw Ka.create("no-app",{appName:e});return t}function Xa(){return Array.from(Da.values())}async function Za(e){let t=!1;const n=e.name;if(Da.has(n))t=!0,Da.delete(n);else if(La.has(n)){e.decRefCount()<=0&&(La.delete(n),t=!0)}t&&(await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function el(e,t,n){var r;let i=null!==(r=Oa[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void sa.warn(e.join(" "))}ja(new xo("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function tl(e,t){if(null!==e&&"function"!==typeof e)throw Ka.create("invalid-log-argument");!function(e,t){for(const n of Oo){let r=null;t&&t.level&&(r=Lo[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:Do[n].toLowerCase(),message:a,args:s,type:t.name})}}}(e,t)}function nl(e){var t;t=e,Oo.forEach((e=>{e.setLogLevel(t)}))}const rl="firebase-heartbeat-store";let il=null;function sl(){return il||(il=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=Jo(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(Jo(o.result),e.oldVersion,e.newVersion,Jo(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(rl)}catch(SM){console.warn(SM)}}}).catch((e=>{throw Ka.create("idb-open",{originalErrorMessage:e.message})}))),il}async function ol(e,t){try{const n=(await sl()).transaction(rl,"readwrite"),r=n.objectStore(rl);await r.put(t,al(e)),await n.done}catch(SM){if(SM instanceof no)sa.warn(SM.message);else{const t=Ka.create("idb-set",{originalErrorMessage:null===SM||void 0===SM?void 0:SM.message});sa.warn(t.message)}}}function al(e){return"".concat(e.name,"!").concat(e.options.appId)}class ll{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ul(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=cl();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}catch(SM){sa.warn(SM)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=cl(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),hl(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),hl(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Us(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(SM){return sa.warn(SM),""}}}function cl(){return(new Date).toISOString().substring(0,10)}class ul{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!to()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(BI){t(BI)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await sl()).transaction(rl),n=await t.objectStore(rl).get(al(e));return await t.done,n}catch(SM){if(SM instanceof no)sa.warn(SM.message);else{const t=Ka.create("idb-get",{originalErrorMessage:null===SM||void 0===SM?void 0:SM.message});sa.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ol(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ol(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function hl(e){return Us(JSON.stringify({version:2,heartbeats:e})).length}var dl;dl="",ja(new xo("platform-logger",(e=>new na(e)),"PRIVATE")),ja(new xo("heartbeat",(e=>new ll(e)),"PRIVATE")),el(ra,ia,dl),el(ra,ia,"esm2017"),el("fire-js","");class fl{constructor(e,t){this._delegate=e,this.firebase=t,Fa(e,new xo("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Za(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ra;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ra;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Fa(this._delegate,e)}_addOrOverwriteComponent(e){Ua(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const pl=new ro("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const ml=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e){const i=Ya(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(lo(n,i.name))return n[i.name];const s=new t(i,r);return n[i.name]=s,s},app:i,registerVersion:el,setLogLevel:nl,onLog:tl,apps:null,SDK_VERSION:Qa,INTERNAL:{registerComponent:function(e){const n=e.name,s=n.replace("-compat","");if(ja(e)&&"PUBLIC"===e.type){const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw pl.create("invalid-app-argument",{appName:n});return e[s]()};void 0!==e.serviceProps&&Vs(o,e.serviceProps),r[s]=o,t.prototype[s]=function(){const t=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[s]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!lo(n,e=e||Ra))throw pl.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=t,r}(fl);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Vs(n,e)},createSubscribe:_o,ErrorFactory:ro,deepExtend:Vs}),n}(),gl=new jo("@firebase/app-compat");try{const e=Bs();if(void 0!==e.firebase){gl.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const t=e.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&gl.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch(EM){}const yl=ml;!function(e){el("@firebase/app-compat","0.2.47",e)}();yl.registerVersion("firebase","11.1.0","app-compat");var vl,_l,wl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},bl={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return d(o(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(a,a);if(h(e))return t=g(d(e),t),new m(d(t.g),d(t.h));if(h(t))return t=g(e,d(t)),new m(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=s.add(r);0>=c.l(e)&&(i=i.add(n),s=c),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(s=o(n)).j(t);h(c)||0<c.l(e);)c=(s=o(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=f(e,c)}return new m(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],o=0;o<i;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var o=i+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(c)&&0>e.l(c))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,f=65535&this.i(i),m=e.i(s)>>>16,g=65535&e.i(s);n[2*i+2*s]+=f*g,p(n,2*i+2*s),n[2*i+2*s+1]+=l*g,p(n,2*i+2*s+1),n[2*i+2*s+1]+=f*m,p(n,2*i+2*s+1),n[2*i+2*s+2]+=l*m,p(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,_l=bl.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),i=a,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+l),n);8>l?(l=o(Math.pow(n,l)),i=i.j(l).add(o(c))):i=(i=i.j(r)).add(o(c))}return i},vl=bl.Integer=r}).apply("undefined"!==typeof wl?wl:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Sl,El,Cl,kl,Il,Tl,xl,Al,Nl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Pl={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Nl&&Nl];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function _(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function S(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function E(e){i.setTimeout((()=>{throw e}),0)}function C(){var e=A;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var k=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new I),(e=>e.reset()));class I{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let T,x=!1,A=new class{constructor(){this.h=this.g=null}add(e,t){const n=k.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},N=()=>{const e=i.Promise.resolve(void 0);T=()=>{e.then(P)}};var P=()=>{for(var e;e=C();){try{e.h.call(e.g)}catch(n){E(n)}var t=k;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}x=!1};function R(){this.s=this.s,this.C=this.C}function O(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}R.prototype.s=!1,R.prototype.ma=function(){this.s||(this.s=!0,this.N())},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},O.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function L(e,t){if(O.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:M[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&L.aa.h.call(this)}}h(L,O);var M={2:"touch",3:"pen",4:"mouse"};L.prototype.h=function(){L.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var F="closure_listenable_"+(1e6*Math.random()|0),U=0;function j(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++U,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function B(e){this.src=e,this.g={},this.h=0}function z(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(V(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function q(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}B.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=q(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new j(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var W="closure_lm_"+(1e6*Math.random()|0),K={};function H(e,t,n,r,i){if(r&&r.once)return Q(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)H(e,t[s],n,r,i);return null}return n=te(n),e&&e[F]?e.K(t,n,o(r)?!!r.capture:!!r,i):G(e,t,n,!1,r,i)}function G(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,l=Z(e);if(l||(e[W]=l=new B(e)),(n=l.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=X;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)D||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent($(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Q(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Q(e,t[s],n,r,i);return null}return n=te(n),e&&e[F]?e.L(t,n,o(r)?!!r.capture:!!r,i):G(e,t,n,!0,r,i)}function Y(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Y(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=te(n),e&&e[F]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=q(s=e.g[t],n,r,i))&&(V(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=q(t,n,r,i)),(n=-1<e?t[e]:null)&&J(n))}function J(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[F])z(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent($(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(z(n,e),0==n.h&&(n.src=null,t[W]=null)):V(e)}}}function $(e){return e in K?K[e]:K[e]="on"+e}function X(e,t){if(e.da)e=!0;else{t=new L(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&J(e),e=n.call(r,t)}return e}function Z(e){return(e=e[W])instanceof B?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){R.call(this),this.i=new B(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new O(t,e);else if(t instanceof O)t.target=t.target||e;else{var i=t;b(t=new O(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ie(o,r,!0,t)&&i}if(i=ie(o=t.g=e,r,!0,t)&&i,i=ie(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(o=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&z(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function oe(e){e.g=se((()=>{e.g=null,e.i&&(e.i=!1,oe(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ne,R),ne.prototype[F]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Y(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)V(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ae extends R{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:oe(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){R.call(this),this.h=e,this.g={}}h(le,R);var ce=[];function ue(e){v(e.g,(function(e,t){this.g.hasOwnProperty(t)&&J(e)}),e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var he=i.JSON.stringify,de=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function pe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}pe.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){O.call(this,"d")}function _e(){O.call(this,"c")}h(ve,O),h(_e,O);var we={},be=null;function Se(){return be=be||new ne}function Ee(e){O.call(this,we.La,e)}function Ce(e){const t=Se();re(t,new Ee(t))}function ke(e,t){O.call(this,we.STAT_EVENT,e),this.stat=t}function Ie(e){const t=Se();re(t,new ke(t,e))}function Te(e,t){O.call(this,we.Ma,e),this.size=t}function xe(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function Ae(){this.g=!0}function Ne(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return he(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}we.La="serverreachability",h(Ee,O),we.STAT_EVENT="statevent",h(ke,O),we.Ma="timingevent",h(Te,O),Ae.prototype.xa=function(){this.g=!1},Ae.prototype.info=function(){};var Pe,Re={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Oe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function De(){}function Le(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Me}function Me(){this.i=null,this.g="",this.h=!1}h(De,pe),De.prototype.g=function(){return new XMLHttpRequest},De.prototype.i=function(){return{}},Pe=new De;var Fe={},Ue={};function je(e,t,n){e.L=1,e.v=ht(ot(t)),e.m=n,e.P=!0,Ve(e,null)}function Ve(e,t){e.F=Date.now(),qe(e),e.A=ot(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),kt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Me,e.g=fn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var s=0;s<i.length;s++){var o=H(n,i[s],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?_(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ce(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function Be(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function ze(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ue:(n=Number(t.substring(n,r)),isNaN(n)?Fe:(r+=1)+n>t.length?Ue:(t=t.slice(r,r+n),e.C=r+n,t))}function qe(e){e.S=Date.now()+e.I,We(e,e.I)}function We(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=xe(c(e.ba,e),t)}function Ke(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function He(e){0==e.j.G||e.J||ln(e.j,e)}function Ge(e){Ke(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Qe(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;an(n),Jt(n)}rn(n),Ie(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=xe(c(n.Za,n),6e3));if(1>=Xe(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else un(n,11)}else if((e.K||n.g==e)&&an(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=dn(r,r.J?r.ia:null,r.W),o.K){tt(r.h,o);var a=o,l=r.L;l&&(a.I=l),a.B&&(Ke(a),qe(a)),r.g=o}else nn(r);0<n.i.length&&Xt(n)}else"stop"!=c[0]&&"close"!=c[0]||un(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?un(n,7):Yt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Ce()}catch(u){}}Le.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Kt(e)?t.j():this.Y(e)},Le.prototype.Y=function(e){try{if(e==this.g)e:{const d=Kt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||Ht(this.g)))){this.J||4!=d||7==t||Ce(),Ke(this);var n=this.g.Z();this.X=n;t:if(Be(this)){var r=Ht(this.g);e="";var s=r.length,o=4==Kt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ge(this),He(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Ie(12),Ge(this),He(this);break e}Ne(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qe(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=ze(this,a),e==Ue){4==d&&(this.s=4,Ie(14),n=!1),Ne(this.i,this.l,null,"[Incomplete Response]");break}if(e==Fe){this.s=4,Ie(15),Ne(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Ne(this.i,this.l,e,null),Qe(this,e)}if(Be(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,Ie(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),sn(h),h.M=!0,Ie(11))}}else Ne(this.i,this.l,a,"[Invalid Chunked Response]"),Ge(this),He(this)}else Ne(this.i,this.l,a,null),Qe(this,a);4==d&&Ge(this),this.o&&!this.J&&(4==d?ln(this.j,this):(this.o=!1,qe(this)))}else(function(e){const t={};e=(e.g&&2<=Kt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=S(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Ie(12)):(this.s=0,Ie(13)),Ge(this),He(this)}}}catch(Rl){}},Le.prototype.cancel=function(){this.J=!0,Ge(this)},Le.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Ce(),Ie(17)),Ge(this),this.s=2,He(this)):We(this,this.S-e)};var Ye=class{constructor(e,t){this.g=e,this.map=t}};function Je(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $e(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Xe(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}Je.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,at(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new bt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,at(this,t[1]||"",!0),this.o=dt(t[2]||""),this.g=dt(t[3]||"",!0),lt(this,t[4]),this.l=dt(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=dt(t[7]||"")):(this.h=!1,this.i=new bt(null,this.h))}function ot(e){return new st(e)}function at(e,t,n){e.j=n?dt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof bt?(e.i=t,function(e,t){t&&!e.j&&(St(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Et(this,t),kt(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,_t)),e.i=new bt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function ht(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?vt:yt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,wt)),e.join("")};var mt,gt=/[#\/\?@]/g,yt=/[#\?:]/g,vt=/[#\?]/g,_t=/[#\?@]/g,wt=/#/g;function bt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function St(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Et(e,t){St(e),t=It(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Ct(e,t){return St(e),t=It(e,t),e.g.has(t)}function kt(e,t,n){Et(e,t),0<n.length&&(e.i=null,e.g.set(It(e,t),d(n)),e.h+=n.length)}function It(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Tt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function xt(){this.g=new fe}function At(e,t,n){const r=n||"";try{rt(e,(function(e,n){let i=e;o(e)&&(i=he(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(SM){throw t.push(r+"type="+encodeURIComponent("_badmap")),SM}}function Nt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Pt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Rt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Ot(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Dt(e)}function Dt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Lt(e){let t="";return v(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Mt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Lt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Ft(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=bt.prototype).add=function(e,t){St(this),this.i=null,e=It(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){St(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){St(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){St(this);let t=[];if("string"===typeof e)Ct(this,e)&&(t=t.concat(this.g.get(It(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return St(this),this.i=null,Ct(this,e=It(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")},h(Nt,pe),Nt.prototype.g=function(){return new Pt(this.l,this.j)},Nt.prototype.i=(mt={},function(){return mt}),h(Pt,ne),(e=Pt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Dt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ot(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Dt(this)),this.g&&(this.readyState=3,Dt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Rt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ot(this):Dt(this),3==this.readyState&&Rt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Ot(this))},e.Qa=function(e){this.g&&(this.response=e,Ot(this))},e.ga=function(){this.g&&Ot(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Pt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Ft,ne);var Ut=/^https?$/i,jt=["POST","PUT"];function Vt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Bt(e),qt(e)}function Bt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function zt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Kt(e)||2!=e.Z()))if(e.u&&4==Kt(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==Kt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var o=String(e.D).match(it)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!Ut.test(o?o.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var a=2<Kt(e)?e.g.statusText:""}catch(l){a=""}e.l=a+" ["+e.Z()+"]",Bt(e)}}finally{qt(e)}}}function qt(e,t){if(e.g){Wt(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(SM){}}}function Wt(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Kt(e){return e.g?e.g.readyState:0}function Ht(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Ll){return null}}function Gt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Qt(e){this.Aa=0,this.i=[],this.j=new Ae,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gt("baseRetryDelayMs",5e3,e),this.cb=Gt("retryDelaySeedMs",1e4,e),this.Wa=Gt("forwardChannelMaxRetries",2,e),this.wa=Gt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Je(e&&e.concurrentRequestLimit),this.Da=new xt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Yt(e){if($t(e),3==e.G){var t=e.U++,n=ot(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),en(e,n),(t=new Le(e,e.j,t)).L=2,t.v=ht(ot(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=fn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),qe(t)}hn(e)}function Jt(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function $t(e){Jt(e),e.u&&(i.clearTimeout(e.u),e.u=null),an(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Xt(e){if(!$e(e.h)&&!e.s){e.s=!0;var t=e.Ga;T||N(),x||(T(),x=!0),A.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=ot(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),en(e,r),e.m&&e.o&&Mt(r,e.m,e.o),n=new Le(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),je(n,r,t)}function en(e,t){e.H&&v(e.H,(function(e,n){ut(t,n,e)})),e.l&&rt({},(function(e,n){ut(t,n,e)}))}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{At(a,e,"req"+n+"_")}catch(Rl){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;T||N(),x||(T(),x=!0),A.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=xe(c(e.Fa,e),cn(e,e.v)),e.v++,!0)}function sn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function on(e){e.g=new Le(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ot(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Mt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ht(ot(t)),n.m=null,n.P=!0,Ve(n,e)}function an(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){an(e),sn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=Se(),new Te(r,n)),Xt(e)}else nn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Xe(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=xe(c(e.Ga,e,t),cn(e,e.B)),e.B++,!0))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:un(e,5);break;case 4:un(e,10);break;case 3:un(e,6);break;default:un(e,2)}}function cn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function un(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||at(r,"https"),ht(r),t?function(e,t){const n=new Ae;if(i.Image){const r=new Image;r.onload=u(Tt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Tt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Tt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Tt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ae;const n=new AbortController,r=setTimeout((()=>{n.abort(),Tt(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?Tt(0,0,!0,t):Tt(0,0,!1,t)})).catch((()=>{clearTimeout(r),Tt(0,0,!1,t)}))}(r.toString(),n)}else Ie(2);e.G=0,e.l&&e.l.sa(t),hn(e),$t(e)}function hn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function dn(e,t,n){var r=n instanceof st?ot(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new st(null);r&&at(o,r),t&&(o.g=t),s&&lt(o,s),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),en(e,r),r}function fn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Ft(new Nt({eb:n})):new Ft(e.pa)).Ha(e.J),t}function pn(){}function mn(){}function gn(e,t){ne.call(this),this.g=new Qt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new _n(this)}function yn(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function vn(){_e.call(this),this.status=1}function _n(e){this.g=e}(e=Ft.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pe.g(),this.v=this.o?me(this.o):me(Pe),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Vt(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(jt,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wt(this),this.u=!0,this.g.send(e),this.u=!1}catch(o){Vt(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),qt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qt(this,!0)),Ft.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?zt(this):this.bb())},e.bb=function(){zt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Kt(this)?this.g.status:-1}catch(mt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(mt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Qt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Ie(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=dn(this,null,this.W),Xt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Le(this,this.j,e);let s=this.o;if(this.S&&(s?(s=_(s),b(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,i,t),ut(n=ot(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),en(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Lt(s)))+"&"+t:this.m&&Mt(n,this.m,s)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,je(i,n,null)):je(i,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||$e(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,on(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=xe(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ie(10),Jt(this),on(this))},e.Za=function(){null!=this.C&&(this.C=null,Jt(this),rn(this),Ie(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Ie(2)):(this.j.info("Failed to ping google.com"),Ie(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=pn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},mn.prototype.g=function(e,t){return new gn(e,t)},h(gn,ne),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Yt(this.g)},gn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=he(e),e=n);t.i.push(new Ye(t.Ya++,e)),3==t.G&&Xt(t)},gn.prototype.N=function(){this.g.l=null,delete this.j,Yt(this.g),delete this.g,gn.aa.N.call(this)},h(yn,ve),h(vn,_e),h(_n,pn),_n.prototype.ua=function(){re(this.g,"a")},_n.prototype.ta=function(e){re(this.g,new yn(e))},_n.prototype.sa=function(e){re(this.g,new vn)},_n.prototype.ra=function(){re(this.g,"b")},mn.prototype.createWebChannel=mn.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,Al=Pl.createWebChannelTransport=function(){return new mn},xl=Pl.getStatEventTarget=function(){return Se()},Tl=Pl.Event=we,Il=Pl.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Re.NO_ERROR=0,Re.TIMEOUT=8,Re.HTTP_ERROR=6,kl=Pl.ErrorCode=Re,Oe.COMPLETE="complete",Cl=Pl.EventType=Oe,ge.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,El=Pl.WebChannel=ge,Pl.FetchXmlHttpFactory=Nt,Ft.prototype.listenOnce=Ft.prototype.L,Ft.prototype.getLastError=Ft.prototype.Ka,Ft.prototype.getLastErrorCode=Ft.prototype.Ba,Ft.prototype.getStatus=Ft.prototype.Z,Ft.prototype.getResponseJson=Ft.prototype.Oa,Ft.prototype.getResponseText=Ft.prototype.oa,Ft.prototype.send=Ft.prototype.ea,Ft.prototype.setWithCredentials=Ft.prototype.Ha,Sl=Pl.XhrIo=Ft}).apply("undefined"!==typeof Nl?Nl:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Rl="@firebase/firestore";class Ol{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ol.UNAUTHENTICATED=new Ol(null),Ol.GOOGLE_CREDENTIALS=new Ol("google-credentials-uid"),Ol.FIRST_PARTY=new Ol("first-party-uid"),Ol.MOCK_USER=new Ol("mock-user");let Dl="11.0.2";const Ll=new jo("@firebase/firestore");function Ml(){return Ll.logLevel}function Fl(e){if(Ll.logLevel<=Do.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Vl);Ll.debug("Firestore (".concat(Dl,"): ").concat(e),...i)}}function Ul(e){if(Ll.logLevel<=Do.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Vl);Ll.error("Firestore (".concat(Dl,"): ").concat(e),...i)}}function jl(e){if(Ll.logLevel<=Do.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Vl);Ll.warn("Firestore (".concat(Dl,"): ").concat(e),...i)}}function Vl(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Bl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Dl,") INTERNAL ASSERTION FAILED: ")+e;throw Ul(t),new Error(t)}function zl(e,t){e||Bl()}function ql(e,t){return e}const Wl={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Kl extends no{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Hl{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Gl{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Ql{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ol.UNAUTHENTICATED)))}shutdown(){}}class Yl{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Jl{constructor(e){this.t=e,this.currentUser=Ol.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){zl(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Hl;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Hl,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{Fl("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Fl("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Hl)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Fl("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(zl("string"==typeof t.accessToken),new Gl(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return zl(null===e||"string"==typeof e),new Ol(e)}}class $l{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Ol.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Xl{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new $l(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Ol.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Zl{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ec{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){zl(void 0===this.o);const n=e=>{null!=e.error&&Fl("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,Fl("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Fl("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Fl("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(zl("string"==typeof e.token),this.R=e.token,new Zl(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function tc(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class nc{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=tc(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function rc(e,t){return e<t?-1:e>t?1:0}function ic(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function sc(e){return e+"\0"}class oc{static now(){return oc.fromMillis(Date.now())}static fromDate(e){return oc.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new oc(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Kl(Wl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Kl(Wl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Kl(Wl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Kl(Wl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?rc(this.nanoseconds,e.nanoseconds):rc(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ac{static fromTimestamp(e){return new ac(e)}static min(){return new ac(new oc(0,0))}static max(){return new ac(new oc(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class lc{constructor(e,t,n){void 0===t?t=0:t>e.length&&Bl(),void 0===n?n=e.length-t:n>e.length-t&&Bl(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===lc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof lc?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class cc extends lc{construct(e,t,n){return new cc(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Kl(Wl.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new cc(e)}static emptyPath(){return new cc([])}}const uc=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hc extends lc{construct(e,t,n){return new hc(e,t,n)}static isValidIdentifier(e){return uc.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hc.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new hc(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Kl(Wl.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Kl(Wl.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Kl(Wl.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Kl(Wl.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hc(t)}static emptyPath(){return new hc([])}}class dc{constructor(e){this.path=e}static fromPath(e){return new dc(cc.fromString(e))}static fromName(e){return new dc(cc.fromString(e).popFirst(5))}static empty(){return new dc(cc.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===cc.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return cc.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new dc(new cc(e.slice()))}}class fc{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function pc(e){return e.fields.find((e=>2===e.kind))}function mc(e){return e.fields.filter((e=>2!==e.kind))}fc.UNKNOWN_ID=-1;class gc{constructor(e,t){this.fieldPath=e,this.kind=t}}class yc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new yc(0,wc.min())}}function vc(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ac.fromTimestamp(1e9===r?new oc(n+1,0):new oc(n,r));return new wc(i,dc.empty(),t)}function _c(e){return new wc(e.readTime,e.key,-1)}class wc{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new wc(ac.min(),dc.empty(),-1)}static max(){return new wc(ac.max(),dc.empty(),-1)}}function bc(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=dc.comparator(e.documentKey,t.documentKey),0!==n?n:rc(e.largestBatchId,t.largestBatchId))}const Sc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ec{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Cc(e){if(e.code!==Wl.FAILED_PRECONDITION||e.message!==Sc)throw e;Fl("LocalStore","Unexpectedly lost primary lease")}class kc{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Bl(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new kc(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof kc?t:kc.resolve(t)}catch(e){return kc.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):kc.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):kc.reject(t)}static resolve(e){return new kc(((t,n)=>{t(e)}))}static reject(e){return new kc(((t,n)=>{n(e)}))}static waitFor(e){return new kc(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=kc.resolve(!1);for(const n of e)t=t.next((e=>e?kc.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new kc(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new kc(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class Ic{static open(e,t,n,r){try{return new Ic(t,e.transaction(r,n))}catch(e){throw new Nc(t,e)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Hl,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Nc(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=Lc(t.target.error);this.V.reject(new Nc(e,n))}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Fl("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Rc(t)}}class Tc{static delete(e){return Fl("SimpleDb","Removing database:",e),Oc(window.indexedDB.deleteDatabase(e)).toPromise()}static p(){if(!to())return!1;if(Tc.S())return!0;const e=Hs(),t=Tc.D(e),n=0<t&&t<10,r=xc(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static S(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.v)}static C(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,t,n){this.name=e,this.version=t,this.F=n,12.2===Tc.D(Hs())&&Ul("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async M(e){return this.db||(Fl("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new Nc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Kl(Wl.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Kl(Wl.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new Nc(e,r))},r.onupgradeneeded=e=>{Fl("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.F.O(t,r.transaction,e.oldVersion,this.version).next((()=>{Fl("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=e=>this.N(e)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.M(e);const t=Ic.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),kc.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(Fl("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}function xc(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class Ac{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Oc(this.B.delete())}}class Nc extends Kl{constructor(e,t){super(Wl.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function Pc(e){return"IndexedDbTransactionError"===e.name}class Rc{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Fl("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Fl("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Oc(n)}add(e){return Fl("SimpleDb","ADD",this.store.name,e,e),Oc(this.store.add(e))}get(e){return Oc(this.store.get(e)).next((t=>(void 0===t&&(t=null),Fl("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Fl("SimpleDb","DELETE",this.store.name,e),Oc(this.store.delete(e))}count(){return Fl("SimpleDb","COUNT",this.store.name),Oc(this.store.count())}U(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new kc(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.W(e,((e,n)=>{t.push(n)})).next((()=>t))}}G(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new kc(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}j(e,t){Fl("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.H=!1;const r=this.cursor(n);return this.W(r,((e,t,n)=>n.delete()))}J(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.W(r,t)}Y(e){const t=this.cursor({});return new kc(((n,r)=>{t.onerror=e=>{const t=Lc(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}W(e,t){const n=[];return new kc(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new Ac(i),o=t(i.primaryKey,i.value,s);if(o instanceof kc){const e=o.catch((e=>(s.done(),kc.reject(e))));n.push(e)}s.isDone?r():null===s.K?i.continue():i.continue(s.K)}})).next((()=>kc.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Oc(e){return new kc(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Lc(e.target.error);n(t)}}))}let Dc=!1;function Lc(e){const t=Tc.D(Hs());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Kl("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Dc||(Dc=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Mc{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){Fl("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{Fl("IndexBackfiller","Documents written: ".concat(await this.Z.ee()))}catch(e){Pc(e)?Fl("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await Cc(e)}await this.X(6e4)}))}}class Fc{constructor(e,t){this.localStore=e,this.persistence=t}async ee(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.te(t,e)))}te(e,t){const n=new Set;let r=t,i=!0;return kc.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return Fl("IndexBackfiller","Processing collection: ".concat(t)),this.ne(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}ne(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.re(r,n))).next((n=>(Fl("IndexBackfiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}re(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=_c(t);bc(r,n)>0&&(n=r)})),new wc(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Uc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function jc(e){return null==e}function Vc(e){return 0===e&&1/e==-1/0}function Bc(e){return"number"==typeof e&&Number.isInteger(e)&&!Vc(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function zc(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Wc(t)),t=qc(e.get(n),t);return Wc(t)}function qc(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function Wc(e){return e+"\x01\x01"}function Kc(e){const t=e.length;if(zl(t>=2),2===t)return zl("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),cc.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&Bl(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:Bl()}s=t+2}return new cc(r)}Uc.oe=-1;const Hc=["userId","batchId"];function Gc(e,t){return[e,zc(t)]}function Qc(e,t,n){return[e,zc(t),n]}const Yc={},Jc=["prefixPath","collectionGroup","readTime","documentId"],$c=["prefixPath","collectionGroup","documentId"],Xc=["collectionGroup","readTime","prefixPath","documentId"],Zc=["canonicalId","targetId"],eu=["targetId","path"],tu=["path","targetId"],nu=["collectionId","parent"],ru=["indexId","uid"],iu=["uid","sequenceNumber"],su=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ou=["indexId","uid","orderedDocumentKey"],au=["userId","collectionPath","documentId"],lu=["userId","collectionPath","largestBatchId"],cu=["userId","collectionGroup","largestBatchId"],uu=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],hu=[...uu,"documentOverlays"],du=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],fu=du,pu=[...fu,"indexConfiguration","indexState","indexEntries"],mu=pu,gu=[...pu,"globals"];class yu extends Ec{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function vu(e,t){const n=ql(e);return Tc.C(n._e,t)}function _u(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function wu(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function bu(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Su{constructor(e,t){this.comparator=e,this.root=t||Cu.EMPTY}insert(e,t){return new Su(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Cu.BLACK,null,null))}remove(e){return new Su(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Cu.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Eu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Eu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Eu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Eu(this.root,e,this.comparator,!0)}}class Eu{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Cu{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Cu.RED,this.left=null!=r?r:Cu.EMPTY,this.right=null!=i?i:Cu.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Cu(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Cu.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Cu.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Cu.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Cu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Bl();if(this.right.isRed())throw Bl();const e=this.left.check();if(e!==this.right.check())throw Bl();return e+(this.isRed()?0:1)}}Cu.EMPTY=null,Cu.RED=!0,Cu.BLACK=!1,Cu.EMPTY=new class{constructor(){this.size=0}get key(){throw Bl()}get value(){throw Bl()}get color(){throw Bl()}get left(){throw Bl()}get right(){throw Bl()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Cu(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ku{constructor(e){this.comparator=e,this.data=new Su(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Iu(this.data.getIterator())}getIteratorFrom(e){return new Iu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof ku))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new ku(this.comparator);return t.data=e,t}}class Iu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Tu(e){return e.hasNext()?e.getNext():void 0}class xu{constructor(e){this.fields=e,e.sort(hc.comparator)}static empty(){return new xu([])}unionWith(e){let t=new ku(hc.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new xu(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ic(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Au extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Nu{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Au("Invalid base64 string: "+e):e}}(e);return new Nu(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Nu(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return rc(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nu.EMPTY_BYTE_STRING=new Nu("");const Pu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ru(e){if(zl(!!e),"string"==typeof e){let t=0;const n=Pu.exec(e);if(zl(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ou(e.seconds),nanos:Ou(e.nanos)}}function Ou(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Du(e){return"string"==typeof e?Nu.fromBase64String(e):Nu.fromUint8Array(e)}function Lu(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Mu(e){const t=e.mapValue.fields.__previous_value__;return Lu(t)?Mu(t):t}function Fu(e){const t=Ru(e.mapValue.fields.__local_write_time__.timestampValue);return new oc(t.seconds,t.nanos)}class Uu{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class ju{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ju("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ju&&e.projectId===this.projectId&&e.database===this.database}}const Vu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Bu={nullValue:"NULL_VALUE"};function zu(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Lu(e)?4:sh(e)?9007199254740991:rh(e)?10:11:Bl()}function qu(e,t){if(e===t)return!0;const n=zu(e);if(n!==zu(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Fu(e).isEqual(Fu(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Ru(e.timestampValue),r=Ru(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Du(e.bytesValue).isEqual(Du(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Ou(e.geoPointValue.latitude)===Ou(t.geoPointValue.latitude)&&Ou(e.geoPointValue.longitude)===Ou(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Ou(e.integerValue)===Ou(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Ou(e.doubleValue),r=Ou(t.doubleValue);return n===r?Vc(n)===Vc(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ic(e.arrayValue.values||[],t.arrayValue.values||[],qu);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(_u(n)!==_u(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!qu(n[i],r[i])))return!1;return!0}(e,t);default:return Bl()}}function Wu(e,t){return void 0!==(e.values||[]).find((e=>qu(e,t)))}function Ku(e,t){if(e===t)return 0;const n=zu(e),r=zu(t);if(n!==r)return rc(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return rc(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Ou(e.integerValue||e.doubleValue),r=Ou(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Hu(e.timestampValue,t.timestampValue);case 4:return Hu(Fu(e),Fu(t));case 5:return rc(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Du(e),r=Du(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=rc(n[i],r[i]);if(0!==e)return e}return rc(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=rc(Ou(e.latitude),Ou(t.latitude));return 0!==n?n:rc(Ou(e.longitude),Ou(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Gu(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const o=e.fields||{},a=t.fields||{},l=null===(n=o.value)||void 0===n?void 0:n.arrayValue,c=null===(r=a.value)||void 0===r?void 0:r.arrayValue,u=rc((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(s=null==c?void 0:c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:Gu(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Vu.mapValue&&t===Vu.mapValue)return 0;if(e===Vu.mapValue)return 1;if(t===Vu.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=rc(r[o],s[o]);if(0!==e)return e;const t=Ku(n[r[o]],i[s[o]]);if(0!==t)return t}return rc(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Bl()}}function Hu(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return rc(e,t);const n=Ru(e),r=Ru(t),i=rc(n.seconds,r.seconds);return 0!==i?i:rc(n.nanos,r.nanos)}function Gu(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Ku(n[i],r[i]);if(e)return e}return rc(n.length,r.length)}function Qu(e){return Yu(e)}function Yu(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Ru(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Du(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return dc.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Yu(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Yu(e.fields[i]));return n+"}"}(e.mapValue):Bl()}function Ju(e){switch(zu(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Mu(e);return t?16+Ju(t):16;case 5:return 2*e.stringValue.length;case 6:return Du(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+Ju(t)),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return wu(e.fields,((e,n)=>{t+=e.length+Ju(n)})),t}(e.mapValue);default:throw Bl()}}function $u(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Xu(e){return!!e&&"integerValue"in e}function Zu(e){return!!e&&"arrayValue"in e}function eh(e){return!!e&&"nullValue"in e}function th(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function nh(e){return!!e&&"mapValue"in e}function rh(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ih(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return wu(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=ih(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ih(e.arrayValue.values[n]);return t}return Object.assign({},e)}function sh(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}const oh={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function ah(e){return"nullValue"in e?Bu:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?$u(ju.empty(),dc.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?rh(e)?oh:{mapValue:{}}:Bl()}function lh(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?$u(ju.empty(),dc.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?oh:"mapValue"in e?rh(e)?{mapValue:{}}:Vu:Bl()}function ch(e,t){const n=Ku(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function uh(e,t){const n=Ku(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class hh{constructor(e){this.value=e}static empty(){return new hh({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!nh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ih(t)}setAll(e){let t=hc.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=ih(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());nh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];nh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){wu(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new hh(ih(this.value))}}function dh(e){const t=[];return wu(e.fields,((e,n)=>{const r=new hc([e]);if(nh(n)){const e=dh(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new xu(t)}class fh{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new fh(e,0,ac.min(),ac.min(),ac.min(),hh.empty(),0)}static newFoundDocument(e,t,n,r){return new fh(e,1,t,ac.min(),n,r,0)}static newNoDocument(e,t){return new fh(e,2,t,ac.min(),ac.min(),hh.empty(),0)}static newUnknownDocument(e,t){return new fh(e,3,t,ac.min(),ac.min(),hh.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ac.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hh.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hh.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ac.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof fh&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new fh(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class ph{constructor(e,t){this.position=e,this.inclusive=t}}function mh(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?dc.comparator(dc.fromName(o.referenceValue),n.key):Ku(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function gh(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!qu(e.position[n],t.position[n]))return!1;return!0}class yh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function vh(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class _h{}class wh extends _h{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Nh(e,t,n):"array-contains"===t?new Dh(e,n):"in"===t?new Lh(e,n):"not-in"===t?new Mh(e,n):"array-contains-any"===t?new Fh(e,n):new wh(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Ph(e,n):new Rh(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ku(t,this.value)):null!==t&&zu(this.value)===zu(t)&&this.matchesComparison(Ku(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Bl()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class bh extends _h{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new bh(e,t)}matches(e){return Sh(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Sh(e){return"and"===e.op}function Eh(e){return"or"===e.op}function Ch(e){return kh(e)&&Sh(e)}function kh(e){for(const t of e.filters)if(t instanceof bh)return!1;return!0}function Ih(e){if(e instanceof wh)return e.field.canonicalString()+e.op.toString()+Qu(e.value);if(Ch(e))return e.filters.map((e=>Ih(e))).join(",");{const t=e.filters.map((e=>Ih(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function Th(e,t){return e instanceof wh?function(e,t){return t instanceof wh&&e.op===t.op&&e.field.isEqual(t.field)&&qu(e.value,t.value)}(e,t):e instanceof bh?function(e,t){return t instanceof bh&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Th(n,t.filters[r])),!0)}(e,t):void Bl()}function xh(e,t){const n=e.filters.concat(t);return bh.create(n,e.op)}function Ah(e){return e instanceof wh?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Qu(e.value))}(e):e instanceof bh?function(e){return e.op.toString()+" {"+e.getFilters().map(Ah).join(" ,")+"}"}(e):"Filter"}class Nh extends wh{constructor(e,t,n){super(e,t,n),this.key=dc.fromName(n.referenceValue)}matches(e){const t=dc.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ph extends wh{constructor(e,t){super(e,"in",t),this.keys=Oh("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Rh extends wh{constructor(e,t){super(e,"not-in",t),this.keys=Oh("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Oh(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>dc.fromName(e.referenceValue)))}class Dh extends wh{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Zu(t)&&Wu(t.arrayValue,this.value)}}class Lh extends wh{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Wu(this.value.arrayValue,t)}}class Mh extends wh{constructor(e,t){super(e,"not-in",t)}matches(e){if(Wu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Wu(this.value.arrayValue,t)}}class Fh extends wh{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Zu(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Wu(this.value.arrayValue,e)))}}class Uh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ue=null}}function jh(e){return new Uh(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Vh(e){const t=ql(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Ih(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),jc(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Qu(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Qu(e))).join(",")),t.ue=e}return t.ue}function Bh(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!vh(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Th(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!gh(e.startAt,t.startAt)&&gh(e.endAt,t.endAt)}function zh(e){return dc.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function qh(e,t){return e.filters.filter((e=>e instanceof wh&&e.field.isEqual(t)))}function Wh(e,t,n){let r=Bu,i=!0;for(const s of qh(e,t)){let e=Bu,t=!0;switch(s.op){case"<":case"<=":e=ah(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=Bu}ch({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];ch({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Kh(e,t,n){let r=Vu,i=!0;for(const s of qh(e,t)){let e=Vu,t=!0;switch(s.op){case">=":case">":e=lh(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=Vu}uh({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];uh({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class Hh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Gh(e,t,n,r,i,s,o,a){return new Hh(e,t,n,r,i,s,o,a)}function Qh(e){return new Hh(e)}function Yh(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Jh(e){return null!==e.collectionGroup}function $h(e){const t=ql(e);if(null===t.ce){t.ce=[];const e=new Set;for(const i of t.explicitOrderBy)t.ce.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new ku(hc.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new yh(r,n))})),e.has(hc.keyField().canonicalString())||t.ce.push(new yh(hc.keyField(),n))}return t.ce}function Xh(e){const t=ql(e);return t.le||(t.le=Zh(t,$h(e))),t.le}function Zh(e,t){if("F"===e.limitType)return jh(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new yh(e.field,t)}));const n=e.endAt?new ph(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new ph(e.startAt.position,e.startAt.inclusive):null;return jh(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function ed(e,t){const n=e.filters.concat([t]);return new Hh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function td(e,t,n){return new Hh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function nd(e,t){return Bh(Xh(e),Xh(t))&&e.limitType===t.limitType}function rd(e){return"".concat(Vh(Xh(e)),"|lt:").concat(e.limitType)}function id(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>Ah(e))).join(", "),"]")),jc(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Qu(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Qu(e))).join(",")),"Target(".concat(t,")")}(Xh(e)),"; limitType=").concat(e.limitType,")")}function sd(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):dc.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of $h(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=mh(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,$h(e),t))&&!(e.endAt&&!function(e,t,n){const r=mh(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,$h(e),t))}(e,t)}function od(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function ad(e){return(t,n)=>{let r=!1;for(const i of $h(e)){const e=ld(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function ld(e,t,n){const r=e.field.isKeyField()?dc.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Ku(r,i):Bl()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Bl()}}class cd{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){wu(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return bu(this.inner)}size(){return this.innerSize}}const ud=new Su(dc.comparator);function hd(){return ud}const dd=new Su(dc.comparator);function fd(){let e=dd;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function pd(e){let t=dd;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function md(){return yd()}function gd(){return yd()}function yd(){return new cd((e=>e.toString()),((e,t)=>e.isEqual(t)))}const vd=new Su(dc.comparator),_d=new ku(dc.comparator);function wd(){let e=_d;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const bd=new ku(rc);function Sd(){return bd}function Ed(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vc(t)?"-0":t}}function Cd(e){return{integerValue:""+e}}function kd(e,t){return Bc(t)?Cd(t):Ed(e,t)}class Id{constructor(){this._=void 0}}function Td(e,t,n){return e instanceof Nd?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Lu(t)&&(t=Mu(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Pd?Rd(e,t):e instanceof Od?Dd(e,t):function(e,t){const n=Ad(e,t),r=Md(n)+Md(e.Pe);return Xu(n)&&Xu(e.Pe)?Cd(r):Ed(e.serializer,r)}(e,t)}function xd(e,t,n){return e instanceof Pd?Rd(e,t):e instanceof Od?Dd(e,t):n}function Ad(e,t){return e instanceof Ld?function(e){return Xu(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Nd extends Id{}class Pd extends Id{constructor(e){super(),this.elements=e}}function Rd(e,t){const n=Fd(t);for(const r of e.elements)n.some((e=>qu(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Od extends Id{constructor(e){super(),this.elements=e}}function Dd(e,t){let n=Fd(t);for(const r of e.elements)n=n.filter((e=>!qu(e,r)));return{arrayValue:{values:n}}}class Ld extends Id{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Md(e){return Ou(e.integerValue||e.doubleValue)}function Fd(e){return Zu(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Ud{constructor(e,t){this.field=e,this.transform=t}}class jd{constructor(e,t){this.version=e,this.transformResults=t}}class Vd{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Vd}static exists(e){return new Vd(void 0,e)}static updateTime(e){return new Vd(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bd(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class zd{}function qd(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Zd(e.key,Vd.none()):new Qd(e.key,e.data,Vd.none());{const n=e.data,r=hh.empty();let i=new ku(hc.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Yd(e.key,r,new xu(i.toArray()),Vd.none())}}function Wd(e,t,n){e instanceof Qd?function(e,t,n){const r=e.value.clone(),i=$d(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Yd?function(e,t,n){if(!Bd(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=$d(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Jd(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Kd(e,t,n,r){return e instanceof Qd?function(e,t,n,r){if(!Bd(e.precondition,t))return n;const i=e.value.clone(),s=Xd(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Yd?function(e,t,n,r){if(!Bd(e.precondition,t))return n;const i=Xd(e.fieldTransforms,r,t),s=t.data;return s.setAll(Jd(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Bd(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Hd(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Ad(r.transform,e||null);null!=i&&(null===n&&(n=hh.empty()),n.set(r.field,i))}return n||null}function Gd(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ic(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Pd&&t instanceof Pd||e instanceof Od&&t instanceof Od?ic(e.elements,t.elements,qu):e instanceof Ld&&t instanceof Ld?qu(e.Pe,t.Pe):e instanceof Nd&&t instanceof Nd}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Qd extends zd{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Yd extends zd{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Jd(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function $d(e,t,n){const r=new Map;zl(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,xd(o,a,n[i]))}return r}function Xd(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Td(e,s,t))}return r}class Zd extends zd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ef extends zd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class tf{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Wd(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Kd(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Kd(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=gd();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=qd(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(ac.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),wd())}isEqual(e){return this.batchId===e.batchId&&ic(this.mutations,e.mutations,((e,t)=>Gd(e,t)))&&ic(this.baseMutations,e.baseMutations,((e,t)=>Gd(e,t)))}}class nf{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){zl(e.mutations.length===n.length);let r=vd;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new nf(e,t,n,r)}}class rf{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class sf{constructor(e,t){this.count=e,this.unchangedNames=t}}var of,af;function lf(e){switch(e){default:return Bl();case Wl.CANCELLED:case Wl.UNKNOWN:case Wl.DEADLINE_EXCEEDED:case Wl.RESOURCE_EXHAUSTED:case Wl.INTERNAL:case Wl.UNAVAILABLE:case Wl.UNAUTHENTICATED:return!1;case Wl.INVALID_ARGUMENT:case Wl.NOT_FOUND:case Wl.ALREADY_EXISTS:case Wl.PERMISSION_DENIED:case Wl.FAILED_PRECONDITION:case Wl.ABORTED:case Wl.OUT_OF_RANGE:case Wl.UNIMPLEMENTED:case Wl.DATA_LOSS:return!0}}function cf(e){if(void 0===e)return Ul("GRPC error has no .code"),Wl.UNKNOWN;switch(e){case of.OK:return Wl.OK;case of.CANCELLED:return Wl.CANCELLED;case of.UNKNOWN:return Wl.UNKNOWN;case of.DEADLINE_EXCEEDED:return Wl.DEADLINE_EXCEEDED;case of.RESOURCE_EXHAUSTED:return Wl.RESOURCE_EXHAUSTED;case of.INTERNAL:return Wl.INTERNAL;case of.UNAVAILABLE:return Wl.UNAVAILABLE;case of.UNAUTHENTICATED:return Wl.UNAUTHENTICATED;case of.INVALID_ARGUMENT:return Wl.INVALID_ARGUMENT;case of.NOT_FOUND:return Wl.NOT_FOUND;case of.ALREADY_EXISTS:return Wl.ALREADY_EXISTS;case of.PERMISSION_DENIED:return Wl.PERMISSION_DENIED;case of.FAILED_PRECONDITION:return Wl.FAILED_PRECONDITION;case of.ABORTED:return Wl.ABORTED;case of.OUT_OF_RANGE:return Wl.OUT_OF_RANGE;case of.UNIMPLEMENTED:return Wl.UNIMPLEMENTED;case of.DATA_LOSS:return Wl.DATA_LOSS;default:return Bl()}}(af=of||(of={}))[af.OK=0]="OK",af[af.CANCELLED=1]="CANCELLED",af[af.UNKNOWN=2]="UNKNOWN",af[af.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",af[af.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",af[af.NOT_FOUND=5]="NOT_FOUND",af[af.ALREADY_EXISTS=6]="ALREADY_EXISTS",af[af.PERMISSION_DENIED=7]="PERMISSION_DENIED",af[af.UNAUTHENTICATED=16]="UNAUTHENTICATED",af[af.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",af[af.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",af[af.ABORTED=10]="ABORTED",af[af.OUT_OF_RANGE=11]="OUT_OF_RANGE",af[af.UNIMPLEMENTED=12]="UNIMPLEMENTED",af[af.INTERNAL=13]="INTERNAL",af[af.UNAVAILABLE=14]="UNAVAILABLE",af[af.DATA_LOSS=15]="DATA_LOSS";let uf=null;function hf(){return new TextEncoder}const df=new vl([4294967295,4294967295],0);function ff(e){const t=hf().encode(e),n=new _l;return n.update(t),new Uint8Array(n.digest())}function pf(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new vl([n,r],0),new vl([i,s],0)]}class mf{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new gf("Invalid padding: ".concat(t));if(n<0)throw new gf("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new gf("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new gf("Invalid padding when bitmap length is 0: ".concat(t));this.Te=8*e.length-t,this.Ie=vl.fromNumber(this.Te)}Ee(e,t,n){let r=e.add(t.multiply(vl.fromNumber(n)));return 1===r.compare(df)&&(r=new vl([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ie).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=ff(e),[n,r]=pf(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new mf(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Te)return;const t=ff(e),[n,r]=pf(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class gf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class yf{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,vf.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new yf(ac.min(),r,new Su(rc),hd(),wd())}}class vf{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new vf(n,t,wd(),wd(),wd())}}class _f{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class wf{constructor(e,t){this.targetId=e,this.me=t}}class bf{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Nu.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Sf{constructor(){this.fe=0,this.ge=kf(),this.pe=Nu.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=wd(),t=wd(),n=wd();return this.ge.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Bl()}})),new vf(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=kf()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,zl(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Ef{constructor(e){this.Le=e,this.Be=new Map,this.ke=hd(),this.qe=Cf(),this.Qe=Cf(),this.Ke=new Su(rc)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.je(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.De(e.resumeToken));break;default:Bl()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.me.count,r=this.Ye(t);if(r){const i=r.target;if(zh(i))if(0===n){const e=new dc(i.path);this.We(t,e,fh.newNoDocument(e,ac.min()))}else zl(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),i=n?this.et(n,e,r):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==uf||uf.tt(function(e,t,n,r,i){var s,o,a,l,c,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==d?void 0:d.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.me,this.Le.nt(),n,i))}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=Du(n).toUint8Array()}catch(e){if(e instanceof Au)return jl("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new mf(s,r,i)}catch(e){return jl(e instanceof gf?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Te?null:o}et(e,t,n){return t.me.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.nt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.Be.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&zh(i.target)){const t=new dc(i.target.path);this.st(t).has(r)||this.ot(r,t)||this.We(r,t,fh.newNoDocument(t,e))}n.be&&(t.set(r,n.ve()),n.Ce())}}));let n=wd();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.ke.forEach(((t,n)=>n.setReadTime(e)));const r=new yf(e,t,this.Ke,this.ke,n);return this.ke=hd(),this.qe=Cf(),this.Qe=Cf(),this.Ke=new Su(rc),r}Ue(e,t){if(!this.je(e))return;const n=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.ot(e,t)?r.Fe(t,1):r.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Be.get(e);return t||(t=new Sf,this.Be.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new ku(rc),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new ku(rc),this.qe=this.qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||Fl("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new Sf),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}ot(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Cf(){return new Su(dc.comparator)}function kf(){return new Su(dc.comparator)}const If={asc:"ASCENDING",desc:"DESCENDING"},Tf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xf={and:"AND",or:"OR"};class Af{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Nf(e,t){return e.useProto3Json||jc(t)?t:{value:t}}function Pf(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Rf(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Of(e,t){return Pf(e,t.toTimestamp())}function Df(e){return zl(!!e),ac.fromTimestamp(function(e){const t=Ru(e);return new oc(t.seconds,t.nanos)}(e))}function Lf(e,t){return Mf(e,t).canonicalString()}function Mf(e,t){const n=function(e){return new cc(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Ff(e){const t=cc.fromString(e);return zl(sp(t)),t}function Uf(e,t){return Lf(e.databaseId,t.path)}function jf(e,t){const n=Ff(t);if(n.get(1)!==e.databaseId.projectId)throw new Kl(Wl.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Kl(Wl.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new dc(qf(n))}function Vf(e,t){return Lf(e.databaseId,t)}function Bf(e){const t=Ff(e);return 4===t.length?cc.emptyPath():qf(t)}function zf(e){return new cc(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function qf(e){return zl(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Wf(e,t,n){return{name:Uf(e,t),fields:n.value.mapValue.fields}}function Kf(e,t,n){const r=jf(e,t.name),i=Df(t.updateTime),s=t.createTime?Df(t.createTime):ac.min(),o=new hh({mapValue:{fields:t.fields}}),a=fh.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Hf(e,t){let n;if(t instanceof Qd)n={update:Wf(e,t.key,t.value)};else if(t instanceof Zd)n={delete:Uf(e,t.key)};else if(t instanceof Yd)n={update:Wf(e,t.key,t.data),updateMask:ip(t.fieldMask)};else{if(!(t instanceof ef))return Bl();n={verify:Uf(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Nd)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Pd)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Od)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ld)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw Bl()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Of(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Bl()}(e,t.precondition)),n}function Gf(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Vd.updateTime(Df(e.updateTime)):void 0!==e.exists?Vd.exists(e.exists):Vd.none()}(t.currentDocument):Vd.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)zl("REQUEST_TIME"===t.setToServerValue),n=new Nd;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Pd(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Od(e)}else"increment"in t?n=new Ld(e,t.increment):Bl();const r=hc.fromServerFormat(t.fieldPath);return new Ud(r,n)}(e,t))):[];if(t.update){t.update.name;const i=jf(e,t.update.name),s=new hh({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new xu(t.map((e=>hc.fromServerFormat(e))))}(t.updateMask);return new Yd(i,s,e,n,r)}return new Qd(i,s,n,r)}if(t.delete){const r=jf(e,t.delete);return new Zd(r,n)}if(t.verify){const r=jf(e,t.verify);return new ef(r,n)}return Bl()}function Qf(e,t){return{documents:[Vf(e,t.path)]}}function Yf(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Vf(e,i);const s=function(e){if(0!==e.length)return rp(bh.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:tp(e.field),direction:Xf(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Nf(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ct:n,parent:i}}function Jf(e){let t=Bf(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){zl(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=$f(e);return t instanceof bh&&Ch(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new yh(np(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,jc(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new ph(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new ph(n,t)}(n.endAt)),Gh(t,i,o,s,a,"F",l,c)}function $f(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=np(e.unaryFilter.field);return wh.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=np(e.unaryFilter.field);return wh.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=np(e.unaryFilter.field);return wh.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=np(e.unaryFilter.field);return wh.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Bl()}}(e):void 0!==e.fieldFilter?function(e){return wh.create(np(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Bl()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return bh.create(e.compositeFilter.filters.map((e=>$f(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Bl()}}(e.compositeFilter.op))}(e):Bl()}function Xf(e){return If[e]}function Zf(e){return Tf[e]}function ep(e){return xf[e]}function tp(e){return{fieldPath:e.canonicalString()}}function np(e){return hc.fromServerFormat(e.fieldPath)}function rp(e){return e instanceof wh?function(e){if("=="===e.op){if(th(e.value))return{unaryFilter:{field:tp(e.field),op:"IS_NAN"}};if(eh(e.value))return{unaryFilter:{field:tp(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(th(e.value))return{unaryFilter:{field:tp(e.field),op:"IS_NOT_NAN"}};if(eh(e.value))return{unaryFilter:{field:tp(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:tp(e.field),op:Zf(e.op),value:e.value}}}(e):e instanceof bh?function(e){const t=e.getFilters().map((e=>rp(e)));return 1===t.length?t[0]:{compositeFilter:{op:ep(e.op),filters:t}}}(e):Bl()}function ip(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function sp(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class op{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ac.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ac.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Nu.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new op(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new op(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new op(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new op(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class ap{constructor(e){this.ht=e}}function lp(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:cp(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Uf(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Pf(e,t.version.toTimestamp()),createTime:Pf(e,t.createTime.toTimestamp())}}(e.ht,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:up(t.version)};else{if(!t.isUnknownDocument())return Bl();r.unknownDocument={path:n.path.toArray(),version:up(t.version)}}return r}function cp(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function up(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function hp(e){const t=new oc(e.seconds,e.nanoseconds);return ac.fromTimestamp(t)}function dp(e,t){const n=(t.baseMutations||[]).map((t=>Gf(e.ht,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>Gf(e.ht,t))),i=oc.fromMillis(t.localWriteTimeMs);return new tf(t.batchId,i,n,r)}function fp(e){const t=hp(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?hp(e.lastLimboFreeSnapshotVersion):ac.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return zl(1===e.documents.length),Xh(Qh(Bf(e.documents[0])))}(e.query):function(e){return Xh(Jf(e))}(e.query),new op(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,Nu.fromBase64String(e.resumeToken))}function pp(e,t){const n=up(t.snapshotVersion),r=up(t.lastLimboFreeSnapshotVersion);let i;i=zh(t.target)?Qf(e.ht,t.target):Yf(e.ht,t.target).ct;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Vh(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function mp(e){const t=Jf({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?td(t,t.limit,"L"):t}function gp(e,t){return new rf(t.largestBatchId,Gf(e.ht,t.overlayMutation))}function yp(e,t){const n=t.path.lastSegment();return[e,zc(t.path.popLast()),n]}function vp(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:up(r.readTime),documentKey:zc(r.documentKey.path),largestBatchId:r.largestBatchId}}class _p{getBundleMetadata(e,t){return wp(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:hp(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return wp(e).put(function(e){return{bundleId:e.id,createTime:up(Df(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return bp(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:mp(e.bundledQuery),readTime:hp(e.readTime)}}(e)}))}saveNamedQuery(e,t){return bp(e).put(function(e){return{name:e.name,readTime:up(Df(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function wp(e){return vu(e,"bundles")}function bp(e){return vu(e,"namedQueries")}class Sp{constructor(e,t){this.serializer=e,this.userId=t}static Pt(e,t){const n=t.uid||"";return new Sp(e,n)}getOverlay(e,t){return Ep(e).get(yp(this.userId,t)).next((e=>e?gp(this.serializer,e):null))}getOverlays(e,t){const n=md();return kc.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new rf(t,i);r.push(this.Tt(e,s))})),kc.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(zc(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(Ep(e).j("collectionPathOverlayIndex",r))})),kc.waitFor(i)}getOverlaysForCollection(e,t,n){const r=md(),i=zc(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Ep(e).U("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=gp(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=md();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ep(e).J({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=gp(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}Tt(e,t){return Ep(e).put(function(e,t,n){const[r,i,s]=yp(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Hf(e.ht,n.mutation)}}(this.serializer,this.userId,t))}}function Ep(e){return vu(e,"documentOverlays")}class Cp{It(e){return vu(e,"globals")}getSessionToken(e){return this.It(e).get("sessionToken").next((e=>{const t=null==e?void 0:e.value;return t?Nu.fromUint8Array(t):Nu.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.It(e).put({name:"sessionToken",value:t.toUint8Array()})}}class kp{constructor(){}Et(e,t){this.dt(e,t),t.At()}dt(e,t){if("nullValue"in e)this.Rt(t,5);else if("booleanValue"in e)this.Rt(t,10),t.Vt(e.booleanValue?1:0);else if("integerValue"in e)this.Rt(t,15),t.Vt(Ou(e.integerValue));else if("doubleValue"in e){const n=Ou(e.doubleValue);isNaN(n)?this.Rt(t,13):(this.Rt(t,15),Vc(n)?t.Vt(0):t.Vt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Rt(t,20),"string"==typeof n&&(n=Ru(n)),t.ft("".concat(n.seconds||"")),t.Vt(n.nanos||0)}else if("stringValue"in e)this.gt(e.stringValue,t),this.yt(t);else if("bytesValue"in e)this.Rt(t,30),t.wt(Du(e.bytesValue)),this.yt(t);else if("referenceValue"in e)this.St(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Rt(t,45),t.Vt(n.latitude||0),t.Vt(n.longitude||0)}else"mapValue"in e?sh(e)?this.Rt(t,Number.MAX_SAFE_INTEGER):rh(e)?this.bt(e.mapValue,t):(this.Dt(e.mapValue,t),this.yt(t)):"arrayValue"in e?(this.vt(e.arrayValue,t),this.yt(t)):Bl()}gt(e,t){this.Rt(t,25),this.Ct(e,t)}Ct(e,t){t.ft(e)}Dt(e,t){const n=e.fields||{};this.Rt(t,55);for(const r of Object.keys(n))this.gt(r,t),this.dt(n[r],t)}bt(e,t){var n,r;const i=e.fields||{};this.Rt(t,53);const s="value",o=(null===(r=null===(n=i[s].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.Rt(t,15),t.Vt(Ou(o)),this.gt(s,t),this.dt(i[s],t)}vt(e,t){const n=e.values||[];this.Rt(t,50);for(const r of n)this.dt(r,t)}St(e,t){this.Rt(t,37),dc.fromName(e).path.forEach((e=>{this.Rt(t,60),this.Ct(e,t)}))}Rt(e,t){e.Vt(t)}yt(e){e.Vt(2)}}function Ip(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Tp(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=Ip(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}kp.Ft=new kp;class xp{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Mt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.xt(n.value),n=t.next();this.Ot()}Nt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Lt(n.value),n=t.next();this.Bt()}kt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.xt(e);else if(e<2048)this.xt(960|e>>>6),this.xt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.xt(480|e>>>12),this.xt(128|63&e>>>6),this.xt(128|63&e);else{const e=t.codePointAt(0);this.xt(240|e>>>18),this.xt(128|63&e>>>12),this.xt(128|63&e>>>6),this.xt(128|63&e)}}this.Ot()}qt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Lt(e);else if(e<2048)this.Lt(960|e>>>6),this.Lt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Lt(480|e>>>12),this.Lt(128|63&e>>>6),this.Lt(128|63&e);else{const e=t.codePointAt(0);this.Lt(240|e>>>18),this.Lt(128|63&e>>>12),this.Lt(128|63&e>>>6),this.Lt(128|63&e)}}this.Bt()}Qt(e){const t=this.Kt(e),n=Tp(t);this.$t(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Ut(e){const t=this.Kt(e),n=Tp(t);this.$t(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Wt(){this.Gt(255),this.Gt(255)}zt(){this.jt(255),this.jt(255)}reset(){this.position=0}seed(e){this.$t(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ht(){return this.buffer.slice(0,this.position)}Kt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}xt(e){const t=255&e;0===t?(this.Gt(0),this.Gt(255)):255===t?(this.Gt(255),this.Gt(0)):this.Gt(t)}Lt(e){const t=255&e;0===t?(this.jt(0),this.jt(255)):255===t?(this.jt(255),this.jt(0)):this.jt(e)}Ot(){this.Gt(0),this.Gt(1)}Bt(){this.jt(0),this.jt(1)}Gt(e){this.$t(1),this.buffer[this.position++]=e}jt(e){this.$t(1),this.buffer[this.position++]=~e}$t(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class Ap{constructor(e){this.Jt=e}wt(e){this.Jt.Mt(e)}ft(e){this.Jt.kt(e)}Vt(e){this.Jt.Qt(e)}At(){this.Jt.Wt()}}class Np{constructor(e){this.Jt=e}wt(e){this.Jt.Nt(e)}ft(e){this.Jt.qt(e)}Vt(e){this.Jt.Ut(e)}At(){this.Jt.zt()}}class Pp{constructor(){this.Jt=new xp,this.Yt=new Ap(this.Jt),this.Zt=new Np(this.Jt)}seed(e){this.Jt.seed(e)}Xt(e){return 0===e?this.Yt:this.Zt}Ht(){return this.Jt.Ht()}reset(){this.Jt.reset()}}class Rp{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}en(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Rp(this.indexId,this.documentKey,this.arrayValue,n)}}function Op(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=Dp(e.arrayValue,t.arrayValue),0!==n?n:(n=Dp(e.directionalValue,t.directionalValue),0!==n?n:dc.comparator(e.documentKey,t.documentKey)))}function Dp(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class Lp{constructor(e){this.tn=new ku(((e,t)=>hc.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.nn=e.orderBy,this.rn=[];for(const t of e.filters){const e=t;e.isInequality()?this.tn=this.tn.add(e):this.rn.push(e)}}get sn(){return this.tn.size>1}on(e){if(zl(e.collectionGroup===this.collectionId),this.sn)return!1;const t=pc(e);if(void 0!==t&&!this._n(t))return!1;const n=mc(e);let r=new Set,i=0,s=0;for(;i<n.length&&this._n(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.tn.size>0){const e=this.tn.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.an(e,t)||!this.un(this.nn[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.nn.length||!this.un(this.nn[s++],e))return!1}return!0}cn(){if(this.sn)return null;let e=new ku(hc.comparator);const t=[];for(const n of this.rn)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new gc(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new gc(n.field,0))}for(const n of this.nn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new gc(n.field,"asc"===n.dir?0:1)));return new fc(fc.UNKNOWN_ID,this.collectionId,t,yc.empty())}_n(e){for(const t of this.rn)if(this.an(t,e))return!0;return!1}an(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}un(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Mp(e){var t,n;if(zl(e instanceof wh||e instanceof bh),e instanceof wh){if(e instanceof Lh){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>wh.create(e.field,"==",t))))||[];return bh.create(r,"or")}return e}const r=e.filters.map((e=>Mp(e)));return bh.create(r,e.op)}function Fp(e){if(0===e.getFilters().length)return[];const t=Bp(Mp(e));return zl(Vp(t)),Up(t)||jp(t)?[t]:t.getFilters()}function Up(e){return e instanceof wh}function jp(e){return e instanceof bh&&Ch(e)}function Vp(e){return Up(e)||jp(e)||function(e){if(e instanceof bh&&Eh(e)){for(const t of e.getFilters())if(!Up(t)&&!jp(t))return!1;return!0}return!1}(e)}function Bp(e){if(zl(e instanceof wh||e instanceof bh),e instanceof wh)return e;if(1===e.filters.length)return Bp(e.filters[0]);const t=e.filters.map((e=>Bp(e)));let n=bh.create(t,e.op);return n=Wp(n),Vp(n)?n:(zl(n instanceof bh),zl(Sh(n)),zl(n.filters.length>1),n.filters.reduce(((e,t)=>zp(e,t))))}function zp(e,t){let n;return zl(e instanceof wh||e instanceof bh),zl(t instanceof wh||t instanceof bh),n=e instanceof wh?t instanceof wh?function(e,t){return bh.create([e,t],"and")}(e,t):qp(e,t):t instanceof wh?qp(t,e):function(e,t){if(zl(e.filters.length>0&&t.filters.length>0),Sh(e)&&Sh(t))return xh(e,t.getFilters());const n=Eh(e)?e:t,r=Eh(e)?t:e,i=n.filters.map((e=>zp(e,r)));return bh.create(i,"or")}(e,t),Wp(n)}function qp(e,t){if(Sh(t))return xh(t,e.getFilters());{const n=t.filters.map((t=>zp(e,t)));return bh.create(n,"or")}}function Wp(e){if(zl(e instanceof wh||e instanceof bh),e instanceof wh)return e;const t=e.getFilters();if(1===t.length)return Wp(t[0]);if(kh(e))return e;const n=t.map((e=>Wp(e))),r=[];return n.forEach((t=>{t instanceof wh?r.push(t):t instanceof bh&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:bh.create(r,e.op)}class Kp{constructor(){this.ln=new Hp}addToCollectionParentIndex(e,t){return this.ln.add(t),kc.resolve()}getCollectionParents(e,t){return kc.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return kc.resolve()}deleteFieldIndex(e,t){return kc.resolve()}deleteAllFieldIndexes(e){return kc.resolve()}createTargetIndexes(e,t){return kc.resolve()}getDocumentsMatchingTarget(e,t){return kc.resolve(null)}getIndexType(e,t){return kc.resolve(0)}getFieldIndexes(e,t){return kc.resolve([])}getNextCollectionGroupToUpdate(e){return kc.resolve(null)}getMinOffset(e,t){return kc.resolve(wc.min())}getMinOffsetFromCollectionGroup(e,t){return kc.resolve(wc.min())}updateCollectionGroup(e,t,n){return kc.resolve()}updateIndexEntries(e,t){return kc.resolve()}}class Hp{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new ku(cc.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new ku(cc.comparator)).toArray()}}const Gp=new Uint8Array(0);class Qp{constructor(e,t){this.databaseId=t,this.hn=new Hp,this.Pn=new cd((e=>Vh(e)),((e,t)=>Bh(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.hn.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.hn.add(t)}));const i={collectionId:n,parent:zc(r)};return Yp(e).put(i)}return kc.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[sc(t),""],!1,!0);return Yp(e).U(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Kc(r.parent))}return n}))}addFieldIndex(e,t){const n=$p(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=Xp(e);return i.next((e=>{n.put(vp(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=$p(e),r=Xp(e),i=Jp(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=$p(e),n=Jp(e),r=Xp(e);return t.j().next((()=>n.j())).next((()=>r.j()))}createTargetIndexes(e,t){return kc.forEach(this.Tn(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new Lp(t).cn();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=Jp(e);let r=!0;const i=new Map;return kc.forEach(this.Tn(t),(t=>this.In(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=wd();const r=[];return kc.forEach(i,((i,s)=>{Fl("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(Vh(t)));const o=function(e,t){const n=pc(t);if(void 0===n)return null;for(const r of qh(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),a=function(e,t){const n=new Map;for(const r of mc(t))for(const t of qh(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of mc(t)){const t=0===i.kind?Wh(e,i.fieldPath,e.startAt):Kh(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new ph(n,r)}(s,i),c=function(e,t){const n=[];let r=!0;for(const i of mc(t)){const t=0===i.kind?Kh(e,i.fieldPath,e.endAt):Wh(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new ph(n,r)}(s,i),u=this.En(i,s,l),h=this.En(i,s,c),d=this.dn(i,s,a),f=this.An(i.indexId,o,u,l.inclusive,h,c.inclusive,d);return kc.forEach(f,(i=>n.G(i,t.limit).next((t=>{t.forEach((t=>{const n=dc.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return kc.resolve(null)}))}Tn(e){let t=this.Pn.get(e);return t||(t=0===e.filters.length?[e]:Fp(bh.create(e.filters,"and")).map((t=>jh(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.Pn.set(e,t),t)}An(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),l=a/(null!=t?t.length:1),c=[];for(let u=0;u<a;++u){const a=t?this.Rn(t[u/l]):Gp,h=this.Vn(e,a,n[u%l],r),d=this.mn(e,a,i[u%l],s),f=o.map((t=>this.Vn(e,a,t,!0)));c.push(...this.createRange(h,d,f))}return c}Vn(e,t,n,r){const i=new Rp(e,dc.empty(),t,n);return r?i:i.en()}mn(e,t,n,r){const i=new Rp(e,dc.empty(),t,n);return r?i.en():i}In(e,t){const n=new Lp(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.on(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.Tn(t);return kc.forEach(r,(t=>this.In(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new ku(hc.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}fn(e,t){const n=new Pp;for(const r of mc(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Xt(r.kind);kp.Ft.Et(e,i)}return n.Ht()}Rn(e){const t=new Pp;return kp.Ft.Et(e,t.Xt(0)),t.Ht()}gn(e,t){const n=new Pp;return kp.Ft.Et($u(this.databaseId,t),n.Xt(function(e){const t=mc(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Ht()}dn(e,t,n){if(null===n)return[];let r=[];r.push(new Pp);let i=0;for(const s of mc(e)){const e=n[i++];for(const n of r)if(this.pn(t,s.fieldPath)&&Zu(e))r=this.yn(r,s,e);else{const t=n.Xt(s.kind);kp.Ft.Et(e,t)}}return this.wn(r)}En(e,t,n){return this.dn(e,t,n.position)}wn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Ht();return t}yn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new Pp;n.seed(e.Ht()),kp.Ft.Et(s,n.Xt(t.kind)),i.push(n)}return i}pn(e,t){return!!e.filters.find((e=>e instanceof wh&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=$p(e),r=Xp(e);return(t?n.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.U()).next((e=>{const t=[];return kc.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new yc(t.sequenceNumber,new wc(hp(t.readTime),new dc(Kc(t.documentKey)),t.largestBatchId)):yc.empty(),r=e.fields.map((e=>{let[t,n]=e;return new gc(hc.fromServerFormat(t),n)}));return new fc(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:rc(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=$p(e),i=Xp(e);return this.Sn(e).next((e=>r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>kc.forEach(t,(t=>i.put(vp(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return kc.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?kc.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),kc.forEach(i,(n=>this.bn(e,t,n).next((t=>{const i=this.Dn(r,n);return t.isEqual(i)?kc.resolve():this.vn(e,r,n,t,i)})))))))}))}Cn(e,t,n,r){return Jp(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(n,t.key),documentKey:t.key.path.toArray()})}Fn(e,t,n,r){return Jp(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(n,t.key),t.key.path.toArray()])}bn(e,t,n){const r=Jp(e);let i=new ku(Op);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.gn(n,t)])},((e,r)=>{i=i.add(new Rp(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}Dn(e,t){let n=new ku(Op);const r=this.fn(t,e);if(null==r)return n;const i=pc(t);if(null!=i){const s=e.data.field(i.fieldPath);if(Zu(s))for(const i of s.arrayValue.values||[])n=n.add(new Rp(t.indexId,e.key,this.Rn(i),r))}else n=n.add(new Rp(t.indexId,e.key,Gp,r));return n}vn(e,t,n,r,i){Fl("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=Tu(s),l=Tu(o);for(;a||l;){let e=!1,t=!1;if(a&&l){const r=n(a,l);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(l),l=Tu(o)):t?(i(a),a=Tu(s)):(a=Tu(s),l=Tu(o))}}(r,i,Op,(r=>{s.push(this.Cn(e,t,n,r))}),(r=>{s.push(this.Fn(e,t,n,r))})),kc.waitFor(s)}Sn(e){let t=1;return Xp(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>Op(e,t))).filter(((e,t,n)=>!t||0!==Op(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=Op(s,e),i=Op(s,t);if(0===n)r[0]=e.en();else if(n>0&&i<0)r.push(s),r.push(s.en());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.Mn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,Gp,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,Gp,[]];i.push(IDBKeyRange.bound(e,t))}return i}Mn(e,t){return Op(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Zp)}getMinOffset(e,t){return kc.mapArray(this.Tn(t),(t=>this.In(e,t).next((e=>e||Bl())))).next(Zp)}}function Yp(e){return vu(e,"collectionParents")}function Jp(e){return vu(e,"indexEntries")}function $p(e){return vu(e,"indexConfiguration")}function Xp(e){return vu(e,"indexState")}function Zp(e){zl(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;bc(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new wc(t.readTime,t.documentKey,n)}const em={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class tm{static withCacheSize(e){return new tm(e,tm.DEFAULT_COLLECTION_PERCENTILE,tm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}function nm(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.J({range:o},((e,t,n)=>(a++,n.delete())));s.push(l.next((()=>{zl(1===a)})));const c=[];for(const u of n.mutations){const e=Qc(t,u.key.path,n.batchId);s.push(i.delete(e)),c.push(u.key)}return kc.waitFor(s).next((()=>c))}function rm(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Bl();t=e.noDocument}return JSON.stringify(t).length}tm.DEFAULT_COLLECTION_PERCENTILE=10,tm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tm.DEFAULT=new tm(41943040,tm.DEFAULT_COLLECTION_PERCENTILE,tm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tm.DISABLED=new tm(-1,0,0);class im{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.xn={}}static Pt(e,t,n,r){zl(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new im(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return om(e).J({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=am(e),s=om(e);return s.add({}).next((o=>{zl("number"==typeof o);const a=new tf(o,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>Hf(e.ht,t))),i=n.mutations.map((t=>Hf(e.ht,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),c=[];let u=new ku(((e,t)=>rc(e.canonicalString(),t.canonicalString())));for(const e of r){const t=Qc(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),c.push(s.put(l)),c.push(i.put(t,Yc))}return u.forEach((t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.xn[o]=a.keys()})),kc.waitFor(c).next((()=>a))}))}lookupMutationBatch(e,t){return om(e).get(t).next((e=>e?(zl(e.userId===this.userId),dp(this.serializer,e)):null))}On(e,t){return this.xn[t]?kc.resolve(this.xn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.xn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return om(e).J({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(zl(t.batchId>=n),i=dp(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return om(e).J({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return om(e).U("userMutationsIndex",t).next((e=>e.map((e=>dp(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Gc(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return am(e).J({range:r},((n,r,s)=>{const[o,a,l]=n,c=Kc(a);if(o===this.userId&&t.path.isEqual(c))return om(e).get(l).next((e=>{if(!e)throw Bl();zl(e.userId===this.userId),i.push(dp(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new ku(rc);const r=[];return t.forEach((t=>{const i=Gc(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=am(e).J({range:s},((e,r,i)=>{const[s,o,a]=e,l=Kc(o);s===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()}));r.push(o)})),kc.waitFor(r).next((()=>this.Nn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=Gc(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new ku(rc);return am(e).J({range:s},((e,t,i)=>{const[s,a,l]=e,c=Kc(a);s===this.userId&&n.isPrefixOf(c)?c.length===r&&(o=o.add(l)):i.done()})).next((()=>this.Nn(e,o)))}Nn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(om(e).get(t).next((e=>{if(null===e)throw Bl();zl(e.userId===this.userId),n.push(dp(this.serializer,e))})))})),kc.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return nm(e._e,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Ln(t.batchId)})),kc.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Ln(e){delete this.xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return kc.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return am(e).J({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=Kc(e[1]);r.push(t)}else n.done()})).next((()=>{zl(0===r.length)}))}))}containsKey(e,t){return sm(e,this.userId,t)}Bn(e){return lm(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function sm(e,t,n){const r=Gc(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return am(e).J({range:s,H:!0},((e,n,r)=>{const[s,a,l]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function om(e){return vu(e,"mutations")}function am(e){return vu(e,"documentMutations")}function lm(e){return vu(e,"mutationQueues")}class cm{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new cm(0)}static Qn(){return new cm(-1)}}class um{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Kn(e).next((t=>{const n=new cm(t.highestTargetId);return t.highestTargetId=n.next(),this.$n(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Kn(e).next((e=>ac.fromTimestamp(new oc(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Kn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Kn(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.$n(e,r))))}addTargetData(e,t){return this.Un(e,t).next((()=>this.Kn(e).next((n=>(n.targetCount+=1,this.Wn(t,n),this.$n(e,n))))))}updateTargetData(e,t){return this.Un(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>hm(e).delete(t.targetId))).next((()=>this.Kn(e))).next((t=>(zl(t.targetCount>0),t.targetCount-=1,this.$n(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return hm(e).J(((s,o)=>{const a=fp(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>kc.waitFor(i))).next((()=>r))}forEachTarget(e,t){return hm(e).J(((e,n)=>{const r=fp(n);t(r)}))}Kn(e){return dm(e).get("targetGlobalKey").next((e=>(zl(null!==e),e)))}$n(e,t){return dm(e).put("targetGlobalKey",t)}Un(e,t){return hm(e).put(pp(this.serializer,t))}Wn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Kn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Vh(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return hm(e).J({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=fp(n);Bh(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=fm(e);return t.forEach((t=>{const s=zc(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),kc.waitFor(r)}removeMatchingKeys(e,t,n){const r=fm(e);return kc.forEach(t,(t=>{const i=zc(t.path);return kc.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=fm(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=fm(e);let i=wd();return r.J({range:n,H:!0},((e,t,n)=>{const r=Kc(e[1]),s=new dc(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=zc(t.path),r=IDBKeyRange.bound([n],[sc(n)],!1,!0);let i=0;return fm(e).J({index:"documentTargetsIndex",H:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}ut(e,t){return hm(e).get(t).next((e=>e?fp(e):null))}}function hm(e){return vu(e,"targets")}function dm(e){return vu(e,"targetGlobal")}function fm(e){return vu(e,"targetDocuments")}function pm(e,t){let[n,r]=e,[i,s]=t;const o=rc(n,i);return 0===o?rc(r,s):o}class mm{constructor(e){this.Gn=e,this.buffer=new ku(pm),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();pm(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class gm{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return null!==this.Jn}Yn(e){Fl("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Pc(e)?Fl("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await Cc(e)}await this.Yn(3e5)}))}}class ym{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return kc.resolve(Uc.oe);const n=new mm(t);return this.Zn.forEachTarget(e,(e=>n.Hn(e.sequenceNumber))).next((()=>this.Zn.er(e,(e=>n.Hn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.Zn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Fl("LruGarbageCollector","Garbage collection skipped; disabled"),kc.resolve(em)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Fl("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),em):this.tr(e,t)))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let n,r,i,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Fl("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),Ml()<=Do.DEBUG&&Fl("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),kc.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function vm(e,t){return new ym(e,t)}class _m{constructor(e,t){this.db=e,this.garbageCollector=vm(this,t)}Xn(e){const t=this.nr(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}nr(e){let t=0;return this.er(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}er(e,t){return this.rr(e,((e,n)=>t(n)))}addReference(e,t,n){return wm(e,n)}removeReference(e,t,n){return wm(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return wm(e,t)}ir(e,t){return function(e,t){let n=!1;return lm(e).Y((r=>sm(e,r,t).next((e=>(e&&(n=!0),kc.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.rr(e,((s,o)=>{if(o<=t){const t=this.ir(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,ac.min()),fm(e).delete(function(e){return[0,zc(e.path)]}(s)))))}));r.push(t)}})).next((()=>kc.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return wm(e,t)}rr(e,t){const n=fm(e);let r,i=Uc.oe;return n.J({index:"documentTargetsIndex"},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:l}=n;0===s?(i!==Uc.oe&&t(new dc(Kc(r)),i),i=l,r=a):i=Uc.oe})).next((()=>{i!==Uc.oe&&t(new dc(Kc(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function wm(e,t){return fm(e).put(function(e,t){return{targetId:0,path:zc(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class bm{constructor(){this.changes=new cd((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,fh.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?kc.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Sm{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Im(e).put(n)}removeEntry(e,t,n){return Im(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],cp(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.sr(e,n))))}getEntry(e,t){let n=fh.newInvalidDocument(t);return Im(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Tm(t))},((e,r)=>{n=this._r(t,r)})).next((()=>n))}ar(e,t){let n={size:0,document:fh.newInvalidDocument(t)};return Im(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Tm(t))},((e,r)=>{n={document:this._r(t,r),size:rm(r)}})).next((()=>n))}getEntries(e,t){let n=hd();return this.ur(e,t,((e,t)=>{const r=this._r(e,t);n=n.insert(e,r)})).next((()=>n))}cr(e,t){let n=hd(),r=new Su(dc.comparator);return this.ur(e,t,((e,t)=>{const i=this._r(e,t);n=n.insert(e,i),r=r.insert(e,rm(t))})).next((()=>({documents:n,lr:r})))}ur(e,t,n){if(t.isEmpty())return kc.resolve();let r=new ku(Am);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(Tm(r.first()),Tm(r.last())),s=r.getIterator();let o=s.getNext();return Im(e).J({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=dc.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&Am(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.$(Tm(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),cp(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Im(e).U(IDBKeyRange.bound(o,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=hd();for(const i of e){const e=this._r(dc.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(sd(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=hd();const s=xm(t,n),o=xm(t,wc.max());return Im(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this._r(dc.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new Cm(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return km(e).get("remoteDocumentGlobalKey").next((e=>(zl(!!e),e)))}sr(e,t){return km(e).put("remoteDocumentGlobalKey",t)}_r(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Kf(e.ht,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=dc.fromSegments(t.noDocument.path),r=hp(t.noDocument.readTime);n=fh.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Bl();{const e=dc.fromSegments(t.unknownDocument.path),r=hp(t.unknownDocument.version);n=fh.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new oc(e[0],e[1]);return ac.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(ac.min()))return e}return fh.newInvalidDocument(e)}}function Em(e){return new Sm(e)}class Cm extends bm{constructor(e,t){super(),this.hr=e,this.trackRemovals=t,this.Pr=new cd((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new ku(((e,t)=>rc(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.Pr.get(i);if(t.push(this.hr.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=lp(this.hr.serializer,s);r=r.add(i.path.popLast());const l=rm(a);n+=l-o.size,t.push(this.hr.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=lp(this.hr.serializer,s.convertToNoDocument(ac.min()));t.push(this.hr.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.hr.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.hr.updateMetadata(e,n)),kc.waitFor(t)}getFromCache(e,t){return this.hr.ar(e,t).next((e=>(this.Pr.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.hr.cr(e,t).next((e=>{let{documents:t,lr:n}=e;return n.forEach(((e,n)=>{this.Pr.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function km(e){return vu(e,"remoteDocumentGlobal")}function Im(e){return vu(e,"remoteDocumentsV14")}function Tm(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function xm(e,t){const n=t.documentKey.path.toArray();return[e,cp(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Am(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=rc(n[s],r[s]),i)return i;return i=rc(n.length,r.length),i||(i=rc(n[n.length-2],r[r.length-2]),i||rc(n[n.length-1],r[r.length-1]))}class Nm{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Pm{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Kd(n.mutation,e,xu.empty(),oc.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,wd()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wd();const r=md();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=fd();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=md();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,wd())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=hd();const s=yd(),o=yd();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Yd)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Kd(o.mutation,t,o.mutation.getFieldMask(),oc.now())):s.set(t.key,xu.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new Nm(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=yd();let r=new Su(((e,t)=>e-t)),i=wd();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||xu.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||wd()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=gd();l.forEach((e=>{if(!i.has(e)){const r=qd(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return kc.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return dc.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Jh(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):kc.resolve(md());let o=-1,a=i;return s.next((t=>kc.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?kc.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,wd()))).next((e=>({batchId:o,changes:pd(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new dc(t)).next((e=>{let t=fd();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=fd();return this.indexManager.getCollectionParents(e,i).next((o=>kc.forEach(o,(o=>{const a=function(e,t){return new Hh(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,fh.newInvalidDocument(r)))}));let n=fd();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&Kd(s.mutation,r,xu.empty(),oc.now()),sd(t,r)&&(n=n.insert(e,r))})),n}))}}class Rm{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return kc.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Df(e.createTime)}}(t)),kc.resolve()}getNamedQuery(e,t){return kc.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(e){return{name:e.name,query:mp(e.bundledQuery),readTime:Df(e.readTime)}}(t)),kc.resolve()}}class Om{constructor(){this.overlays=new Su(dc.comparator),this.Er=new Map}getOverlay(e,t){return kc.resolve(this.overlays.get(t))}getOverlays(e,t){const n=md();return kc.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.Tt(e,t,r)})),kc.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Er.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Er.delete(n)),kc.resolve()}getOverlaysForCollection(e,t,n){const r=md(),i=t.length+1,s=new dc(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return kc.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Su(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=md(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=md(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return kc.resolve(o)}Tt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Er.get(r.largestBatchId).delete(n.key);this.Er.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new rf(t,n));let i=this.Er.get(t);void 0===i&&(i=wd(),this.Er.set(t,i)),this.Er.set(t,i.add(n.key))}}class Dm{constructor(){this.sessionToken=Nu.EMPTY_BYTE_STRING}getSessionToken(e){return kc.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,kc.resolve()}}class Lm{constructor(){this.dr=new ku(Mm.Ar),this.Rr=new ku(Mm.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,t){const n=new Mm(e,t);this.dr=this.dr.add(n),this.Rr=this.Rr.add(n)}mr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.gr(new Mm(e,t))}pr(e,t){e.forEach((e=>this.removeReference(e,t)))}yr(e){const t=new dc(new cc([])),n=new Mm(t,e),r=new Mm(t,e+1),i=[];return this.Rr.forEachInRange([n,r],(e=>{this.gr(e),i.push(e.key)})),i}wr(){this.dr.forEach((e=>this.gr(e)))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new dc(new cc([])),n=new Mm(t,e),r=new Mm(t,e+1);let i=wd();return this.Rr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new Mm(e,0),n=this.dr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Mm{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return dc.comparator(e.key,t.key)||rc(e.br,t.br)}static Vr(e,t){return rc(e.br,t.br)||dc.comparator(e.key,t.key)}}class Fm{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new ku(Mm.Ar)}checkEmpty(e){return kc.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new tf(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.vr=this.vr.add(new Mm(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return kc.resolve(s)}lookupMutationBatch(e,t){return kc.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Fr(n),i=r<0?0:r;return kc.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return kc.resolve(0===this.mutationQueue.length?-1:this.Dr-1)}getAllMutationBatches(e){return kc.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Mm(t,0),r=new Mm(t,Number.POSITIVE_INFINITY),i=[];return this.vr.forEachInRange([n,r],(e=>{const t=this.Cr(e.br);i.push(t)})),kc.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new ku(rc);return t.forEach((e=>{const t=new Mm(e,0),r=new Mm(e,Number.POSITIVE_INFINITY);this.vr.forEachInRange([t,r],(e=>{n=n.add(e.br)}))})),kc.resolve(this.Mr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;dc.isDocumentKey(i)||(i=i.child(""));const s=new Mm(new dc(i),0);let o=new ku(rc);return this.vr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.br)),!0)}),s),kc.resolve(this.Mr(o))}Mr(e){const t=[];return e.forEach((e=>{const n=this.Cr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){zl(0===this.Or(t.batchId,"removed")),this.mutationQueue.shift();let n=this.vr;return kc.forEach(t.mutations,(r=>{const i=new Mm(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.vr=n}))}Ln(e){}containsKey(e,t){const n=new Mm(t,0),r=this.vr.firstAfterOrEqual(n);return kc.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,kc.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Um{constructor(e){this.Nr=e,this.docs=new Su(dc.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Nr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return kc.resolve(n?n.document.mutableCopy():fh.newInvalidDocument(t))}getEntries(e,t){let n=hd();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():fh.newInvalidDocument(e))})),kc.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=hd();const s=t.path,o=new dc(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||bc(_c(o),n)<=0||(r.has(o.key)||sd(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return kc.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Bl()}Lr(e,t){return kc.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new jm(this)}getSize(e){return kc.resolve(this.size)}}class jm extends bm{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.hr.addEntry(e,r)):this.hr.removeEntry(n)})),kc.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}class Vm{constructor(e){this.persistence=e,this.Br=new cd((e=>Vh(e)),Bh),this.lastRemoteSnapshotVersion=ac.min(),this.highestTargetId=0,this.kr=0,this.qr=new Lm,this.targetCount=0,this.Qr=cm.qn()}forEachTarget(e,t){return this.Br.forEach(((e,n)=>t(n))),kc.resolve()}getLastRemoteSnapshotVersion(e){return kc.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return kc.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),kc.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.kr&&(this.kr=t),kc.resolve()}Un(e){this.Br.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new cm(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,kc.resolve()}updateTargetData(e,t){return this.Un(t),kc.resolve()}removeTargetData(e,t){return this.Br.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,kc.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Br.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Br.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),kc.waitFor(i).next((()=>r))}getTargetCount(e){return kc.resolve(this.targetCount)}getTargetData(e,t){const n=this.Br.get(t)||null;return kc.resolve(n)}addMatchingKeys(e,t,n){return this.qr.mr(t,n),kc.resolve()}removeMatchingKeys(e,t,n){this.qr.pr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),kc.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),kc.resolve()}getMatchingKeysForTargetId(e,t){const n=this.qr.Sr(t);return kc.resolve(n)}containsKey(e,t){return kc.resolve(this.qr.containsKey(t))}}class Bm{constructor(e,t){this.Kr={},this.overlays={},this.$r=new Uc(0),this.Ur=!1,this.Ur=!0,this.Wr=new Dm,this.referenceDelegate=e(this),this.Gr=new Vm(this),this.indexManager=new Kp,this.remoteDocumentCache=function(e){return new Um(e)}((e=>this.referenceDelegate.zr(e))),this.serializer=new ap(t),this.jr=new Rm(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Om,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Kr[e.toKey()];return n||(n=new Fm(t,this.referenceDelegate),this.Kr[e.toKey()]=n),n}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,n){Fl("MemoryPersistence","Starting transaction:",e);const r=new zm(this.$r.next());return this.referenceDelegate.Hr(),n(r).next((e=>this.referenceDelegate.Jr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Yr(e,t){return kc.or(Object.values(this.Kr).map((n=>()=>n.containsKey(e,t))))}}class zm extends Ec{constructor(e){super(),this.currentSequenceNumber=e}}class qm{constructor(e){this.persistence=e,this.Zr=new Lm,this.Xr=null}static ei(e){return new qm(e)}get ti(){if(this.Xr)return this.Xr;throw Bl()}addReference(e,t,n){return this.Zr.addReference(n,t),this.ti.delete(n.toString()),kc.resolve()}removeReference(e,t,n){return this.Zr.removeReference(n,t),this.ti.add(n.toString()),kc.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),kc.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach((e=>this.ti.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.ti.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return kc.forEach(this.ti,(n=>{const r=dc.fromPath(n);return this.ni(e,r).next((e=>{e||t.removeEntry(r,ac.min())}))})).next((()=>(this.Xr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ni(e,t).next((e=>{e?this.ti.delete(t.toString()):this.ti.add(t.toString())}))}zr(e){return 0}ni(e,t){return kc.or([()=>kc.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class Wm{constructor(e,t){this.persistence=e,this.ri=new cd((e=>zc(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=vm(this,t)}static ei(e,t){return new Wm(e,t)}Hr(){}Jr(e){return kc.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}nr(e){let t=0;return this.er(e,(e=>{t++})).next((()=>t))}er(e,t){return kc.forEach(this.ri,((n,r)=>this.ir(e,n,r).next((e=>e?kc.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.Lr(e,(r=>this.ir(e,r,t).next((e=>{e||(n++,i.removeEntry(r,ac.min()))})))).next((()=>i.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),kc.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.ri.set(n,e.currentSequenceNumber),kc.resolve()}removeReference(e,t,n){return this.ri.set(n,e.currentSequenceNumber),kc.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),kc.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ju(e.data.value)),t}ir(e,t,n){return kc.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.ri.get(t);return kc.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Km{constructor(e){this.serializer=e}O(e,t,n,r){const i=new Ic("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Hc,{unique:!0}),e.createObjectStore("documentMutations")}(e),Hm(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=kc.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Hm(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ac.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").U().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Hc,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return kc.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.ii(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.si(i))))),n<7&&r>=7&&(s=s.next((()=>this.oi(i)))),n<8&&r>=8&&(s=s.next((()=>this._i(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.ai(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:au});t.createIndex("collectionPathOverlayIndex",lu,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",cu,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:Jc});t.createIndex("documentKeyIndex",$c),t.createIndex("collectionGroupIndex",Xc)}(e))).next((()=>this.ui(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.ci(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:ru}).createIndex("sequenceNumberIndex",iu,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:su}).createIndex("documentKeyIndex",ou,{unique:!1})}(e)))),n<16&&r>=16&&(s=s.next((()=>{t.objectStore("indexState").clear()})).next((()=>{t.objectStore("indexEntries").clear()}))),n<17&&r>=17&&(s=s.next((()=>{!function(e){e.createObjectStore("globals",{keyPath:"name"})}(e)}))),s}si(e){let t=0;return e.store("remoteDocuments").J(((e,n)=>{t+=rm(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}ii(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.U().next((t=>kc.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",r).next((n=>kc.forEach(n,(n=>{zl(n.userId===t.userId);const r=dp(this.serializer,n);return nm(e,t.userId,r).next((()=>{}))}))))}))))}oi(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.J(((n,i)=>{const s=new cc(n),o=function(e){return[0,zc(e)]}(s);r.push(t.get(o).next((n=>n?kc.resolve():(n=>t.put({targetId:0,path:zc(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>kc.waitFor(r)))}))}_i(e,t){e.createObjectStore("collectionParents",{keyPath:nu});const n=t.store("collectionParents"),r=new Hp,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:zc(r)})}};return t.store("remoteDocuments").J({H:!0},((e,t)=>{const n=new cc(e);return i(n.popLast())})).next((()=>t.store("documentMutations").J({H:!0},((e,t)=>{let[n,r,s]=e;const o=Kc(r);return i(o.popLast())}))))}ai(e){const t=e.store("targets");return t.J(((e,n)=>{const r=fp(n),i=pp(this.serializer,r);return t.put(i)}))}ui(e,t){const n=t.store("remoteDocuments"),r=[];return n.J(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=function(e){return e.document?new dc(cc.fromString(e.document.name).popFirst(5)):e.noDocument?dc.fromSegments(e.noDocument.path):e.unknownDocument?dc.fromSegments(e.unknownDocument.path):Bl()}(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>kc.waitFor(r)))}ci(e,t){const n=t.store("mutations"),r=Em(this.serializer),i=new Bm(qm.ei,this.serializer.ht);return n.U().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:wd();dp(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),kc.forEach(n,((e,n)=>{const s=new Ol(n),o=Sp.Pt(this.serializer,s),a=i.getIndexManager(s),l=im.Pt(s,this.serializer,a,i.referenceDelegate);return new Pm(r,l,o,a).recalculateAndSaveOverlaysForDocumentKeys(new yu(t,Uc.oe),e).next()}))}))}}function Hm(e){e.createObjectStore("targetDocuments",{keyPath:eu}).createIndex("documentTargetsIndex",tu,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Zc,{unique:!0}),e.createObjectStore("targetGlobal")}const Gm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Qm{constructor(e,t,n,r,i,s,o,a,l,c){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:17;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.li=i,this.window=s,this.document=o,this.hi=l,this.Pi=c,this.Ti=u,this.$r=null,this.Ur=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ii=null,this.inForeground=!1,this.Ei=null,this.di=null,this.Ai=Number.NEGATIVE_INFINITY,this.Ri=e=>Promise.resolve(),!Qm.p())throw new Kl(Wl.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new _m(this,r),this.Vi=t+"main",this.serializer=new ap(a),this.mi=new Tc(this.Vi,this.Ti,new Km(this.serializer)),this.Wr=new Cp,this.Gr=new um(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Em(this.serializer),this.jr=new _p,this.window&&this.window.localStorage?this.fi=this.window.localStorage:(this.fi=null,!1===c&&Ul("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Kl(Wl.FAILED_PRECONDITION,Gm);return this.pi(),this.yi(),this.wi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Gr.getHighestSequenceNumber(e)))})).then((e=>{this.$r=new Uc(e,this.hi)})).then((()=>{this.Ur=!0})).catch((e=>(this.mi&&this.mi.close(),Promise.reject(e))))}Si(e){return this.Ri=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.mi.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.li.enqueueAndForget((async()=>{this.started&&await this.gi()})))}gi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Jm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.bi(e).next((e=>{e||(this.isPrimary=!1,this.li.enqueueRetryable((()=>this.Ri(!1))))}))})).next((()=>this.Di(e))).next((t=>this.isPrimary&&!t?this.vi(e).next((()=>!1)):!!t&&this.Ci(e).next((()=>!0)))))).catch((e=>{if(Pc(e))return Fl("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Fl("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.li.enqueueRetryable((()=>this.Ri(e))),this.isPrimary=e}))}bi(e){return Ym(e).get("owner").next((e=>kc.resolve(this.Fi(e))))}Mi(e){return Jm(e).delete(this.clientId)}async xi(){if(this.isPrimary&&!this.Oi(this.Ai,18e5)){this.Ai=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=vu(e,"clientMetadata");return t.U().next((e=>{const n=this.Ni(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return kc.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.fi)for(const t of e)this.fi.removeItem(this.Li(t.clientId))}}wi(){this.di=this.li.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.gi().then((()=>this.xi())).then((()=>this.wi()))))}Fi(e){return!!e&&e.ownerId===this.clientId}Di(e){return this.Pi?kc.resolve(!0):Ym(e).get("owner").next((t=>{if(null!==t&&this.Oi(t.leaseTimestampMs,5e3)&&!this.Bi(t.ownerId)){if(this.Fi(t)&&this.networkEnabled)return!0;if(!this.Fi(t)){if(!t.allowTabSynchronization)throw new Kl(Wl.FAILED_PRECONDITION,Gm);return!1}}return!(!this.networkEnabled||!this.inForeground)||Jm(e).U().next((e=>void 0===this.Ni(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&Fl("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.Ur=!1,this.ki(),this.di&&(this.di.cancel(),this.di=null),this.qi(),this.Qi(),await this.mi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new yu(e,Uc.oe);return this.vi(t).next((()=>this.Mi(t)))})),this.mi.close(),this.Ki()}Ni(e,t){return e.filter((e=>this.Oi(e.updateTimeMs,t)&&!this.Bi(e.clientId)))}$i(){return this.runTransaction("getActiveClients","readonly",(e=>Jm(e).U().next((e=>this.Ni(e,18e5).map((e=>e.clientId))))))}get started(){return this.Ur}getGlobalsCache(){return this.Wr}getMutationQueue(e,t){return im.Pt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Qp(e,this.serializer.ht.databaseId)}getDocumentOverlayCache(e){return Sp.Pt(this.serializer,e)}getBundleCache(){return this.jr}runTransaction(e,t,n){Fl("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 17===e?gu:16===e?mu:15===e?pu:14===e?fu:13===e?du:12===e?hu:11===e?uu:void Bl()}(this.Ti);let s;return this.mi.runTransaction(e,r,i,(r=>(s=new yu(r,this.$r?this.$r.next():Uc.oe),"readwrite-primary"===t?this.bi(s).next((e=>!!e||this.Di(s))).next((t=>{if(!t)throw Ul("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.li.enqueueRetryable((()=>this.Ri(!1))),new Kl(Wl.FAILED_PRECONDITION,Sc);return n(s)})).next((e=>this.Ci(s).next((()=>e)))):this.Ui(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}Ui(e){return Ym(e).get("owner").next((e=>{if(null!==e&&this.Oi(e.leaseTimestampMs,5e3)&&!this.Bi(e.ownerId)&&!this.Fi(e)&&!(this.Pi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Kl(Wl.FAILED_PRECONDITION,Gm)}))}Ci(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ym(e).put("owner",t)}static p(){return Tc.p()}vi(e){const t=Ym(e);return t.get("owner").next((e=>this.Fi(e)?(Fl("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):kc.resolve()))}Oi(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Ul("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}pi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ei=()=>{this.li.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.gi())))},this.document.addEventListener("visibilitychange",this.Ei),this.inForeground="visible"===this.document.visibilityState)}qi(){this.Ei&&(this.document.removeEventListener("visibilitychange",this.Ei),this.Ei=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Ii=()=>{this.ki();const e=/(?:Version|Mobile)\/1[456]/;eo()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.li.enterRestrictedMode(!0),this.li.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Ii))}Qi(){this.Ii&&(this.window.removeEventListener("pagehide",this.Ii),this.Ii=null)}Bi(e){var t;try{const n=null!==(null===(t=this.fi)||void 0===t?void 0:t.getItem(this.Li(e)));return Fl("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Ul("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}ki(){if(this.fi)try{this.fi.setItem(this.Li(this.clientId),String(Date.now()))}catch(SM){Ul("Failed to set zombie client id.",SM)}}Ki(){if(this.fi)try{this.fi.removeItem(this.Li(this.clientId))}catch(SM){}}Li(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function Ym(e){return vu(e,"owner")}function Jm(e){return vu(e,"clientMetadata")}function $m(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Xm{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Wi=n,this.Gi=r}static zi(e,t){let n=wd(),r=wd();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Xm(e,t.fromCache,n,r)}}class Zm{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class eg{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=eo()?8:xc(Hs())>0?6:4}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.Xi(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.es(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Zm;return this.ts(e,t,n).next((r=>{if(i.result=r,this.Hi)return this.ns(e,t,n,r.size)}))})).next((()=>i.result))}ns(e,t,n,r){return n.documentReadCount<this.Ji?(Ml()<=Do.DEBUG&&Fl("QueryEngine","SDK will not create cache indexes for query:",id(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),kc.resolve()):(Ml()<=Do.DEBUG&&Fl("QueryEngine","Query:",id(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Yi*r?(Ml()<=Do.DEBUG&&Fl("QueryEngine","The SDK decides to create cache indexes for query:",id(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xh(t))):kc.resolve())}Xi(e,t){if(Yh(t))return kc.resolve(null);let n=Xh(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=td(t,null,"F"),n=Xh(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=wd(...r);return this.Zi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.rs(t,r);return this.ss(t,s,i,n.readTime)?this.Xi(e,td(t,null,"F")):this.os(e,s,t,n)}))))})))))}es(e,t,n,r){return Yh(t)||r.isEqual(ac.min())?kc.resolve(null):this.Zi.getDocuments(e,n).next((i=>{const s=this.rs(t,i);return this.ss(t,s,n,r)?kc.resolve(null):(Ml()<=Do.DEBUG&&Fl("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),id(t)),this.os(e,s,t,vc(r,-1)).next((e=>e)))}))}rs(e,t){let n=new ku(ad(e));return t.forEach(((t,r)=>{sd(e,r)&&(n=n.add(r))})),n}ss(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}ts(e,t,n){return Ml()<=Do.DEBUG&&Fl("QueryEngine","Using full collection scan to execute query:",id(t)),this.Zi.getDocumentsMatchingQuery(e,t,wc.min(),n)}os(e,t,n,r){return this.Zi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class tg{constructor(e,t,n,r){this.persistence=e,this._s=t,this.serializer=r,this.us=new Su(rc),this.cs=new cd((e=>Vh(e)),Bh),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(n)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Pm(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.us)))}}function ng(e,t,n,r){return new tg(e,t,n,r)}async function rg(e,t){const n=ql(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.Ps(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=wd();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({Ts:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function ig(e){const t=ql(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Gr.getLastRemoteSnapshotVersion(e)))}function sg(e,t,n){let r=wd(),i=wd();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=hd();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(ac.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Fl("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{Is:r,Es:i}}))}function og(e,t){const n=ql(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function ag(e,t){const n=ql(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Gr.getTargetData(e,t).next((i=>i?(r=i,kc.resolve(r)):n.Gr.allocateTargetId(e).next((i=>(r=new op(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Gr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.us.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.us=n.us.insert(e.targetId,e),n.cs.set(t,e.targetId)),e}))}async function lg(e,t,n){const r=ql(e),i=r.us.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Pc(e))throw e;Fl("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.us=r.us.remove(t),r.cs.delete(i.target)}function cg(e,t,n){const r=ql(e);let i=ac.min(),s=wd();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=ql(e),i=r.cs.get(n);return void 0!==i?kc.resolve(r.us.get(i)):r.Gr.getTargetData(t,n)}(r,e,Xh(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r._s.getDocumentsMatchingQuery(e,t,n?i:ac.min(),n?s:wd()))).next((e=>(dg(r,od(t),e),{documents:e,ds:s})))))}function ug(e,t){const n=ql(e),r=ql(n.Gr),i=n.us.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r.ut(e,t).next((e=>e?e.target:null))))}function hg(e,t){const n=ql(e),r=n.ls.get(t)||ac.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.hs.getAllFromCollectionGroup(e,t,vc(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(dg(n,t,e),e)))}function dg(e,t,n){let r=e.ls.get(t)||ac.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ls.set(t,r)}async function fg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wd();const r=await ag(e,Xh(mp(t.bundledQuery))),i=ql(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=Df(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.jr.saveNamedQuery(e,t);const o=r.withResumeToken(Nu.EMPTY_BYTE_STRING,s);return i.us=i.us.insert(o.targetId,o),i.Gr.updateTargetData(e,o).next((()=>i.Gr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.Gr.addMatchingKeys(e,n,r.targetId))).next((()=>i.jr.saveNamedQuery(e,t)))}))}function pg(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function mg(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function gg(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class yg{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static fs(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Kl(r.error.code,r.error.message))),s?new yg(e,t,r.state,i):(Ul("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class vg{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static fs(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Kl(n.error.code,n.error.message))),i?new vg(e,n.state,r):(Ul("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class _g{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static fs(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Sd();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=Bc(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new _g(e,i):(Ul("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class wg{constructor(e,t){this.clientId=e,this.onlineState=t}static fs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new wg(t.clientId,t.onlineState):(Ul("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class bg{constructor(){this.activeTargetIds=Sd()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Sg{constructor(e,t,n,r,i){this.window=e,this.li=t,this.persistenceKey=n,this.ws=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ss=this.bs.bind(this),this.Ds=new Su(rc),this.started=!1,this.vs=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Cs=pg(this.persistenceKey,this.ws),this.Fs=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.Ds=this.Ds.insert(this.ws,new bg),this.Ms=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.xs=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Os=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.Ns=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Ls=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Ss)}static p(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.$i();for(const n of e){if(n===this.ws)continue;const e=this.getItem(pg(this.persistenceKey,n));if(e){const t=_g.fs(n,e);t&&(this.Ds=this.Ds.insert(t.clientId,t))}}this.Bs();const t=this.storage.getItem(this.Ns);if(t){const e=this.ks(t);e&&this.qs(e)}for(const n of this.vs)this.bs(n);this.vs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Fs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Qs(this.Ds)}isActiveQueryTarget(e){let t=!1;return this.Ds.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Ks(e,"pending")}updateMutationState(e,t,n){this.Ks(e,t,n),this.$s(e)}addLocalQueryTarget(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="not-current";if(this.isActiveQueryTarget(e)){const t=this.storage.getItem(gg(this.persistenceKey,e));if(t){const r=vg.fs(e,t);r&&(n=r.state)}}return t&&this.Us.ps(e),this.Bs(),n}removeLocalQueryTarget(e){this.Us.ys(e),this.Bs()}isLocalQueryTarget(e){return this.Us.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(gg(this.persistenceKey,e))}updateQueryState(e,t,n){this.Ws(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.$s(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Gs(e)}notifyBundleLoaded(e){this.zs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Ss),this.removeItem(this.Cs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Fl("SharedClientState","READ",e,t),t}setItem(e,t){Fl("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Fl("SharedClientState","REMOVE",e),this.storage.removeItem(e)}bs(e){const t=e;if(t.storageArea===this.storage){if(Fl("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Cs)return void Ul("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.li.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.Ms.test(t.key)){if(null==t.newValue){const e=this.js(t.key);return this.Hs(e,null)}{const e=this.Js(t.key,t.newValue);if(e)return this.Hs(e.clientId,e)}}else if(this.xs.test(t.key)){if(null!==t.newValue){const e=this.Ys(t.key,t.newValue);if(e)return this.Zs(e)}}else if(this.Os.test(t.key)){if(null!==t.newValue){const e=this.Xs(t.key,t.newValue);if(e)return this.eo(e)}}else if(t.key===this.Ns){if(null!==t.newValue){const e=this.ks(t.newValue);if(e)return this.qs(e)}}else if(t.key===this.Fs){const e=function(e){let t=Uc.oe;if(null!=e)try{const n=JSON.parse(e);zl("number"==typeof n),t=n}catch(e){Ul("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Uc.oe&&this.sequenceNumberHandler(e)}else if(t.key===this.Ls){const e=this.no(t.newValue);await Promise.all(e.map((e=>this.syncEngine.ro(e))))}}else this.vs.push(t)}))}}get Us(){return this.Ds.get(this.ws)}Bs(){this.setItem(this.Cs,this.Us.gs())}Ks(e,t,n){const r=new yg(this.currentUser,e,t,n),i=mg(this.persistenceKey,this.currentUser,e);this.setItem(i,r.gs())}$s(e){const t=mg(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Gs(e){const t={clientId:this.ws,onlineState:e};this.storage.setItem(this.Ns,JSON.stringify(t))}Ws(e,t,n){const r=gg(this.persistenceKey,e),i=new vg(e,t,n);this.setItem(r,i.gs())}zs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Ls,t)}js(e){const t=this.Ms.exec(e);return t?t[1]:null}Js(e,t){const n=this.js(e);return _g.fs(n,t)}Ys(e,t){const n=this.xs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return yg.fs(new Ol(i),r,t)}Xs(e,t){const n=this.Os.exec(e),r=Number(n[1]);return vg.fs(r,t)}ks(e){return wg.fs(e)}no(e){return JSON.parse(e)}async Zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.io(e.batchId,e.state,e.error);Fl("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}eo(e){return this.syncEngine.so(e.targetId,e.state,e.error)}Hs(e,t){const n=t?this.Ds.insert(e,t):this.Ds.remove(e),r=this.Qs(this.Ds),i=this.Qs(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.oo(s,o).then((()=>{this.Ds=n}))}qs(e){this.Ds.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Qs(e){let t=Sd();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class Eg{constructor(){this._o=new bg,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,n){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new bg,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Cg{uo(e){}shutdown(){}}class kg{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){Fl("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){Fl("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Ig=null;function Tg(){return null===Ig?Ig=268435456+Math.round(2147483648*Math.random()):Ig++,"0x"+Ig.toString(16)}const xg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ag{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}const Ng="WebChannelConnection";class Pg extends class{get Co(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Fo=t+"://"+e.host,this.Mo="projects/".concat(n,"/databases/").concat(r),this.xo="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Oo(e,t,n,r,i){const s=Tg(),o=this.No(e,t.toUriEncodedString());Fl("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(a,r,i),this.Bo(e,o,a,n).then((t=>(Fl("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw jl("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}ko(e,t,n,r,i,s){return this.Oo(e,t,n,r,i)}Lo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Dl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}No(e,t){const n=xg[e];return"".concat(this.Fo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,t,n,r){const i=Tg();return new Promise(((s,o)=>{const a=new Sl;a.setWithCredentials(!0),a.listenOnce(Cl.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case kl.NO_ERROR:const t=a.getResponseJson();Fl(Ng,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case kl.TIMEOUT:Fl(Ng,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Kl(Wl.DEADLINE_EXCEEDED,"Request time out"));break;case kl.HTTP_ERROR:const n=a.getStatus();if(Fl(Ng,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Wl).indexOf(t)>=0?t:Wl.UNKNOWN}(t.status);o(new Kl(e,t.message))}else o(new Kl(Wl.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Kl(Wl.UNAVAILABLE,"Connection failed."));break;default:Bl()}}finally{Fl(Ng,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);Fl(Ng,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)}))}qo(e,t,n){const r=Tg(),i=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Al(),o=xl(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Lo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");Fl(Ng,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=s.createWebChannel(c,a);let h=!1,d=!1;const f=new Ag({Eo:t=>{d?Fl(Ng,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(Fl(Ng,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),Fl(Ng,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Ao:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,El.EventType.OPEN,(()=>{d||(Fl(Ng,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.So())})),p(u,El.EventType.CLOSE,(()=>{d||(d=!0,Fl(Ng,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.Do())})),p(u,El.EventType.ERROR,(t=>{d||(d=!0,jl(Ng,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.Do(new Kl(Wl.UNAVAILABLE,"The operation could not be completed")))})),p(u,El.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];zl(!!i);const s=i,o=(null==s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Fl(Ng,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=of[e];if(void 0!==t)return cf(t)}(t),i=o.message;void 0===n&&(n=Wl.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.Do(new Kl(n,i)),u.close()}else Fl(Ng,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.vo(i)}})),p(o,Tl.STAT_EVENT,(t=>{t.stat===Il.PROXY?Fl(Ng,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Il.NOPROXY&&Fl(Ng,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.bo()}),0),f}}function Rg(){return"undefined"!=typeof window?window:null}function Og(){return"undefined"!=typeof document?document:null}function Dg(e){return new Af(e,!0)}class Lg{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.li=e,this.timerId=t,this.Qo=n,this.Ko=r,this.$o=i,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),n=Math.max(0,Date.now()-this.Go),r=Math.max(0,t-n);r>0&&Fl("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Uo," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Wo=this.li.enqueueAfterDelay(this.timerId,r,(()=>(this.Go=Date.now(),e()))),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){null!==this.Wo&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){null!==this.Wo&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}class Mg{constructor(e,t,n,r,i,s,o,a){this.li=e,this.Yo=n,this.Zo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new Lg(e,t)}i_(){return 1===this.state||5===this.state||this.s_()}s_(){return 2===this.state||3===this.state}start(){this.n_=0,4!==this.state?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&null===this.e_&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,(()=>this.u_())))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,4!==e?this.r_.reset():t&&t.code===Wl.RESOURCE_EXHAUSTED?(Ul(t.toString()),Ul("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===Wl.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Xo===t&&this.I_(n,r)}),(t=>{e((()=>{const e=new Kl(Wl.UNKNOWN,"Fetching auth token failed: "+t.message);return this.E_(e)}))}))}I_(e,t){const n=this.T_(this.Xo);this.stream=this.d_(e,t),this.stream.Ro((()=>{n((()=>this.listener.Ro()))})),this.stream.mo((()=>{n((()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,(()=>(this.s_()&&(this.state=3),Promise.resolve()))),this.listener.mo())))})),this.stream.po((e=>{n((()=>this.E_(e)))})),this.stream.onMessage((e=>{n((()=>1==++this.n_?this.A_(e):this.onNext(e)))}))}o_(){this.state=5,this.r_.jo((async()=>{this.state=0,this.start()}))}E_(e){return Fl("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget((()=>this.Xo===e?t():(Fl("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Fg extends Mg{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}d_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Bl()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(zl(void 0===t||"string"==typeof t),Nu.fromBase64String(t||"")):(zl(void 0===t||t instanceof Buffer||t instanceof Uint8Array),Nu.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Wl.UNKNOWN:cf(e.code);return new Kl(t,e.message||"")}(o);n=new bf(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=jf(e,r.document.name),s=Df(r.document.updateTime),o=r.document.createTime?Df(r.document.createTime):ac.min(),a=new hh({mapValue:{fields:r.document.fields}}),l=fh.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new _f(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=jf(e,r.document),s=r.readTime?Df(r.readTime):ac.min(),o=fh.newNoDocument(i,s),a=r.removedTargetIds||[];n=new _f([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=jf(e,r.document),s=r.removedTargetIds||[];n=new _f([],s,i,null)}else{if(!("filter"in t))return Bl();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new sf(r,i),o=e.targetId;n=new wf(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ac.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ac.min():t.readTime?Df(t.readTime):ac.min()}(e);return this.listener.R_(t,n)}V_(e){const t={};t.database=zf(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=zh(r)?{documents:Qf(e,r)}:{query:Yf(e,r).ct},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Rf(e,t.resumeToken);const r=Nf(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(ac.min())>0){n.readTime=Pf(e,t.snapshotVersion.toTimestamp());const r=Nf(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Bl()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.c_(t)}m_(e){const t={};t.database=zf(this.serializer),t.removeTarget=e,this.c_(t)}}class Ug extends Mg{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,t){return this.connection.qo("Write",e,t)}A_(e){return zl(!!e.streamToken),this.lastStreamToken=e.streamToken,zl(!e.writeResults||0===e.writeResults.length),this.listener.p_()}onNext(e){zl(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const t=function(e,t){return e&&e.length>0?(zl(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Df(e.updateTime):Df(t);return n.isEqual(ac.min())&&(n=Df(t)),new jd(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Df(e.commitTime);return this.listener.y_(n,t)}w_(){const e={};e.database=zf(this.serializer),this.c_(e)}g_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Hf(this.serializer,e)))};this.c_(t)}}class jg extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.S_=!1}b_(){if(this.S_)throw new Kl(Wl.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,n,r){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.Oo(e,Mf(t,n),r,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Wl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Kl(Wl.UNKNOWN,e.toString())}))}ko(e,t,n,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.ko(e,Mf(t,n),r,o,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Wl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Kl(Wl.UNKNOWN,e.toString())}))}terminate(){this.S_=!0,this.connection.terminate()}}class Vg{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){0===this.D_&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve()))))}O_(e){"Online"===this.state?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.M_("Offline")))}set(e){this.N_(),this.D_=0,"Online"===e&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.C_?(Ul(t),this.C_=!1):Fl("OnlineStateTracker",t)}N_(){null!==this.v_&&(this.v_.cancel(),this.v_=null)}}class Bg{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=i,this.Q_.uo((e=>{n.enqueueAndForget((async()=>{Jg(this)&&(Fl("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=ql(e);t.k_.add(4),await qg(t),t.K_.set("Unknown"),t.k_.delete(4),await zg(t)}(this))}))})),this.K_=new Vg(n,r)}}async function zg(e){if(Jg(e))for(const t of e.q_)await t(!0)}async function qg(e){for(const t of e.q_)await t(!1)}function Wg(e,t){const n=ql(e);n.B_.has(t.targetId)||(n.B_.set(t.targetId,t),Yg(n)?Qg(n):my(n).s_()&&Hg(n,t))}function Kg(e,t){const n=ql(e),r=my(n);n.B_.delete(t),r.s_()&&Gg(n,t),0===n.B_.size&&(r.s_()?r.a_():Jg(n)&&n.K_.set("Unknown"))}function Hg(e,t){if(e.U_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ac.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}my(e).V_(t)}function Gg(e,t){e.U_.xe(t),my(e).m_(t)}function Qg(e){e.U_=new Ef({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ut:t=>e.B_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),my(e).start(),e.K_.F_()}function Yg(e){return Jg(e)&&!my(e).i_()&&e.B_.size>0}function Jg(e){return 0===ql(e).k_.size}function $g(e){e.U_=void 0}async function Xg(e){e.K_.set("Online")}async function Zg(e){e.B_.forEach(((t,n)=>{Hg(e,t)}))}async function ey(e,t){$g(e),Yg(e)?(e.K_.O_(t),Qg(e)):e.K_.set("Unknown")}async function ty(e,t,n){if(e.K_.set("Online"),t instanceof bf&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.B_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.B_.delete(r),e.U_.removeTarget(r))}(e,t)}catch(n){Fl("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await ny(e,n)}else if(t instanceof _f?e.U_.$e(t):t instanceof wf?e.U_.Je(t):e.U_.Ge(t),!n.isEqual(ac.min()))try{const t=await ig(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.U_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.B_.get(r);i&&e.B_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.B_.get(t);if(!r)return;e.B_.set(t,r.withResumeToken(Nu.EMPTY_BYTE_STRING,r.snapshotVersion)),Gg(e,t);const i=new op(r.target,t,n,r.sequenceNumber);Hg(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Fl("RemoteStore","Failed to raise snapshot:",t),await ny(e,t)}}async function ny(e,t,n){if(!Pc(t))throw t;e.k_.add(1),await qg(e),e.K_.set("Offline"),n||(n=()=>ig(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Fl("RemoteStore","Retrying IndexedDB access"),await n(),e.k_.delete(1),await zg(e)}))}function ry(e,t){return t().catch((n=>ny(e,n,t)))}async function iy(e){const t=ql(e),n=gy(t);let r=t.L_.length>0?t.L_[t.L_.length-1].batchId:-1;for(;sy(t);)try{const e=await og(t.localStore,r);if(null===e){0===t.L_.length&&n.a_();break}r=e.batchId,oy(t,e)}catch(e){await ny(t,e)}ay(t)&&ly(t)}function sy(e){return Jg(e)&&e.L_.length<10}function oy(e,t){e.L_.push(t);const n=gy(e);n.s_()&&n.f_&&n.g_(t.mutations)}function ay(e){return Jg(e)&&!gy(e).i_()&&e.L_.length>0}function ly(e){gy(e).start()}async function cy(e){gy(e).w_()}async function uy(e){const t=gy(e);for(const n of e.L_)t.g_(n.mutations)}async function hy(e,t,n){const r=e.L_.shift(),i=nf.from(r,t,n);await ry(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await iy(e)}async function dy(e,t){t&&gy(e).f_&&await async function(e,t){if(function(e){return lf(e)&&e!==Wl.ABORTED}(t.code)){const n=e.L_.shift();gy(e).__(),await ry(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await iy(e)}}(e,t),ay(e)&&ly(e)}async function fy(e,t){const n=ql(e);n.asyncQueue.verifyOperationInProgress(),Fl("RemoteStore","RemoteStore received new credentials");const r=Jg(n);n.k_.add(3),await qg(n),r&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.k_.delete(3),await zg(n)}async function py(e,t){const n=ql(e);t?(n.k_.delete(2),await zg(n)):t||(n.k_.add(2),await qg(n),n.K_.set("Unknown"))}function my(e){return e.W_||(e.W_=function(e,t,n){const r=ql(e);return r.b_(),new Fg(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Ro:Xg.bind(null,e),mo:Zg.bind(null,e),po:ey.bind(null,e),R_:ty.bind(null,e)}),e.q_.push((async t=>{t?(e.W_.__(),Yg(e)?Qg(e):e.K_.set("Unknown")):(await e.W_.stop(),$g(e))}))),e.W_}function gy(e){return e.G_||(e.G_=function(e,t,n){const r=ql(e);return r.b_(),new Ug(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Ro:()=>Promise.resolve(),mo:cy.bind(null,e),po:dy.bind(null,e),p_:uy.bind(null,e),y_:hy.bind(null,e)}),e.q_.push((async t=>{t?(e.G_.__(),await iy(e)):(await e.G_.stop(),e.L_.length>0&&(Fl("RemoteStore","Stopping write stream with ".concat(e.L_.length," pending writes")),e.L_=[]))}))),e.G_}class yy{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Hl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new yy(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Kl(Wl.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vy(e,t){if(Ul("AsyncQueue","".concat(t,": ").concat(e)),Pc(e))return new Kl(Wl.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class _y{static emptySet(e){return new _y(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||dc.comparator(t.key,n.key):(e,t)=>dc.comparator(e.key,t.key),this.keyedMap=fd(),this.sortedSet=new Su(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof _y))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new _y;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class wy{constructor(){this.z_=new Su(dc.comparator)}track(e){const t=e.doc.key,n=this.z_.get(t);n?0!==e.type&&3===n.type?this.z_=this.z_.insert(t,e):3===e.type&&1!==n.type?this.z_=this.z_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.z_=this.z_.remove(t):1===e.type&&2===n.type?this.z_=this.z_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):Bl():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class by{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new by(e,t,_y.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Sy{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some((e=>e.Z_()))}}class Ey{constructor(){this.queries=Cy(),this.onlineState="Unknown",this.X_=new Set}terminate(){!function(e,t){const n=ql(e),r=n.queries;n.queries=Cy(),r.forEach(((e,n)=>{for(const r of n.J_)r.onError(t)}))}(this,new Kl(Wl.ABORTED,"Firestore shutting down"))}}function Cy(){return new cd((e=>rd(e)),nd)}async function ky(e,t){const n=ql(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.Y_()&&t.Z_()&&(r=2):(s=new Sy,r=t.Z_()?0:1);try{switch(r){case 0:s.H_=await n.onListen(i,!0);break;case 1:s.H_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=vy(e,"Initialization of query '".concat(id(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.J_.push(t),t.ea(n.onlineState),s.H_&&t.ta(s.H_)&&Ay(n)}async function Iy(e,t){const n=ql(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.J_.indexOf(t);e>=0&&(s.J_.splice(e,1),0===s.J_.length?i=t.Z_()?0:1:!s.Y_()&&t.Z_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Ty(e,t){const n=ql(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.J_)e.ta(i)&&(r=!0);t.H_=i}}r&&Ay(n)}function xy(e,t,n){const r=ql(e),i=r.queries.get(t);if(i)for(const s of i.J_)s.onError(n);r.queries.delete(t)}function Ay(e){e.X_.forEach((e=>{e.next()}))}var Ny,Py;(Py=Ny||(Ny={})).na="default",Py.Cache="cache";class Ry{constructor(e,t,n){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=n||{}}ta(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new by(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache)return!0;if(!this.Z_())return!0;const n="Offline"!==t;return(!this.options.ua||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}aa(e){e=by.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==Ny.Cache}}class Oy{constructor(e,t){this.ca=e,this.byteLength=t}la(){return"metadata"in this.ca}}class Dy{constructor(e){this.serializer=e}As(e){return jf(this.serializer,e)}Rs(e){return e.metadata.exists?Kf(this.serializer,e.document,!1):fh.newNoDocument(this.As(e.metadata.name),this.Vs(e.metadata.readTime))}Vs(e){return Df(e)}}class Ly{constructor(e,t,n){this.ha=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=My(e)}Pa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ca.namedQuery)this.queries.push(e.ca.namedQuery);else if(e.ca.documentMetadata){this.documents.push({metadata:e.ca.documentMetadata}),e.ca.documentMetadata.exists||++t;const n=cc.fromString(e.ca.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.ca.document&&(this.documents[this.documents.length-1].document=e.ca.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Ta(e){const t=new Map,n=new Dy(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.As(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||wd()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=ql(e);let s=wd(),o=hd();for(const c of n){const e=t.As(c.metadata.name);c.document&&(s=s.add(e));const n=t.Rs(c);n.setReadTime(t.Vs(c.metadata.readTime)),o=o.insert(e,n)}const a=i.hs.newChangeBuffer({trackRemovals:!0}),l=await ag(i,function(e){return Xh(Qh(cc.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>sg(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.Gr.removeMatchingKeysForTargetId(e,l.targetId).next((()=>i.Gr.addMatchingKeys(e,s,l.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.Is,t.Es))).next((()=>t.Is))))))}(this.localStore,new Dy(this.serializer),this.documents,this.ha.id),t=this.Ta(this.documents);for(const n of this.queries)await fg(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,Ia:this.collectionGroups,Ea:e}}}function My(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class Fy{constructor(e){this.key=e}}class Uy{constructor(e){this.key=e}}class jy{constructor(e,t){this.query=e,this.da=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=wd(),this.mutatedKeys=wd(),this.Va=ad(e),this.ma=new _y(this.Va)}get fa(){return this.da}ga(e,t){const n=t?t.pa:new wy,r=t?t.ma:this.ma;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=sd(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.ya(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.Va(u,a)>0||l&&this.Va(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ma:s,pa:n,ss:o,mutatedKeys:i}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const s=e.pa.j_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Bl()}};return n(e)-n(t)}(e.type,t.type)||this.Va(e.doc,t.doc))),this.wa(n),r=null!=r&&r;const o=t&&!r?this.Sa():[],a=0===this.Ra.size&&this.current&&!r?1:0,l=a!==this.Aa;return this.Aa=a,0!==s.length||l?{snapshot:new by(this.query,e.ma,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),ba:o}:{ba:o}}ea(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ma:this.ma,pa:new wy,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach((e=>this.da=this.da.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.da=this.da.delete(e))),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=wd(),this.ma.forEach((e=>{this.Da(e.key)&&(this.Ra=this.Ra.add(e.key))}));const t=[];return e.forEach((e=>{this.Ra.has(e)||t.push(new Uy(e))})),this.Ra.forEach((n=>{e.has(n)||t.push(new Fy(n))})),t}va(e){this.da=e.ds,this.Ra=wd();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return by.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,0===this.Aa,this.hasCachedResults)}}class Vy{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class By{constructor(e){this.key=e,this.Fa=!1}}class zy{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Ma={},this.xa=new cd((e=>rd(e)),nd),this.Oa=new Map,this.Na=new Set,this.La=new Su(dc.comparator),this.Ba=new Map,this.ka=new Lm,this.qa={},this.Qa=new Map,this.Ka=cm.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return!0===this.$a}}async function qy(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=vv(e);let i;const s=r.xa.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Ca()):i=await Ky(r,t,n,!0),i}async function Wy(e,t){const n=vv(e);await Ky(n,t,!0,!1)}async function Ky(e,t,n,r){const i=await ag(e.localStore,Xh(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await Hy(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&Wg(e.remoteStore,i),a}async function Hy(e,t,n,r,i){e.Ua=(t,n,r)=>async function(e,t,n,r){let i=t.view.ga(n);i.ss&&(i=await cg(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ga(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return iv(e,t.targetId,a.ba),a.snapshot}(e,t,n,r);const s=await cg(e.localStore,t,!0),o=new jy(t,s.ds),a=o.ga(s.documents),l=vf.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);iv(e,n,c.ba);const u=new Vy(t,n,o);return e.xa.set(t,u),e.Oa.has(n)?e.Oa.get(n).push(t):e.Oa.set(n,[t]),c.snapshot}async function Gy(e,t,n){const r=ql(e),i=r.xa.get(t),s=r.Oa.get(i.targetId);if(s.length>1)return r.Oa.set(i.targetId,s.filter((e=>!nd(e,t)))),void r.xa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await lg(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Kg(r.remoteStore,i.targetId),nv(r,i.targetId)})).catch(Cc)):(nv(r,i.targetId),await lg(r.localStore,i.targetId,!0))}async function Qy(e,t){const n=ql(e),r=n.xa.get(t),i=n.Oa.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Kg(n.remoteStore,r.targetId))}async function Yy(e,t){const n=ql(e);try{const e=await function(e,t){const n=ql(e),r=t.snapshotVersion;let i=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.hs.newChangeBuffer({trackRemovals:!0});i=n.us;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Gr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Gr.addMatchingKeys(e,s.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(Nu.EMPTY_BYTE_STRING,ac.min()).withLastLimboFreeSnapshotVersion(ac.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&o.push(n.Gr.updateTargetData(e,c))}));let a=hd(),l=wd();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(sg(e,s,t.documentUpdates).next((e=>{a=e.Is,l=e.Es}))),!r.isEqual(ac.min())){const t=n.Gr.getLastRemoteSnapshotVersion(e).next((t=>n.Gr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return kc.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.us=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Ba.get(t);r&&(zl(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Fa=!0:e.modifiedDocuments.size>0?zl(r.Fa):e.removedDocuments.size>0&&(zl(r.Fa),r.Fa=!1))})),await av(n,e,t)}catch(e){await Cc(e)}}function Jy(e,t,n){const r=ql(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.xa.forEach(((n,r)=>{const i=r.view.ea(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=ql(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.J_)i.ea(t)&&(r=!0)})),r&&Ay(n)}(r.eventManager,t),e.length&&r.Ma.R_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function $y(e,t,n){const r=ql(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Ba.get(t),s=i&&i.key;if(s){let e=new Su(dc.comparator);e=e.insert(s,fh.newNoDocument(s,ac.min()));const n=wd().add(s),i=new yf(ac.min(),new Map,new Su(rc),e,n);await Yy(r,i),r.La=r.La.remove(s),r.Ba.delete(t),ov(r)}else await lg(r.localStore,t,!1).then((()=>nv(r,t,n))).catch(Cc)}async function Xy(e,t){const n=ql(e),r=t.batch.batchId;try{const e=await function(e,t){const n=ql(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.hs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=kc.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);zl(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=wd();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);tv(n,r,null),ev(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await av(n,e)}catch(e){await Cc(e)}}async function Zy(e,t,n){const r=ql(e);try{const e=await function(e,t){const n=ql(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(zl(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);tv(r,t,n),ev(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await av(r,e)}catch(n){await Cc(n)}}function ev(e,t){(e.Qa.get(t)||[]).forEach((e=>{e.resolve()})),e.Qa.delete(t)}function tv(e,t,n){const r=ql(e);let i=r.qa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.qa[r.currentUser.toKey()]=i}}function nv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Oa.get(t))e.xa.delete(r),n&&e.Ma.Wa(r,n);e.Oa.delete(t),e.isPrimaryClient&&e.ka.yr(t).forEach((t=>{e.ka.containsKey(t)||rv(e,t)}))}function rv(e,t){e.Na.delete(t.path.canonicalString());const n=e.La.get(t);null!==n&&(Kg(e.remoteStore,n),e.La=e.La.remove(t),e.Ba.delete(n),ov(e))}function iv(e,t,n){for(const r of n)r instanceof Fy?(e.ka.addReference(r.key,t),sv(e,r)):r instanceof Uy?(Fl("SyncEngine","Document no longer in limbo: "+r.key),e.ka.removeReference(r.key,t),e.ka.containsKey(r.key)||rv(e,r.key)):Bl()}function sv(e,t){const n=t.key,r=n.path.canonicalString();e.La.get(n)||e.Na.has(r)||(Fl("SyncEngine","New document in limbo: "+n),e.Na.add(r),ov(e))}function ov(e){for(;e.Na.size>0&&e.La.size<e.maxConcurrentLimboResolutions;){const t=e.Na.values().next().value;e.Na.delete(t);const n=new dc(cc.fromString(t)),r=e.Ka.next();e.Ba.set(r,new By(n)),e.La=e.La.insert(n,r),Wg(e.remoteStore,new op(Xh(Qh(n.path)),r,"TargetPurposeLimboResolution",Uc.oe))}}async function av(e,t,n){const r=ql(e),i=[],s=[],o=[];r.xa.isEmpty()||(r.xa.forEach(((e,a)=>{o.push(r.Ua(a,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Xm.zi(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.Ma.R_(i),await async function(e,t){const n=ql(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>kc.forEach(t,(t=>kc.forEach(t.Wi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>kc.forEach(t.Gi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Pc(e))throw e;Fl("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.us.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.us=n.us.insert(e,i)}}}(r.localStore,s))}async function lv(e,t){const n=ql(e);if(!n.currentUser.isEqual(t)){Fl("SyncEngine","User change. New user:",t.toKey());const e=await rg(n.localStore,t);n.currentUser=t,function(e,t){e.Qa.forEach((e=>{e.forEach((e=>{e.reject(new Kl(Wl.CANCELLED,t))}))})),e.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await av(n,e.Ts)}}function cv(e,t){const n=ql(e),r=n.Ba.get(t);if(r&&r.Fa)return wd().add(r.key);{let e=wd();const r=n.Oa.get(t);if(!r)return e;for(const t of r){const r=n.xa.get(t);e=e.unionWith(r.view.fa)}return e}}async function uv(e,t){const n=ql(e),r=await cg(n.localStore,t.query,!0),i=t.view.va(r);return n.isPrimaryClient&&iv(n,t.targetId,i.ba),i}async function hv(e,t){const n=ql(e);return hg(n.localStore,t).then((e=>av(n,e)))}async function dv(e,t,n,r){const i=ql(e),s=await function(e,t){const n=ql(e),r=ql(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.On(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):kc.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await iy(i.remoteStore):"acknowledged"===n||"rejected"===n?(tv(i,t,r||null),ev(i,t),function(e,t){ql(ql(e).mutationQueue).Ln(t)}(i.localStore,t)):Bl(),await av(i,s)):Fl("SyncEngine","Cannot apply mutation batch with id: "+t)}async function fv(e,t,n){const r=ql(e),i=[],s=[];for(const o of t){let e;const t=r.Oa.get(o);if(t&&0!==t.length){e=await ag(r.localStore,Xh(t[0]));for(const e of t){const t=r.xa.get(e),n=await uv(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await ug(r.localStore,o);e=await ag(r.localStore,t),await Hy(r,pv(t),o,!1,e.resumeToken)}i.push(e)}return r.Ma.R_(s),i}function pv(e){return Gh(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function mv(e){return function(e){return ql(ql(e).persistence).$i()}(ql(e).localStore)}async function gv(e,t,n,r){const i=ql(e);if(i.$a)return void Fl("SyncEngine","Ignoring unexpected query state notification.");const s=i.Oa.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await hg(i.localStore,od(s[0])),r=yf.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,Nu.EMPTY_BYTE_STRING);await av(i,e,r);break}case"rejected":await lg(i.localStore,t,!0),nv(i,t,r);break;default:Bl()}}async function yv(e,t,n){const r=vv(e);if(r.$a){for(const e of t){if(r.Oa.has(e)&&r.sharedClientState.isActiveQueryTarget(e)){Fl("SyncEngine","Adding an already active target "+e);continue}const t=await ug(r.localStore,e),n=await ag(r.localStore,t);await Hy(r,pv(t),n.targetId,!1,n.resumeToken),Wg(r.remoteStore,n)}for(const e of n)r.Oa.has(e)&&await lg(r.localStore,e,!1).then((()=>{Kg(r.remoteStore,e),nv(r,e)})).catch(Cc)}}function vv(e){const t=ql(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Yy.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=cv.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=$y.bind(null,t),t.Ma.R_=Ty.bind(null,t.eventManager),t.Ma.Wa=xy.bind(null,t.eventManager),t}function _v(e){const t=ql(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Xy.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Zy.bind(null,t),t}class wv{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Dg(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return ng(this.persistence,new eg,e.initialUser,this.serializer)}ja(e){return new Bm(qm.ei,this.serializer)}za(e){return new Eg}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wv.provider={build:()=>new wv};class bv extends wv{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){zl(this.persistence.referenceDelegate instanceof Wm);const n=this.persistence.referenceDelegate.garbageCollector;return new gm(n,e.asyncQueue,t)}ja(e){const t=void 0!==this.cacheSizeBytes?tm.withCacheSize(this.cacheSizeBytes):tm.DEFAULT;return new Bm((e=>Wm.ei(e,t)),this.serializer)}}class Sv extends wv{constructor(e,t,n){super(),this.Za=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Za.initialize(this,e),await _v(this.Za.syncEngine),await iy(this.Za.remoteStore),await this.persistence.Si((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}Ha(e){return ng(this.persistence,new eg,e.initialUser,this.serializer)}Ja(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new gm(n,e.asyncQueue,t)}Ya(e,t){const n=new Fc(t,this.persistence);return new Mc(e.asyncQueue,n)}ja(e){const t=$m(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?tm.withCacheSize(this.cacheSizeBytes):tm.DEFAULT;return new Qm(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Rg(),Og(),this.serializer,this.sharedClientState,!!this.forceOwnership)}za(e){return new Eg}}class Ev extends Sv{constructor(e,t){super(e,t,!1),this.Za=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Za.syncEngine;this.sharedClientState instanceof Sg&&(this.sharedClientState.syncEngine={io:dv.bind(null,t),so:gv.bind(null,t),oo:yv.bind(null,t),$i:mv.bind(null,t),ro:hv.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Si((async e=>{await async function(e,t){const n=ql(e);if(vv(n),_v(n),!0===t&&!0!==n.$a){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await fv(n,e.toArray());n.$a=!0,await py(n.remoteStore,!0);for(const r of t)Wg(n.remoteStore,r)}else if(!1===t&&!1!==n.$a){const e=[];let t=Promise.resolve();n.Oa.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(nv(n,i),lg(n.localStore,i,!0)))),Kg(n.remoteStore,i)})),await t,await fv(n,e),function(e){const t=ql(e);t.Ba.forEach(((e,n)=>{Kg(t.remoteStore,n)})),t.ka.wr(),t.Ba=new Map,t.La=new Su(dc.comparator)}(n),n.$a=!1,await py(n.remoteStore,!1)}}(this.Za.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}za(e){const t=Rg();if(!Sg.p(t))throw new Kl(Wl.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=$m(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Sg(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class Cv{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Jy(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=lv.bind(null,this.syncEngine),await py(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Ey}createDatastore(e){const t=Dg(e.databaseInfo.databaseId),n=function(e){return new Pg(e)}(e.databaseInfo);return function(e,t,n,r){return new jg(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Bg(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>Jy(this.syncEngine,e,0)),kg.p()?new kg:new Cg)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new zy(e,t,n,r,i,s);return o&&(a.$a=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=ql(e);Fl("RemoteStore","RemoteStore shutting down."),t.k_.add(5),await qg(t),t.Q_.shutdown(),t.K_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}function kv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}Cv.provider={build:()=>new Cv};class Iv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):Ul("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class Tv{constructor(e,t){this.tu=e,this.serializer=t,this.metadata=new Hl,this.buffer=new Uint8Array,this.nu=new TextDecoder("utf-8"),this.ru().then((e=>{e&&e.la()?this.metadata.resolve(e.ca.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.ca))))}),(e=>this.metadata.reject(e)))}close(){return this.tu.cancel()}async getMetadata(){return this.metadata.promise}async Ga(){return await this.getMetadata(),this.ru()}async ru(){const e=await this.iu();if(null===e)return null;const t=this.nu.decode(e),n=Number(t);isNaN(n)&&this.su("length string (".concat(t,") is not valid number"));const r=await this.ou(n);return new Oy(JSON.parse(r),e.length+n)}_u(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async iu(){for(;this._u()<0&&!await this.au(););if(0===this.buffer.length)return null;const e=this._u();e<0&&this.su("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async ou(e){for(;this.buffer.length<e;)await this.au()&&this.su("Reached the end of bundle when more is expected.");const t=this.nu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}su(e){throw this.tu.cancel(),new Error("Invalid bundle format: ".concat(e))}async au(){const e=await this.tu.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class xv{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Kl(Wl.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=ql(e),r={documents:t.map((e=>Uf(n.serializer,e)))},i=await n.ko("BatchGetDocuments",n.serializer.databaseId,cc.emptyPath(),r,t.length),s=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){zl(!!t.found),t.found.name,t.found.updateTime;const n=jf(e,t.found.name),r=Df(t.found.updateTime),i=t.found.createTime?Df(t.found.createTime):ac.min(),s=new hh({mapValue:{fields:t.found.fields}});return fh.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){zl(!!t.missing),zl(!!t.readTime);const n=jf(e,t.missing),r=Df(t.readTime);return fh.newNoDocument(n,r)}(e,t):Bl()}(n.serializer,e);s.set(t.key.toString(),t)}));const o=[];return t.forEach((e=>{const t=s.get(e.toString());zl(!!t),o.push(t)})),o}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Zd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=dc.fromPath(t);this.mutations.push(new ef(n,this.precondition(n)))})),await async function(e,t){const n=ql(e),r={writes:t.map((e=>Hf(n.serializer,e)))};await n.Oo("Commit",n.serializer.databaseId,cc.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Bl();t=ac.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Kl(Wl.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ac.min())?Vd.exists(!1):Vd.updateTime(t):Vd.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ac.min()))throw new Kl(Wl.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Vd.updateTime(t)}return Vd.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Av{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.uu=n.maxAttempts,this.r_=new Lg(this.asyncQueue,"transaction_retry")}cu(){this.uu-=1,this.lu()}lu(){this.r_.jo((async()=>{const e=new xv(this.datastore),t=this.hu(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.Pu(e)}))))})).catch((e=>{this.Pu(e)}))}))}hu(e){try{const t=this.updateFunction(e);return!jc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Pu(e){this.uu>0&&this.Tu(e)?(this.uu-=1,this.asyncQueue.enqueueAndForget((()=>(this.lu(),Promise.resolve())))):this.deferred.reject(e)}Tu(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!lf(t)}return!1}}class Nv{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Ol.UNAUTHENTICATED,this.clientId=nc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{Fl("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Fl("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Hl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=vy(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Pv(e,t){e.asyncQueue.verifyOperationInProgress(),Fl("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await rg(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Rv(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Ov(e);Fl("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>fy(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>fy(t.remoteStore,n))),e._onlineComponents=t}async function Ov(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Fl("FirestoreClient","Using user provided OfflineComponentProvider");try{await Pv(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===Wl.FAILED_PRECONDITION||e.code===Wl.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;jl("Error using user provided cache. Falling back to memory cache: "+n),await Pv(e,new wv)}}else Fl("FirestoreClient","Using default OfflineComponentProvider"),await Pv(e,new bv(void 0));return e._offlineComponents}async function Dv(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Fl("FirestoreClient","Using user provided OnlineComponentProvider"),await Rv(e,e._uninitializedComponentsProvider._online)):(Fl("FirestoreClient","Using default OnlineComponentProvider"),await Rv(e,new Cv))),e._onlineComponents}function Lv(e){return Ov(e).then((e=>e.persistence))}function Mv(e){return Ov(e).then((e=>e.localStore))}function Fv(e){return Dv(e).then((e=>e.remoteStore))}function Uv(e){return Dv(e).then((e=>e.syncEngine))}function jv(e){return Dv(e).then((e=>e.datastore))}async function Vv(e){const t=await Dv(e),n=t.eventManager;return n.onListen=qy.bind(null,t.syncEngine),n.onUnlisten=Gy.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Wy.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Qy.bind(null,t.syncEngine),n}function Bv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Hl;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Iv({next:a=>{s.eu(),t.enqueueAndForget((()=>Iy(e,o)));const l=a.docs.has(n);!l&&a.fromCache?i.reject(new Kl(Wl.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&a.fromCache&&r&&"server"===r.source?i.reject(new Kl(Wl.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:e=>i.reject(e)}),o=new Ry(Qh(n.path),s,{includeMetadataChanges:!0,ua:!0});return ky(e,o)}(await Vv(e),e.asyncQueue,t,n,r))),r.promise}function zv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Hl;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Iv({next:n=>{s.eu(),t.enqueueAndForget((()=>Iy(e,o))),n.fromCache&&"server"===r.source?i.reject(new Kl(Wl.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new Ry(n,s,{includeMetadataChanges:!0,ua:!0});return ky(e,o)}(await Vv(e),e.asyncQueue,t,n,r))),r.promise}function qv(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?hf().encode(e):e,function(e,t){return new Tv(e,t)}(function(e,t){if(e instanceof Uint8Array)return kv(e,t);if(e instanceof ArrayBuffer)return kv(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,Dg(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=ql(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=ql(e),r=Df(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.jr.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(My(r));const i=new Ly(r,e.localStore,t.serializer);let s=await t.Ga();for(;s;){const e=await i.Pa(s);e&&n._updateProgress(e),s=await t.Ga()}const o=await i.complete();return await av(e,o.Ea,void 0),await function(e,t){const n=ql(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.jr.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.Ia)}catch(e){return jl("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await Uv(e),i,r)}))}function Wv(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Kv=new Map;function Hv(e,t,n){if(!n)throw new Kl(Wl.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Gv(e,t,n,r){if(!0===t&&!0===r)throw new Kl(Wl.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Qv(e){if(!dc.isDocumentKey(e))throw new Kl(Wl.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Yv(e){if(dc.isDocumentKey(e))throw new Kl(Wl.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Jv(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Bl()}function $v(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Kl(Wl.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Jv(e);throw new Kl(Wl.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Xv(e,t){if(t<=0)throw new Kl(Wl.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class Zv{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Kl(Wl.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Kl(Wl.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Gv("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Wv(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Kl(Wl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Kl(Wl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Kl(Wl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class e_{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Kl(Wl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Kl(Wl.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zv(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Ql;switch(e.type){case"firstParty":return new Xl(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Kl(Wl.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Kv.get(e);t&&(Fl("ComponentProvider","Removing Datastore"),Kv.delete(e),t.terminate())}(this),Promise.resolve()}}function t_(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=$v(e,e_))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&jl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Ol.MOCK_USER;else{t=Ks(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Kl(Wl.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Ol(s)}e._authCredentials=new Yl(new Gl(t,n))}}class n_{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new n_(this.firestore,e,this._query)}}class r_{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new i_(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new r_(this.firestore,e,this._key)}}class i_ extends n_{constructor(e,t,n){super(e,t,Qh(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new r_(this.firestore,null,new dc(e))}withConverter(e){return new i_(this.firestore,e,this._path)}}function s_(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=To(e),Hv("collection","path",t),e instanceof e_){const n=cc.fromString(t,...r);return Yv(n),new i_(e,null,n)}{if(!(e instanceof r_||e instanceof i_))throw new Kl(Wl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(cc.fromString(t,...r));return Yv(n),new i_(e.firestore,null,n)}}function o_(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=To(e),1===arguments.length&&(t=nc.newId()),Hv("doc","path",t),e instanceof e_){const n=cc.fromString(t,...r);return Qv(n),new r_(e,null,new dc(n))}{if(!(e instanceof r_||e instanceof i_))throw new Kl(Wl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(cc.fromString(t,...r));return Qv(n),new r_(e.firestore,e instanceof i_?e.converter:null,new dc(n))}}function a_(e,t){return e=To(e),t=To(t),(e instanceof r_||e instanceof i_)&&(t instanceof r_||t instanceof i_)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function l_(e,t){return e=To(e),t=To(t),e instanceof n_&&t instanceof n_&&e.firestore===t.firestore&&nd(e._query,t._query)&&e.converter===t.converter}class c_{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new Lg(this,"async_queue_retry"),this.fu=()=>{const e=Og();e&&Fl("AsyncQueue","Visibility state changed to "+e.visibilityState),this.r_.Jo()},this.gu=e;const t=Og();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const t=Og();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise((()=>{}));const t=new Hl;return this.yu((()=>this.Eu&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Iu.push(e),this.wu())))}async wu(){if(0!==this.Iu.length){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(SM){if(!Pc(SM))throw SM;Fl("AsyncQueue","Operation failed with retryable error: "+SM)}this.Iu.length>0&&this.r_.jo((()=>this.wu()))}}yu(e){const t=this.gu.then((()=>(this.Ru=!0,e().catch((e=>{this.Au=e,this.Ru=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Ul("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.Ru=!1,e))))));return this.gu=t,t}enqueueAfterDelay(e,t,n){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const r=yy.createAndSchedule(this,e,t,n,(e=>this.Su(e)));return this.du.push(r),r}pu(){this.Au&&Bl()}verifyOperationInProgress(){}async bu(){let e;do{e=this.gu,await e}while(e!==this.gu)}Du(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then((()=>{this.du.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.du)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.bu()}))}Cu(e){this.mu.push(e)}Su(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}function u_(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class h_{constructor(){this._progressObserver={},this._taskCompletionResolver=new Hl,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class d_ extends e_{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new c_,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new c_(e),this._firestoreClient=void 0,await e}}}function f_(e){if(e._terminated)throw new Kl(Wl.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||p_(e),e._firestoreClient}function p_(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Uu(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Wv(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Nv(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}function m_(e,t,n){if((e=$v(e,d_))._firestoreClient||e._terminated)throw new Kl(Wl.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(e._componentsProvider||e._getSettings().localCache)throw new Kl(Wl.FAILED_PRECONDITION,"SDK cache is already specified.");e._componentsProvider={_online:t,_offline:n},p_(e)}function g_(e){return function(e){const t=new Hl;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=ql(e);Jg(n.remoteStore)||Fl("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=ql(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Qa.get(e)||[];r.push(t),n.Qa.set(e,r)}catch(e){const n=vy(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await Uv(e),t))),t.promise}(f_(e=$v(e,d_)))}function y_(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await Lv(e),n=await Fv(e);return t.setNetworkEnabled(!0),function(e){const t=ql(e);return t.k_.delete(0),zg(t)}(n)}))}(f_(e=$v(e,d_)))}function v_(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await Lv(e),n=await Fv(e);return t.setNetworkEnabled(!1),async function(e){const t=ql(e);t.k_.add(0),await qg(t),t.K_.set("Offline")}(n)}))}(f_(e=$v(e,d_)))}function __(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=ql(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.jr.getNamedQuery(e,t)))}(await Mv(e),t)))}(f_(e=$v(e,d_)),t).then((t=>t?new n_(e,null,t.query):null))}class w_{constructor(e){this._byteString=e}static fromBase64String(e){try{return new w_(Nu.fromBase64String(e))}catch(e){throw new Kl(Wl.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new w_(Nu.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class b_{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Kl(Wl.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hc(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class S_{constructor(e){this._methodName=e}}class E_{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Kl(Wl.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Kl(Wl.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return rc(this._lat,e._lat)||rc(this._long,e._long)}}class C_{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const k_=/^__.*__$/;class I_{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Yd(e,this.data,this.fieldMask,t,this.fieldTransforms):new Qd(e,this.data,t,this.fieldTransforms)}}class T_{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Yd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function x_(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Bl()}}class A_{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Fu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new A_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.xu({path:n,Nu:!1});return r.Lu(e),r}Bu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.xu({path:n,Nu:!1});return r.Fu(),r}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return Y_(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(0===e.length)throw this.qu("Document fields must not be empty");if(x_(this.Mu)&&k_.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class N_{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Dg(e)}$u(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new A_({Mu:e,methodName:t,Ku:n,path:hc.emptyPath(),Nu:!1,Qu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function P_(e){const t=e._freezeSettings(),n=Dg(e._databaseId);return new N_(e._databaseId,!!t.ignoreUndefinedProperties,n)}function R_(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.$u(s.merge||s.mergeFields?2:0,t,n,i);K_("Data must be an object, but it was:",o,r);const a=q_(r,o);let l,c;if(s.merge)l=new xu(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=H_(t,r,n);if(!o.contains(i))throw new Kl(Wl.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));J_(e,i)||e.push(i)}l=new xu(e),c=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=o.fieldTransforms;return new I_(new hh(a),l,c)}class O_ extends S_{_toFieldTransform(e){if(2!==e.Mu)throw 1===e.Mu?e.qu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.qu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof O_}}function D_(e,t,n){return new A_({Mu:3,Ku:t.settings.Ku,methodName:e._methodName,Nu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class L_ extends S_{_toFieldTransform(e){return new Ud(e.path,new Nd)}isEqual(e){return e instanceof L_}}class M_ extends S_{constructor(e,t){super(e),this.Uu=t}_toFieldTransform(e){const t=D_(this,e,!0),n=this.Uu.map((e=>z_(e,t))),r=new Pd(n);return new Ud(e.path,r)}isEqual(e){return e instanceof M_&&fo(this.Uu,e.Uu)}}class F_ extends S_{constructor(e,t){super(e),this.Uu=t}_toFieldTransform(e){const t=D_(this,e,!0),n=this.Uu.map((e=>z_(e,t))),r=new Od(n);return new Ud(e.path,r)}isEqual(e){return e instanceof F_&&fo(this.Uu,e.Uu)}}class U_ extends S_{constructor(e,t){super(e),this.Wu=t}_toFieldTransform(e){const t=new Ld(e.serializer,kd(e.serializer,this.Wu));return new Ud(e.path,t)}isEqual(e){return e instanceof U_&&this.Wu===e.Wu}}function j_(e,t,n,r){const i=e.$u(1,t,n);K_("Data must be an object, but it was:",i,r);const s=[],o=hh.empty();wu(r,((e,r)=>{const a=Q_(t,e,n);r=To(r);const l=i.Bu(a);if(r instanceof O_)s.push(a);else{const e=z_(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new xu(s);return new T_(o,a,i.fieldTransforms)}function V_(e,t,n,r,i,s){const o=e.$u(1,t,n),a=[H_(t,r,n)],l=[i];if(s.length%2!=0)throw new Kl(Wl.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(H_(t,s[d])),l.push(s[d+1]);const c=[],u=hh.empty();for(let d=a.length-1;d>=0;--d)if(!J_(c,a[d])){const e=a[d];let t=l[d];t=To(t);const n=o.Bu(e);if(t instanceof O_)c.push(e);else{const r=z_(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new xu(c);return new T_(u,h,o.fieldTransforms)}function B_(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return z_(n,e.$u(r?4:3,t))}function z_(e,t){if(W_(e=To(e)))return K_("Unsupported field value:",t,e),q_(e,t);if(e instanceof S_)return function(e,t){if(!x_(t.Mu))throw t.qu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.qu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Nu&&4!==t.Mu)throw t.qu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=z_(i,t.ku(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=To(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return kd(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=oc.fromDate(e);return{timestampValue:Pf(t.serializer,n)}}if(e instanceof oc){const n=new oc(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Pf(t.serializer,n)}}if(e instanceof E_)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof w_)return{bytesValue:Rf(t.serializer,e._byteString)};if(e instanceof r_){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.qu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Lf(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof C_)return function(e,t){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map((e=>{if("number"!=typeof e)throw t.qu("VectorValues must only contain numeric values.");return Ed(t.serializer,e)}))}}}}}}(e,t);throw t.qu("Unsupported field value: ".concat(Jv(e)))}(e,t)}function q_(e,t){const n={};return bu(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):wu(e,((e,r)=>{const i=z_(r,t.Ou(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function W_(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof oc||e instanceof E_||e instanceof w_||e instanceof r_||e instanceof S_||e instanceof C_)}function K_(e,t,n){if(!W_(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Jv(n);throw"an object"===r?t.qu(e+" a custom object"):t.qu(e+" "+r)}}function H_(e,t,n){if((t=To(t))instanceof b_)return t._internalPath;if("string"==typeof t)return Q_(e,t);throw Y_("Field path arguments must be of type string or ",e,!1,void 0,n)}const G_=new RegExp("[~\\*/\\[\\]]");function Q_(e,t,n){if(t.search(G_)>=0)throw Y_("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new b_(...t.split("."))._internalPath}catch(d){throw Y_("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Y_(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new Kl(Wl.INVALID_ARGUMENT,a+e+l)}function J_(e,t){return e.some((e=>e.isEqual(t)))}class $_{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new r_(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new X_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Z_("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class X_ extends $_{data(){return super.data()}}function Z_(e,t){return"string"==typeof t?Q_(e,t):t instanceof b_?t._internalPath:t._delegate._internalPath}function ew(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Kl(Wl.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tw{}class nw extends tw{}function rw(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof tw&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof sw)).length,n=e.filter((e=>e instanceof iw)).length;if(t>1||t>0&&n>0)throw new Kl(Wl.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class iw extends nw{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new iw(e,t,n)}_apply(e){const t=this._parse(e);return fw(e._query,t),new n_(e.firestore,e.converter,ed(e._query,t))}_parse(e){const t=P_(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Kl(Wl.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){dw(o,s);const t=[];for(const n of o)t.push(hw(r,e,n));a={arrayValue:{values:t}}}else a=hw(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||dw(o,s),a=B_(n,t,o,"in"===s||"not-in"===s);return wh.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class sw extends tw{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new sw(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:bh.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)fw(n,i),n=ed(n,i)}(e._query,t),new n_(e.firestore,e.converter,ed(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class ow extends nw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ow(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Kl(Wl.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Kl(Wl.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new yh(t,n)}(e._query,this._field,this._direction);return new n_(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Hh(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class aw extends nw{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new aw(e,t,n)}_apply(e){return new n_(e.firestore,e.converter,td(e._query,this._limit,this._limitType))}}class lw extends nw{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new lw(e,t,n)}_apply(e){const t=uw(e,this.type,this._docOrFields,this._inclusive);return new n_(e.firestore,e.converter,function(e,t){return new Hh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class cw extends nw{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new cw(e,t,n)}_apply(e){const t=uw(e,this.type,this._docOrFields,this._inclusive);return new n_(e.firestore,e.converter,function(e,t){return new Hh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function uw(e,t,n,r){if(n[0]=To(n[0]),n[0]instanceof $_)return function(e,t,n,r,i){if(!r)throw new Kl(Wl.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const o of $h(e))if(o.field.isKeyField())s.push($u(t,r.key));else{const e=r.data.field(o.field);if(Lu(e))throw new Kl(Wl.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new Kl(Wl.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new ph(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=P_(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new Kl(Wl.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let l=0;l<i.length;l++){const s=i[l];if(o[l].field.isKeyField()){if("string"!=typeof s)throw new Kl(Wl.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!Jh(e)&&-1!==s.indexOf("/"))throw new Kl(Wl.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child(cc.fromString(s));if(!dc.isDocumentKey(n))throw new Kl(Wl.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new dc(n);a.push($u(t,i))}else{const e=B_(n,r,s);a.push(e)}}return new ph(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function hw(e,t,n){if("string"==typeof(n=To(n))){if(""===n)throw new Kl(Wl.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Jh(t)&&-1!==n.indexOf("/"))throw new Kl(Wl.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(cc.fromString(n));if(!dc.isDocumentKey(r))throw new Kl(Wl.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return $u(e,new dc(r))}if(n instanceof r_)return $u(e,n._key);throw new Kl(Wl.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Jv(n),"."))}function dw(e,t){if(!Array.isArray(e)||0===e.length)throw new Kl(Wl.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function fw(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Kl(Wl.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Kl(Wl.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class pw{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(zu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ou(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Du(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Bl()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return wu(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map((e=>Ou(e.doubleValue)));return new C_(i)}convertGeoPoint(e){return new E_(Ou(e.latitude),Ou(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Mu(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Fu(e));default:return null}}convertTimestamp(e){const t=Ru(e);return new oc(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=cc.fromString(e);zl(sp(n));const r=new ju(n.get(1),n.get(3)),i=new dc(n.popFirst(5));return r.isEqual(t)||Ul("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function mw(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class gw extends pw{constructor(e){super(),this.firestore=e}convertBytes(e){return new w_(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new r_(this.firestore,null,t)}}class yw{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vw extends $_{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new _w(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Z_("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class _w extends vw{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class ww{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new yw(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new _w(this._firestore,this._userDataWriter,n.key,n,new yw(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Kl(Wl.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new _w(e._firestore,e._userDataWriter,n.doc.key,n.doc,new yw(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new _w(e._firestore,e._userDataWriter,t.doc.key,t.doc,new yw(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:bw(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function bw(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Bl()}}function Sw(e,t){return e instanceof vw&&t instanceof vw?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof ww&&t instanceof ww&&e._firestore===t._firestore&&l_(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class Ew extends pw{constructor(e){super(),this.firestore=e}convertBytes(e){return new w_(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new r_(this.firestore,null,t)}}function Cw(e){e=$v(e,r_);const t=$v(e.firestore,d_),n=f_(t),r=new Ew(t);return function(e,t){const n=new Hl;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=ql(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Kl(Wl.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=vy(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await Mv(e),t,n))),n.promise}(n,e._key).then((n=>new vw(t,r,e._key,n,new yw(null!==n&&n.hasLocalMutations,!0),e.converter)))}function kw(e){e=$v(e,n_);const t=$v(e.firestore,d_),n=f_(t),r=new Ew(t);return function(e,t){const n=new Hl;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await cg(e,t,!0),i=new jy(t,r.ds),s=i.ga(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=vy(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await Mv(e),t,n))),n.promise}(n,e._query).then((n=>new ww(t,r,e,n)))}function Iw(e,t,n){e=$v(e,r_);const r=$v(e.firestore,d_),i=mw(e.converter,t,n);return Nw(r,[R_(P_(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Vd.none())])}function Tw(e,t,n){e=$v(e,r_);const r=$v(e.firestore,d_),i=P_(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=To(t))||t instanceof b_?V_(i,"updateDoc",e._key,t,n,a):j_(i,"updateDoc",e._key,t),Nw(r,[s.toMutation(e._key,Vd.exists(!0))])}function xw(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=To(e);let a={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||u_(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(u_(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,h,d;if(e instanceof r_)h=$v(e.firestore,d_),d=Qh(e._key.path),u={next:t=>{n[l]&&n[l](Pw(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=$v(e,n_);h=$v(t.firestore,d_),d=t._query;const r=new Ew(h);u={next:e=>{n[l]&&n[l](new ww(h,r,t,e))},error:n[l+1],complete:n[l+2]},ew(e._query)}return function(e,t,n,r){const i=new Iv(r),s=new Ry(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>ky(await Vv(e),s))),()=>{i.eu(),e.asyncQueue.enqueueAndForget((async()=>Iy(await Vv(e),s)))}}(f_(h),d,c,u)}function Aw(e,t){return function(e,t){const n=new Iv(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){ql(e).X_.add(t),t.next()}(await Vv(e),n))),()=>{n.eu(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){ql(e).X_.delete(t)}(await Vv(e),n)))}}(f_(e=$v(e,d_)),u_(t)?t:{next:t})}function Nw(e,t){return function(e,t){const n=new Hl;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=_v(e);try{const e=await function(e,t){const n=ql(e),r=oc.now(),i=t.reduce(((e,t)=>e.add(t.key)),wd());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=hd(),l=wd();return n.hs.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=Hd(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Yd(e.key,t,dh(t.value.mapValue),Vd.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:pd(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.qa[e.currentUser.toKey()];r||(r=new Su(rc)),r=r.insert(t,n),e.qa[e.currentUser.toKey()]=r}(r,e.batchId,n),await av(r,e.changes),await iy(r.remoteStore)}catch(e){const t=vy(e,"Failed to persist write");n.reject(t)}}(await Uv(e),t,n))),n.promise}(f_(e),t)}function Pw(e,t,n){const r=n.docs.get(t._key),i=new Ew(e);return new vw(e,i,t._key,r,new yw(n.hasPendingWrites,n.fromCache),t.converter)}const Rw={maxAttempts:5};class Ow{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=P_(e)}set(e,t,n){this._verifyNotCommitted();const r=Dw(e,this._firestore),i=mw(r.converter,t,n),s=R_(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Vd.none())),this}update(e,t,n){this._verifyNotCommitted();const r=Dw(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=To(t))||t instanceof b_?V_(this._dataReader,"WriteBatch.update",r._key,t,n,o):j_(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,Vd.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Dw(e,this._firestore);return this._mutations=this._mutations.concat(new Zd(t._key,Vd.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Kl(Wl.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Dw(e,t){if((e=To(e)).firestore!==t)throw new Kl(Wl.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class Lw extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=P_(e)}get(e){const t=Dw(e,this._firestore),n=new gw(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return Bl();const r=e[0];if(r.isFoundDocument())return new $_(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new $_(this._firestore,n,t._key,null,t.converter);throw Bl()}))}set(e,t,n){const r=Dw(e,this._firestore),i=mw(r.converter,t,n),s=R_(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=Dw(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=To(t))||t instanceof b_?V_(this._dataReader,"Transaction.update",r._key,t,n,o):j_(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=Dw(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Dw(e,this._firestore),n=new Ew(this._firestore);return super.get(e).then((e=>new vw(this._firestore,n,t._key,e._document,new yw(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Dl=e}(Qa),ja(new xo("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new d_(new Jl(e.getProvider("auth-internal")),new ec(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Kl(Wl.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ju(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),el(Rl,"4.7.5",e),el(Rl,"4.7.5","esm2017")}();function Mw(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Kl("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function Fw(){if("undefined"===typeof Uint8Array)throw new Kl("unimplemented","Uint8Arrays are not available in this environment.")}function Uw(){if("undefined"==typeof atob)throw new Kl("unimplemented","Blobs are unavailable in Firestore in this environment.")}class jw{constructor(e){this._delegate=e}static fromBase64String(e){return Uw(),new jw(w_.fromBase64String(e))}static fromUint8Array(e){return Fw(),new jw(w_.fromUint8Array(e))}toBase64(){return Uw(),this._delegate.toBase64()}toUint8Array(){return Fw(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Vw(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Bw{enableIndexedDbPersistence(e,t){return function(e,t){jl("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings();return m_(e,Cv.provider,{build:e=>new Sv(e,n.cacheSizeBytes,null==t?void 0:t.forceOwnership)}),Promise.resolve()}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return async function(e){jl("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=e._freezeSettings();m_(e,Cv.provider,{build:e=>new Ev(e,t.cacheSizeBytes)})}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new Kl(Wl.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Hl;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!Tc.p())return Promise.resolve();const t=e+"main";await Tc.delete(t)}($m(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class zw{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof ju||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||jl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t_(this._delegate,e,t,n)}enableNetwork(){return y_(this._delegate)}disableNetwork(){return v_(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,Gv("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return g_(this._delegate)}onSnapshotsInSync(e){return Aw(this._delegate,e)}get app(){if(!this._appCompat)throw new Kl("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new nb(this,s_(this._delegate,e))}catch(SM){throw Qw(SM,"collection()","Firestore.collection()")}}doc(e){try{return new Gw(this,o_(this._delegate,e))}catch(SM){throw Qw(SM,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Zw(this,function(e,t){if(e=$v(e,e_),Hv("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Kl(Wl.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new n_(e,null,function(e){return new Hh(cc.emptyPath(),e)}(t))}(this._delegate,e))}catch(SM){throw Qw(SM,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=$v(e,d_);const r=Object.assign(Object.assign({},Rw),n);return function(e){if(e.maxAttempts<1)throw new Kl(Wl.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new Hl;return e.asyncQueue.enqueueAndForget((async()=>{const i=await jv(e);new Av(e.asyncQueue,i,n,t,r).cu()})),r.promise}(f_(e),(n=>t(new Lw(e,n))),r)}(this._delegate,(t=>e(new Ww(this,t))))}batch(){return f_(this._delegate),new Kw(new Ow(this._delegate,(e=>Nw(this._delegate,e))))}loadBundle(e){return function(e,t){const n=f_(e=$v(e,d_)),r=new h_;return qv(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return __(this._delegate,e).then((e=>e?new Zw(this,e):null))}}class qw extends pw{constructor(e){super(),this.firestore=e}convertBytes(e){return new jw(new w_(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Gw.forKey(t,this.firestore,null)}}class Ww{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new qw(e)}get(e){const t=rb(e);return this._delegate.get(t).then((e=>new $w(this._firestore,new vw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=rb(e);return n?(Mw("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=rb(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=rb(e);return this._delegate.delete(t),this}}class Kw{constructor(e){this._delegate=e}set(e,t,n){const r=rb(e);return n?(Mw("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=rb(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=rb(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Hw{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new _w(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Xw(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=Hw.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new Hw(e,new qw(e),t),r.set(t,i)),i}}Hw.INSTANCES=new WeakMap;class Gw{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new qw(e)}static forPath(e,t,n){if(e.length%2!==0)throw new Kl("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new Gw(t,new r_(t._delegate,n,new dc(e)))}static forKey(e,t,n){return new Gw(t,new r_(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new nb(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new nb(this.firestore,s_(this._delegate,e))}catch(SM){throw Qw(SM,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=To(e))instanceof r_&&a_(this._delegate,e)}set(e,t){t=Mw("DocumentReference.set",t);try{return t?Iw(this._delegate,e,t):Iw(this._delegate,e)}catch(SM){throw Qw(SM,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Tw(this._delegate,e):Tw(this._delegate,e,t,...r)}catch(SM){throw Qw(SM,"updateDoc()","DocumentReference.update()")}}delete(){return Nw($v((e=this._delegate).firestore,d_),[new Zd(e._key,Vd.none())]);var e}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Yw(t),i=Jw(t,(e=>new $w(this.firestore,new vw(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return xw(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?Cw(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=$v(e,r_);const t=$v(e.firestore,d_);return Bv(f_(t),e._key,{source:"server"}).then((n=>Pw(t,e,n)))}(this._delegate):function(e){e=$v(e,r_);const t=$v(e.firestore,d_);return Bv(f_(t),e._key).then((n=>Pw(t,e,n)))}(this._delegate),t.then((e=>new $w(this.firestore,new vw(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new Gw(this.firestore,e?this._delegate.withConverter(Hw.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Qw(e,t,n){return e.message=e.message.replace(t,n),e}function Yw(e){for(const t of e)if("object"===typeof t&&!Vw(t))return t;return{}}function Jw(e,t){var n,r;let i;return i=Vw(e[0])?e[0]:Vw(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class $w{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Gw(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Sw(this._delegate,e._delegate)}}class Xw extends $w{data(e){const t=this._delegate.data(e);return this._delegate._converter||void 0!==t||Bl(),t}}class Zw{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new qw(e)}where(e,t,n){try{return new Zw(this.firestore,rw(this._delegate,function(e,t,n){const r=t,i=Z_("where",e);return iw._create(i,r,n)}(e,t,n)))}catch(SM){throw Qw(SM,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Zw(this.firestore,rw(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Z_("orderBy",e);return ow._create(n,t)}(e,t)))}catch(SM){throw Qw(SM,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Zw(this.firestore,rw(this._delegate,(Xv("limit",t=e),aw._create("limit",t,"F"))))}catch(t){throw Qw(t,"limit()","Query.limit()")}var t}limitToLast(e){try{return new Zw(this.firestore,rw(this._delegate,(Xv("limitToLast",t=e),aw._create("limitToLast",t,"L"))))}catch(t){throw Qw(t,"limitToLast()","Query.limitToLast()")}var t}startAt(){try{return new Zw(this.firestore,rw(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return lw._create("startAt",t,!0)}(...arguments)))}catch(SM){throw Qw(SM,"startAt()","Query.startAt()")}}startAfter(){try{return new Zw(this.firestore,rw(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return lw._create("startAfter",t,!1)}(...arguments)))}catch(SM){throw Qw(SM,"startAfter()","Query.startAfter()")}}endBefore(){try{return new Zw(this.firestore,rw(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return cw._create("endBefore",t,!1)}(...arguments)))}catch(SM){throw Qw(SM,"endBefore()","Query.endBefore()")}}endAt(){try{return new Zw(this.firestore,rw(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return cw._create("endAt",t,!0)}(...arguments)))}catch(SM){throw Qw(SM,"endAt()","Query.endAt()")}}isEqual(e){return l_(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?kw(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=$v(e,n_);const t=$v(e.firestore,d_),n=f_(t),r=new Ew(t);return zv(n,e._query,{source:"server"}).then((n=>new ww(t,r,e,n)))}(this._delegate):function(e){e=$v(e,n_);const t=$v(e.firestore,d_),n=f_(t),r=new Ew(t);return ew(e._query),zv(n,e._query).then((n=>new ww(t,r,e,n)))}(this._delegate),t.then((e=>new tb(this.firestore,new ww(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Yw(t),i=Jw(t,(e=>new tb(this.firestore,new ww(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return xw(this._delegate,r,i)}withConverter(e){return new Zw(this.firestore,e?this._delegate.withConverter(Hw.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class eb{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Xw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class tb{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Zw(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new Xw(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new eb(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new Xw(this._firestore,n))}))}isEqual(e){return Sw(this._delegate,e._delegate)}}class nb extends Zw{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Gw(this.firestore,e):null}doc(e){try{return new Gw(this.firestore,void 0===e?o_(this._delegate):o_(this._delegate,e))}catch(SM){throw Qw(SM,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=$v(e.firestore,d_),r=o_(e),i=mw(e.converter,t);return Nw(n,[R_(P_(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Vd.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new Gw(this.firestore,e)))}isEqual(e){return a_(this._delegate,e._delegate)}withConverter(e){return new nb(this.firestore,e?this._delegate.withConverter(Hw.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function rb(e){return $v(e,r_)}class ib{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new b_(...t)}static documentId(){return new ib(hc.keyField().canonicalString())}isEqual(e){return(e=To(e))instanceof b_&&this._delegate._internalPath.isEqual(e._internalPath)}}class sb{static serverTimestamp(){const e=new L_("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new sb(e)}static delete(){const e=new O_("deleteField");return e._methodName="FieldValue.delete",new sb(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new M_("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new sb(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new F_("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new sb(e)}static increment(e){const t=new U_("increment",e);return t._methodName="FieldValue.increment",new sb(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}const ob={Firestore:zw,GeoPoint:E_,Timestamp:oc,Blob:jw,Transaction:Ww,WriteBatch:Kw,DocumentReference:Gw,DocumentSnapshot:$w,Query:Zw,QueryDocumentSnapshot:Xw,QuerySnapshot:tb,CollectionReference:nb,FieldPath:ib,FieldValue:sb,setLogLevel:function(e){var t;t=e,Ll.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new xo("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},ob)))}(e,((e,t)=>new zw(e,t,new Bw))),e.registerVersion("@firebase/firestore-compat","0.3.40")}(yl);function ab(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;const lb="facebook.com",cb="github.com",ub="google.com",hb="password",db="twitter.com",fb="EMAIL_SIGNIN",pb="PASSWORD_RESET",mb="RECOVER_EMAIL",gb="REVERT_SECOND_FACTOR_ADDITION",yb="VERIFY_AND_CHANGE_EMAIL",vb="VERIFY_EMAIL";function _b(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wb=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},bb=_b,Sb=new ro("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Eb=new jo("@firebase/auth");function Cb(e){if(Eb.logLevel<=Do.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Eb.error("Auth (".concat(Qa,"): ").concat(e),...n)}}function kb(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Nb(e,...n)}function Ib(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Nb(e,...n)}function Tb(e,t,n){const r=Object.assign(Object.assign({},bb()),{[t]:n});return new ro("auth","Firebase",r).create(t,{appName:e.name})}function xb(e){return Tb(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ab(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&kb(e,"argument-error"),Tb(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Nb(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Sb.create(e,...n)}function Pb(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Nb(t,...r)}}function Rb(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Cb(t),new Error(t)}function Ob(e,t){e||Rb(t)}function Db(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Lb(){return"http:"===Mb()||"https:"===Mb()}function Mb(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class Fb{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ob(t>e,"Short delay should be less than long delay!"),this.isMobile=Gs()||$s()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Lb()||Js()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Ub(e,t){Ob(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class jb{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Rb("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Rb("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Rb("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Vb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Bb=new Fb(3e4,6e4);function zb(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function qb(e,t,n,r){return Wb(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=mo(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:a},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),jb.fetch()(Hb(e,e.config.apiHost,n,o),l)}))}async function Wb(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Vb),t);try{const t=new Qb(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Yb(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Yb(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Yb(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Yb(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Tb(e,a,o);kb(e,a)}}catch(SM){if(SM instanceof no)throw SM;kb(e,"network-request-failed",{message:String(SM)})}}async function Kb(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await qb(e,t,n,r,i);return"mfaPendingCredential"in s&&kb(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Hb(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Ub(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function Gb(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Qb{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Ib(this.auth,"network-request-failed"))),Bb.get())}))}}function Yb(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Ib(e,t,r);return i.customData._tokenResponse=n,i}function Jb(e){return void 0!==e&&void 0!==e.getResponse}function $b(e){return void 0!==e&&void 0!==e.enterprise}class Xb{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Gb(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Zb(e,t){return qb(e,"GET","/v2/recaptchaConfig",zb(e,t))}async function eS(e,t){return qb(e,"POST","/v1/accounts:lookup",t)}function tS(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(SM){}}function nS(e){return 1e3*Number(e)}function rS(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Cb("JWT malformed, contained fewer than 3 sections"),null;try{const e=js(n);return e?JSON.parse(e):(Cb("Failed to decode base64 JWT payload"),null)}catch(SM){return Cb("Caught error parsing JWT payload as JSON",null===SM||void 0===SM?void 0:SM.toString()),null}}function iS(e){const t=rS(e);return Pb(t,"internal-error"),Pb("undefined"!==typeof t.exp,"internal-error"),Pb("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function sS(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(SM){throw SM instanceof no&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(SM)&&e.auth.currentUser===e&&await e.auth.signOut(),SM}}class oS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(SM){return void((null===SM||void 0===SM?void 0:SM.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class aS{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=tS(this.lastLoginAt),this.creationTime=tS(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function lS(e){var t;const n=e.auth,r=await e.getIdToken(),i=await sS(e,eS(n,{idToken:r}));Pb(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?cS(s.providerUserInfo):[],a=(l=e.providerData,c=o,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new aS(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}function cS(e){return e.map((e=>{var{providerId:t}=e,n=ab(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class uS{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pb(e.idToken,"internal-error"),Pb("undefined"!==typeof e.idToken,"internal-error"),Pb("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):iS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Pb(0!==e.length,"internal-error");const t=iS(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Pb(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Wb(e,{},(async()=>{const n=mo({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=Hb(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",jb.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new uS;return n&&(Pb("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Pb("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Pb("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new uS,this.toJSON())}_performRefresh(){return Rb("not implemented")}}function hS(e,t){Pb("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class dS{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=ab(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new oS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new aS(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await sS(this,this.stsTokenManager.getToken(this.auth,e));return Pb(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=To(e),r=await n.getIdToken(t),i=rS(r);Pb(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:tS(nS(i.auth_time)),issuedAtTime:tS(nS(i.iat)),expirationTime:tS(nS(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=To(e);await lS(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Pb(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new dS(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Pb(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await lS(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qa(this.auth.app))return Promise.reject(xb(this.auth));const e=await this.getIdToken();return await sS(this,async function(e,t){return qb(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:_,isAnonymous:w,providerData:b,stsTokenManager:S}=t;Pb(v&&S,e,"internal-error");const E=uS.fromJSON(this.name,S);Pb("string"===typeof v,e,"internal-error"),hS(u,e.name),hS(h,e.name),Pb("boolean"===typeof _,e,"internal-error"),Pb("boolean"===typeof w,e,"internal-error"),hS(d,e.name),hS(f,e.name),hS(p,e.name),hS(m,e.name),hS(g,e.name),hS(y,e.name);const C=new dS({uid:v,auth:e,email:h,emailVerified:_,displayName:u,isAnonymous:w,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:E,createdAt:g,lastLoginAt:y});return b&&Array.isArray(b)&&(C.providerData=b.map((e=>Object.assign({},e)))),m&&(C._redirectEventId=m),C}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new uS;r.updateFromServerResponse(t);const i=new dS({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await lS(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Pb(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?cS(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),o=new uS;o.updateFromIdToken(n);const a=new dS({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new aS(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,l),a}}const fS=new Map;function pS(e){Ob(e instanceof Function,"Expected a class definition");let t=fS.get(e);return t?(Ob(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,fS.set(e,t),t)}class mS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}mS.type="NONE";const gS=mS;function yS(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class vS{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=yS(this.userKey,r.apiKey,i),this.fullPersistenceKey=yS("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?dS._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new vS(pS(gS),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||pS(gS);const s=yS(n,e.config.apiKey,e.name);let o=null;for(const l of t)try{const t=await l._get(s);if(t){const n=dS._fromJSON(e,t);l!==i&&(o=n),i=l;break}}catch(EM){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(EM){}}))),new vS(i,e,n)):new vS(i,e,n)}}function _S(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ES(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(wS(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(kS(t))return"Blackberry";if(IS(t))return"Webos";if(bS(t))return"Safari";if((t.includes("chrome/")||SS(t))&&!t.includes("edge/"))return"Chrome";if(CS(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function wS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hs();return/firefox\//i.test(e)}function bS(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hs()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function SS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hs();return/crios\//i.test(e)}function ES(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hs();return/iemobile/i.test(e)}function CS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hs();return/android/i.test(e)}function kS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hs();return/blackberry/i.test(e)}function IS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hs();return/webos/i.test(e)}function TS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hs();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function xS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hs();return TS(e)||CS(e)||IS(e)||kS(e)||/windows phone/i.test(e)||ES(e)}function AS(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=_S(Hs());break;case"Worker":t="".concat(_S(Hs()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Qa,"/").concat(r)}class NS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(SM){r(SM)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(SM){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===SM||void 0===SM?void 0:SM.message})}}}class PS{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class RS{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new DS(this),this.idTokenSubscription=new DS(this),this.beforeStateQueue=new NS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Sb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=pS(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await vS.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(SM){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await eS(this,{idToken:e}),n=await dS._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(qa(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(SM){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(SM)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Pb(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(SM){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await lS(e)}catch(SM){if((null===SM||void 0===SM?void 0:SM.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(qa(this.app))return Promise.reject(xb(this));const t=e?To(e):null;return t&&Pb(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Pb(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return qa(this.app)?Promise.reject(xb(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return qa(this.app)?Promise.reject(xb(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(pS(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return qb(e,"GET","/v2/passwordPolicy",zb(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new PS(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ro("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return qb(e,"POST","/v2/accounts:revokeToken",zb(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&pS(e)||this._popupRedirectResolver;Pb(t,this,"argument-error"),this.redirectPersistenceManager=await vS.create(this,[pS(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pb(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pb(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=AS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Eb.logLevel<=Do.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Eb.warn("Auth (".concat(Qa,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function OS(e){return To(e)}class DS{constructor(e){this.auth=e,this.observer=null,this.addObserver=_o((e=>this.observer=e))}get next(){return Pb(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let LS={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function MS(e){return LS.loadJS(e)}function FS(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}const US=1e12;class jS{constructor(e){this.auth=e,this.counter=US,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new zS(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||US;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||US;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||US;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class VS{constructor(){this.enterprise=new BS}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class BS{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class zS{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;Pb(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(SM){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(SM){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const qS="NO_RECAPTCHA";class WS{constructor(e){this.type="recaptcha-enterprise",this.auth=OS(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;$b(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n(qS)}))})):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new VS).execute("siteKey",{action:"verify"})}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Zb(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new Xb(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&$b(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=LS.recaptchaEnterpriseScript;0!==t.length&&(t+=i),MS(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function KS(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=new WS(e);let o;if(i)o=qS;else try{o=await s.verify(n)}catch(BI){o=await s.verify(n,!0)}const a=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function HS(e,t,n,r,i){var s,o;if("EMAIL_PASSWORD_PROVIDER"===i){if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await KS(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await KS(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}if("PHONE_PROVIDER"===i){if(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.isProviderEnabled("PHONE_PROVIDER")){const i=await KS(e,t,n);return r(e,i).catch((async i=>{var s;if("AUDIT"===(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&(i.code==="auth/".concat("missing-recaptcha-token")||i.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const i=await KS(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)}))}{const i=await KS(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function GS(e){const t=OS(e),n=await Zb(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Xb(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new WS(t).verify()}}function QS(e,t,n){const r=OS(e);Pb(r._canInitEmulator,r,"emulator-config-failed"),Pb(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=YS(t),{host:o,port:a}=function(e){const t=YS(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:JS(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:JS(t)}}}(t),l=null===a?"":":".concat(a);r.config.emulator={url:"".concat(s,"//").concat(o).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function YS(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function JS(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class $S{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Rb("not implemented")}_getIdTokenResponse(e){return Rb("not implemented")}_linkToIdToken(e,t){return Rb("not implemented")}_getReauthenticationResolver(e){return Rb("not implemented")}}async function XS(e,t){return qb(e,"POST","/v1/accounts:resetPassword",zb(e,t))}async function ZS(e,t){return qb(e,"POST","/v1/accounts:signUp",t)}async function eE(e,t){return Kb(e,"POST","/v1/accounts:signInWithPassword",zb(e,t))}async function tE(e,t){return qb(e,"POST","/v1/accounts:sendOobCode",zb(e,t))}async function nE(e,t){return tE(e,t)}async function rE(e,t){return tE(e,t)}class iE extends $S{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new iE(e,t,"password")}static _fromEmailAndCode(e,t){return new iE(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return HS(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",eE,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Kb(e,"POST","/v1/accounts:signInWithEmailLink",zb(e,t))}(e,{email:this._email,oobCode:this._password});default:kb(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return HS(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ZS,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Kb(e,"POST","/v1/accounts:signInWithEmailLink",zb(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:kb(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function sE(e,t){return Kb(e,"POST","/v1/accounts:signInWithIdp",zb(e,t))}class oE extends $S{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new oE(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):kb("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=ab(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new oE(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return sE(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,sE(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,sE(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=mo(t)}return e}}async function aE(e,t){return qb(e,"POST","/v1/accounts:sendVerificationCode",zb(e,t))}const lE={USER_NOT_FOUND:"user-not-found"};class cE extends $S{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new cE({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new cE({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Kb(e,"POST","/v1/accounts:signInWithPhoneNumber",zb(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Kb(e,"POST","/v1/accounts:signInWithPhoneNumber",zb(e,t));if(n.temporaryProof)throw Yb(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Kb(e,"POST","/v1/accounts:signInWithPhoneNumber",zb(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),lE)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new cE({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class uE{constructor(e){var t,n,r,i,s,o;const a=go(yo(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Pb(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=go(yo(e)).link,n=t?go(yo(t)).deep_link_id:null,r=go(yo(e)).deep_link_id;return(r?go(yo(r)).link:null)||r||n||t||e}(e);try{return new uE(t)}catch(EM){return null}}}class hE{constructor(){this.providerId=hE.PROVIDER_ID}static credential(e,t){return iE._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=uE.parseLink(t);return Pb(n,"argument-error"),iE._fromEmailAndCode(e,n.code,n.tenantId)}}hE.PROVIDER_ID="password",hE.EMAIL_PASSWORD_SIGN_IN_METHOD="password",hE.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class dE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class fE extends dE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class pE extends fE{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return Pb("providerId"in t&&"signInMethod"in t,"argument-error"),oE._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return Pb(e.idToken||e.accessToken,"argument-error"),oE._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return pE.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return pE.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=t;if(!r&&!i&&!n&&!s)return null;if(!a)return null;try{return new pE(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch(SM){return null}}}class mE extends fE{constructor(){super("facebook.com")}static credential(e){return oE._fromParams({providerId:mE.PROVIDER_ID,signInMethod:mE.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mE.credentialFromTaggedObject(e)}static credentialFromError(e){return mE.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return mE.credential(t.oauthAccessToken)}catch(EM){return null}}}mE.FACEBOOK_SIGN_IN_METHOD="facebook.com",mE.PROVIDER_ID="facebook.com";class gE extends fE{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return oE._fromParams({providerId:gE.PROVIDER_ID,signInMethod:gE.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return gE.credentialFromTaggedObject(e)}static credentialFromError(e){return gE.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return gE.credential(n,r)}catch(EM){return null}}}gE.GOOGLE_SIGN_IN_METHOD="google.com",gE.PROVIDER_ID="google.com";class yE extends fE{constructor(){super("github.com")}static credential(e){return oE._fromParams({providerId:yE.PROVIDER_ID,signInMethod:yE.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yE.credentialFromTaggedObject(e)}static credentialFromError(e){return yE.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return yE.credential(t.oauthAccessToken)}catch(EM){return null}}}yE.GITHUB_SIGN_IN_METHOD="github.com",yE.PROVIDER_ID="github.com";class vE extends $S{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return sE(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,sE(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,sE(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new vE(n,i):null}static _create(e,t){return new vE(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class _E extends dE{constructor(e){Pb(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return _E.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return _E.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=vE.fromJSON(e);return Pb(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return vE._create(r,n)}catch(SM){return null}}}class wE extends fE{constructor(){super("twitter.com")}static credential(e,t){return oE._fromParams({providerId:wE.PROVIDER_ID,signInMethod:wE.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return wE.credentialFromTaggedObject(e)}static credentialFromError(e){return wE.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return wE.credential(n,r)}catch(EM){return null}}}async function bE(e,t){return Kb(e,"POST","/v1/accounts:signUp",zb(e,t))}wE.TWITTER_SIGN_IN_METHOD="twitter.com",wE.PROVIDER_ID="twitter.com";class SE{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await dS._fromIdTokenResponse(e,n,r),s=EE(n);return new SE({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=EE(n);return new SE({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function EE(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class CE extends no{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,CE.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new CE(e,t,n,r)}}function kE(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw CE._fromErrorAndOperation(e,n,t,r);throw n}))}function IE(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function TE(e,t){const n=To(e);await AE(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return qb(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=IE(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function xE(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await sS(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return SE._forOperation(e,"link",r)}async function AE(e,t,n){await lS(t);const r=!1===e?"provider-already-linked":"no-such-provider";Pb(IE(t.providerData).has(n)===e,t.auth,r)}async function NE(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(qa(r.app))return Promise.reject(xb(r));const i="reauthenticate";try{const s=await sS(e,kE(r,i,t,e),n);Pb(s.idToken,r,"internal-error");const o=rS(s.idToken);Pb(o,r,"internal-error");const{sub:a}=o;return Pb(e.uid===a,r,"user-mismatch"),SE._forOperation(e,i,s)}catch(SM){throw(null===SM||void 0===SM?void 0:SM.code)==="auth/".concat("user-not-found")&&kb(r,"user-mismatch"),SM}}async function PE(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(qa(e.app))return Promise.reject(xb(e));const r="signIn",i=await kE(e,r,t),s=await SE._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function RE(e,t){return PE(OS(e),t)}async function OE(e,t){const n=To(e);return await AE(!1,n,t.providerId),xE(n,t)}async function DE(e,t){return NE(To(e),t)}async function LE(e,t){if(qa(e.app))return Promise.reject(xb(e));const n=OS(e),r=await async function(e,t){return Kb(e,"POST","/v1/accounts:signInWithCustomToken",zb(e,t))}(n,{token:t,returnSecureToken:!0}),i=await SE._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class ME{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?FE._fromServerResponse(e,t):"totpInfo"in t?UE._fromServerResponse(e,t):kb(e,"internal-error")}}class FE extends ME{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new FE(t)}}class UE extends ME{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new UE(t)}}function jE(e,t,n){var r;Pb((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Pb("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Pb(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Pb(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function VE(e){const t=OS(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function BE(e,t){await async function(e,t){return qb(e,"POST","/v1/accounts:update",zb(e,t))}(To(e),{oobCode:t})}async function zE(e,t){const n=To(e),r=await XS(n,{oobCode:t}),i=r.requestType;switch(Pb(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Pb(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Pb(r.mfaInfo,n,"internal-error");default:Pb(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=ME._fromServerResponse(OS(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function qE(e,t){const n={identifier:t,continueUri:Lb()?Db():"http://localhost"},{signinMethods:r}=await async function(e,t){return qb(e,"POST","/v1/accounts:createAuthUri",zb(e,t))}(To(e),n);return r||[]}async function WE(e,t){const n=To(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&jE(n.auth,r,t);const{email:i}=await async function(e,t){return tE(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function KE(e,t,n){const r=To(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&jE(r.auth,i,n);const{email:s}=await async function(e,t){return tE(e,t)}(r.auth,i);s!==e.email&&await e.reload()}async function HE(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=To(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await sS(i,async function(e,t){return qb(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}async function GE(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await sS(e,async function(e,t){return qb(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(s,!0)}class QE{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class YE extends QE{constructor(e,t,n,r){super(e,t,n),this.username=r}}class JE extends QE{constructor(e,t){super(e,"facebook.com",t)}}class $E extends YE{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class XE extends QE{constructor(e,t){super(e,"google.com",t)}}class ZE extends YE{constructor(e,t,n){super(e,"twitter.com",t,n)}}function eC(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=rS(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new QE(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new JE(s,i);case"github.com":return new $E(s,i);case"google.com":return new XE(s,i);case"twitter.com":return new ZE(s,i,e.screenName||null);case"custom":case"anonymous":return new QE(s,null);default:return new QE(s,r,i)}}(n)}class tC{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new tC("enroll",e,t)}static _fromMfaPendingCredential(e){return new tC("signin",e)}toJSON(){const e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:{[e]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return tC._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return tC._fromIdtoken(e.multiFactorSession.idToken)}return null}}class nC{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=OS(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>ME._fromServerResponse(n,e)));Pb(r.mfaPendingCredential,n,"internal-error");const s=tC._fromMfaPendingCredential(r.mfaPendingCredential);return new nC(s,i,(async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await SE._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return Pb(t.user,n,"internal-error"),SE._forOperation(t.user,t.operationType,o);default:kb(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function rC(e,t){return qb(e,"POST","/v2/accounts/mfaEnrollment:start",zb(e,t))}class iC{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>ME._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new iC(e)}async getSession(){return tC._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await sS(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await sS(this.user,function(e,t){return qb(e,"POST","/v2/accounts/mfaEnrollment:withdraw",zb(e,t))}(this.user.auth,{idToken:n,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(SM){throw SM}}}const sC=new WeakMap;const oC="__sak";class aC{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(oC,"1"),this.storage.removeItem(oC),Promise.resolve(!0)):Promise.resolve(!1)}catch(EM){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class lC extends aC{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=xS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Xs()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}lC.type="LOCAL";const cC=lC;class uC extends aC{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}uC.type="SESSION";const hC=uC;class dC{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new dC(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function fC(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}dC.receivers=[];class pC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const l=fC("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function mC(){return window}function gC(){return"undefined"!==typeof mC().WorkerGlobalScope&&"function"===typeof mC().importScripts}const yC="firebaseLocalStorageDb",vC="firebaseLocalStorage",_C="fbase_key";class wC{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function bC(e,t){return e.transaction([vC],t?"readwrite":"readonly").objectStore(vC)}function SC(){const e=indexedDB.open(yC,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(vC,{keyPath:_C})}catch(SM){n(SM)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(vC)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(yC);return new wC(e).toPromise()}(),t(await SC()))}))}))}async function EC(e,t,n){const r=bC(e,!0).put({[_C]:t,value:n});return new wC(r).toPromise()}function CC(e,t){const n=bC(e,!0).delete(t);return new wC(n).toPromise()}class kC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await SC()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(SM){if(t++>3)throw SM;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=dC._getInstance(gC()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new pC(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(EM){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await SC();return await EC(e,oC,"1"),await CC(e,oC),!0}catch(EM){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>EC(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=bC(e,!1).get(t),r=await new wC(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>CC(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=bC(e,!1).getAll();return new wC(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}kC.type="LOCAL";const IC=kC;function TC(e,t){return qb(e,"POST","/v2/accounts/mfaSignIn:start",zb(e,t))}const xC=FS("rcb"),AC=new Fb(3e4,6e4);class NC{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=mC().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Pb(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&Jb(mC().grecaptcha)?Promise.resolve(mC().grecaptcha):new Promise(((n,r)=>{const i=mC().setTimeout((()=>{r(Ib(e,"network-request-failed"))}),AC.get());mC()[xC]=()=>{mC().clearTimeout(i),delete mC()[xC];const s=mC().grecaptcha;if(!s||!Jb(s))return void r(Ib(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};MS("".concat(LS.recaptchaV2Script,"?").concat(mo({onload:xC,render:"explicit",hl:t}))).catch((()=>{clearTimeout(i),r(Ib(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=mC().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class PC{async load(e){return new jS(e)}clearedOneInstance(){}}const RC="recaptcha",OC={theme:"light",type:"image"};class DC{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},OC);this.parameters=n,this.type=RC,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=OS(e),this.isInvisible="invisible"===this.parameters.size,Pb("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;Pb(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new PC:new NC,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(SM){return Promise.reject(SM)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){Pb(!this.parameters.sitekey,this.auth,"argument-error"),Pb(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Pb("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=mC()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){Pb(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Pb(Lb()&&!gC(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await qb(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);Pb(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Pb(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class LC{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=cE._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function MC(e,t,n){var r;if(!e._getRecaptchaConfig())try{await GS(e)}catch(BI){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){Pb("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=HS(e,r,"mfaSmsEnrollment",(async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===qS){Pb((null===n||void 0===n?void 0:n.type)===RC,e,"argument-error");return rC(e,await FC(e,t,n))}return rC(e,t)}),"PHONE_PROVIDER"),o=await s.catch((e=>Promise.reject(e)));return o.phoneSessionInfo.sessionInfo}{Pb("signin"===t.type,e,"internal-error");const s=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;Pb(s,e,"missing-multi-factor-info");const o={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},a=HS(e,o,"mfaSmsSignIn",(async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===qS){Pb((null===n||void 0===n?void 0:n.type)===RC,e,"argument-error");return TC(e,await FC(e,t,n))}return TC(e,t)}),"PHONE_PROVIDER"),l=await a.catch((e=>Promise.reject(e)));return l.phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=HS(e,t,"sendVerificationCode",(async(e,t)=>{if(t.captchaResponse===qS){Pb((null===n||void 0===n?void 0:n.type)===RC,e,"argument-error");return aE(e,await FC(e,t,n))}return aE(e,t)}),"PHONE_PROVIDER"),s=await r.catch((e=>Promise.reject(e)));return s.sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function FC(e,t,n){Pb(n.type===RC,e,"argument-error");const r=await n.verify();Pb("string"===typeof r,e,"argument-error");const i=Object.assign({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,s=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:s}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class UC{constructor(e){this.providerId=UC.PROVIDER_ID,this.auth=OS(e)}verifyPhoneNumber(e,t){return MC(this.auth,e,To(t))}static credential(e,t){return cE._fromVerification(e,t)}static credentialFromResult(e){const t=e;return UC.credentialFromTaggedObject(t)}static credentialFromError(e){return UC.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?cE._fromTokenResponse(n,r):null}}function jC(e,t){return t?pS(t):(Pb(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}UC.PROVIDER_ID="phone",UC.PHONE_SIGN_IN_METHOD="phone";class VC extends $S{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return sE(e,this._buildIdpRequest())}_linkToIdToken(e,t){return sE(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return sE(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function BC(e){return PE(e.auth,new VC(e),e.bypassAuthState)}function zC(e){const{auth:t,user:n}=e;return Pb(n,t,"internal-error"),NE(n,new VC(e),e.bypassAuthState)}async function qC(e){const{auth:t,user:n}=e;return Pb(n,t,"internal-error"),xE(n,new VC(e),e.bypassAuthState)}class WC{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(SM){this.reject(SM)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(SM){this.reject(SM)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BC;case"linkViaPopup":case"linkViaRedirect":return qC;case"reauthViaPopup":case"reauthViaRedirect":return zC;default:kb(this.auth,"internal-error")}}resolve(e){Ob(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ob(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const KC=new Fb(2e3,1e4);class HC extends WC{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,HC.currentPopupAction&&HC.currentPopupAction.cancel(),HC.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pb(e,this.auth,"internal-error"),e}async onExecution(){Ob(1===this.filter.length,"Popup operations only handle one event");const e=fC();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Ib(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Ib(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,HC.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Ib(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,KC.get())};e()}}HC.currentPopupAction=null;const GC=new Map;class QC extends WC{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=GC.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=XC(t),r=$C(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(SM){e=()=>Promise.reject(SM)}GC.set(this.auth._key(),e)}return this.bypassAuthState||GC.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function YC(e,t){return $C(e)._set(XC(t),"true")}function JC(e,t){GC.set(e._key(),t)}function $C(e){return pS(e._redirectPersistence)}function XC(e){return yS("pendingRedirect",e.config.apiKey,e.name)}function ZC(e,t,n){return async function(e,t,n){if(qa(e.app))return Promise.reject(xb(e));const r=OS(e);Ab(e,t,dE),await r._initializationPromise;const i=jC(r,n);return await YC(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function ek(e,t,n){return async function(e,t,n){const r=To(e);if(Ab(r.auth,t,dE),qa(r.auth.app))return Promise.reject(xb(r.auth));await r.auth._initializationPromise;const i=jC(r.auth,n);await YC(i,r.auth);const s=await rk(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)}(e,t,n)}function tk(e,t,n){return async function(e,t,n){const r=To(e);Ab(r.auth,t,dE),await r.auth._initializationPromise;const i=jC(r.auth,n);await AE(!1,r,t.providerId),await YC(i,r.auth);const s=await rk(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)}(e,t,n)}async function nk(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(qa(e.app))return Promise.reject(xb(e));const r=OS(e),i=jC(r,t),s=new QC(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function rk(e){const t=fC("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class ik{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ok(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!ok(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Ib(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(sk(e))}saveEventToCache(e){this.cachedEventUids.add(sk(e)),this.lastProcessedEventTime=Date.now()}}function sk(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function ok(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function ak(e){return qb(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const lk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ck=/^https?/;function uk(e){const t=Db(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!ck.test(n))return!1;if(lk.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const hk=new Fb(3e4,6e4);function dk(){const e=mC().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function fk(e){return new Promise(((t,n)=>{var r,i,s;function o(){dk(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{dk(),n(Ib(e,"network-request-failed"))},timeout:hk.get()})}if(null===(i=null===(r=mC().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=mC().gapi)||void 0===s?void 0:s.load)){const t=FS("iframefcb");return mC()[t]=()=>{gapi.load?o():n(Ib(e,"network-request-failed"))},MS("".concat(LS.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}o()}})).catch((e=>{throw pk=null,e}))}let pk=null;const mk=new Fb(5e3,15e3),gk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vk(e){const t=e.config;Pb(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Ub(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Qa},i=yk.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(mo(r).slice(1))}async function _k(e){const t=await function(e){return pk=pk||fk(e),pk}(e),n=mC().gapi;return Pb(n,e,"internal-error"),t.open({where:document.body,url:vk(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gk,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Ib(e,"network-request-failed"),s=mC().setTimeout((()=>{r(i)}),mk.get());function o(){mC().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}const wk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class bk{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(SM){}}}function Sk(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},wk),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Hs().toLowerCase();n&&(a=SS(c)?"_blank":n),wS(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return TS(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hs())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new bk(null);const h=window.open(t||"",a,u);Pb(h,e,"popup-blocked");try{h.focus()}catch(SM){}return new bk(h)}const Ek="__/auth/handler",Ck="emulator/auth/handler",kk=encodeURIComponent("fac");async function Ik(e,t,n,r,i,s){Pb(e.config.authDomain,e,"auth-domain-config-required"),Pb(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Qa,eventId:i};if(t instanceof dE){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",uo(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof fE){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(kk,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Ek);return Ub(t,Ck)}(e),"?").concat(mo(a).slice(1)).concat(c)}const Tk="webStorageSupport";const xk=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hC,this._completeRedirectFn=nk,this._overrideRedirectResult=JC}async _openPopup(e,t,n,r){var i;Ob(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Sk(e,await Ik(e,t,n,Db(),r),fC())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){mC().location.href=e}(await Ik(e,t,n,Db(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Ob(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await _k(e),n=new ik(e);return t.register("authEvent",(t=>{Pb(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Tk,{type:Tk},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Tk];void 0!==i&&t(!!i),kb(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await ak(e);for(const n of t)try{if(uk(n))return}catch(EM){}kb(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return xS()||bS()||TS()}};class Ak{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Rb("unexpected MultiFactorSessionType")}}}class Nk extends Ak{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Nk(e)}_finalizeEnroll(e,t,n){return function(e,t){return qb(e,"POST","/v2/accounts/mfaEnrollment:finalize",zb(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return qb(e,"POST","/v2/accounts/mfaSignIn:finalize",zb(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Pk{constructor(){}static assertion(e){return Nk._fromCredential(e)}}Pk.FACTOR_ID="phone";var Rk="@firebase/auth",Ok="1.8.1";class Dk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Pb(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(e=>{var t;null===(t=zs())||void 0===t||t["_".concat(e)]})("authIdTokenMaxAge");var Lk,Mk;function Fk(){return window}Lk={loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Ib("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},LS=Lk,Mk="Browser",ja(new xo("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Pb(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:Mk,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:AS(Mk)},c=new RS(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(pS);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),ja(new xo("auth-internal",(e=>(e=>new Dk(e))(OS(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),el(Rk,Ok,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Mk)),el(Rk,Ok,"esm2017");async function Uk(e,t,n){var r;const{BuildInfo:i}=Fk();Ob(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(Ob(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),o={};return TS()?o.ibi=i.packageName:CS()?o.apn=i.packageName:kb(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,Ik(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)}function jk(e){const{cordova:t}=Fk();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hs();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}class Vk extends ik{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInitialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function Bk(e){const t=await Wk()._get(Kk(e));return t&&await Wk()._remove(Kk(e)),t}function zk(e,t){var n,r;const i=function(e){const t=Hk(e),n=t.link?decodeURIComponent(t.link):void 0,r=Hk(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Hk(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=Hk(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(SM){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null===s||void 0===s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?Ib(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function qk(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<20;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function Wk(){return pS(cC)}function Kk(e){return yS("authEvent",e.config.apiKey,e.name)}function Hk(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return go(n.join("?"))}const Gk=class{constructor(){this._redirectPersistence=hC,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=nk,this._overrideRedirectResult=JC}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new Vk(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){kb(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,o,a,l,c,u;const h=Fk();Pb("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Pb("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Pb("function"===typeof(null===(s=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Pb("function"===typeof(null===(l=null===(a=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===l?void 0:l.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Pb("function"===typeof(null===(u=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),GC.clear(),await this._originValidation(e);const s=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:qk(),postBody:null,tenantId:e.tenantId,error:Ib(e,"no-auth-event")}}(e,n,r);await function(e,t){return Wk()._set(Kk(e),t)}(e,s);const o=await Uk(e,s,t);return async function(e,t,n){const{cordova:r}=Fk();let i=()=>{};try{await new Promise(((s,o)=>{let a=null;function l(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function c(){a||(a=window.setTimeout((()=>{o(Ib(e,"redirect-cancelled-by-user"))}),2e3))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}t.addPassiveListener(l),document.addEventListener("resume",c,!1),CS()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await jk(o))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=Fk(),n={};TS()?n.iosBundleId=t.packageName:CS()?n.androidPackageName=t.packageName:kb(e,"operation-not-supported-in-this-environment"),await ak(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=Fk(),s=setTimeout((async()=>{await Bk(e),t.onEvent(Qk())}),500),o=async n=>{clearTimeout(s);const r=await Bk(e);let i=null;r&&(null===n||void 0===n?void 0:n.url)&&(i=zk(r,n.url)),t.onEvent(i||Qk())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,o);const a=r,l="".concat(i.packageName.toLowerCase(),"://");Fk().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(l)&&o({url:e}),"function"===typeof a)try{a(e)}catch(SM){console.error(SM)}}}};function Qk(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ib("no-auth-event")}}function Yk(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Jk(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hs();return!("file:"!==Yk()&&"ionic:"!==Yk()&&"capacitor:"!==Yk()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function $k(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hs();return Xs()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hs();return/Edge\/\d+/.test(e)}(e)}function Xk(){try{const e=self.localStorage,t=fC();if(e)return e.setItem(t,"1"),e.removeItem(t),!$k()||to()}catch(SM){return Zk()&&to()}return!1}function Zk(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function eI(){return("http:"===Yk()||"https:"===Yk()||Js()||Jk())&&!($s()||Qs())&&Xk()&&!Zk()}function tI(){return Jk()&&"undefined"!==typeof document}const nI={LOCAL:"local",NONE:"none",SESSION:"session"},rI=Pb,iI="persistence";async function sI(e){await e._initializationPromise;const t=oI(),n=yS(iI,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function oI(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(SM){return null}}const aI=Pb;class lI{constructor(){this.browserResolver=pS(xk),this.cordovaResolver=pS(Gk),this.underlyingResolver=null,this._redirectPersistence=hC,this._completeRedirectFn=nk,this._overrideRedirectResult=JC}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return tI()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return aI(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!tI()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function cI(e){return e.unwrap()}function uI(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new pI(e,function(e,t){var n;const r=To(e),i=t;return Pb(t.customData.operationType,r,"argument-error"),Pb(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),nC._fromError(r,i)}(e,t))}else if(r){const e=hI(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function hI(e){const{_tokenResponse:t}=e instanceof no?e.customData:e;if(!t)return null;if(!(e instanceof no)&&"temporaryProof"in t&&"phoneNumber"in t)return UC.credentialFromResult(e);const n=t.providerId;if(!n||n===hb)return null;let r;switch(n){case ub:r=gE;break;case lb:r=mE;break;case cb:r=yE;break;case db:r=wE;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?vE._create(n,o):oE._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new pE(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof no?r.credentialFromError(e):r.credentialFromResult(e)}function dI(e,t){return t.catch((t=>{throw t instanceof no&&uI(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,hI(r)),additionalUserInfo:eC(e),user:mI.getOrCreate(n)};var r}))}async function fI(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>dI(e,n.confirm(t))}}class pI{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return dI(cI(this.auth),this.resolver.resolveSignIn(e))}}class mI{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=To(e);return sC.has(t)||sC.set(t,iC._fromUser(t)),sC.get(t)}(e)}static getOrCreate(e){return mI.USER_MAP.has(e)||mI.USER_MAP.set(e,new mI(e)),mI.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return dI(this.auth,OE(this._delegate,e))}async linkWithPhoneNumber(e,t){return fI(this.auth,async function(e,t,n){const r=To(e);await AE(!1,r,"phone");const i=await MC(r.auth,t,To(n));return new LC(i,(e=>OE(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return dI(this.auth,async function(e,t,n){const r=To(e);Ab(r.auth,t,dE);const i=jC(r.auth,n);return new HC(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,lI))}async linkWithRedirect(e){return await sI(OS(this.auth)),tk(this._delegate,e,lI)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return dI(this.auth,DE(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return fI(this.auth,async function(e,t,n){const r=To(e);if(qa(r.auth.app))return Promise.reject(xb(r.auth));const i=await MC(r.auth,t,To(n));return new LC(i,(e=>DE(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return dI(this.auth,async function(e,t,n){const r=To(e);if(qa(r.auth.app))return Promise.reject(Ib(r.auth,"operation-not-supported-in-this-environment"));Ab(r.auth,t,dE);const i=jC(r.auth,n);return new HC(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,lI))}async reauthenticateWithRedirect(e){return await sI(OS(this.auth)),ek(this._delegate,e,lI)}sendEmailVerification(e){return WE(this._delegate,e)}async unlink(e){return await TE(this._delegate,e),this}updateEmail(e){return function(e,t){const n=To(e);return qa(n.auth.app)?Promise.reject(xb(n.auth)):GE(n,t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return GE(To(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){const n=To(e);if(qa(n.auth.app))return Promise.reject(xb(n.auth));await xE(n,t)}(this._delegate,e)}updateProfile(e){return HE(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return KE(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}mI.USER_MAP=new WeakMap;const gI=Pb;class yI{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;gI(n,"invalid-api-key",{appName:e.name}),gI(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?lI:void 0;this._delegate=t.initialize({options:{persistence:_I(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(wb),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?mI.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){QS(this._delegate,e,t)}applyActionCode(e){return BE(this._delegate,e)}checkActionCode(e){return zE(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await XS(To(e),{oobCode:t,newPassword:n}).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&VE(e),t}))}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return dI(this._delegate,async function(e,t,n){if(qa(e.app))return Promise.reject(xb(e));const r=OS(e),i=HS(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",bE,"EMAIL_PASSWORD_PROVIDER"),s=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&VE(e),t})),o=await SE._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return qE(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=uE.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){gI(eI(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await OS(e)._initializationPromise,nk(e,t,!1)}(this._delegate,lI);return e?dI(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){OS(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=vI(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=vI(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=OS(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){Pb(t.handleCodeInApp,r,"argument-error"),t&&jE(r,e,t)}(i,n),await HS(r,i,"getOobCode",rE,"EMAIL_PASSWORD_PROVIDER")}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=OS(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&jE(r,i,n),await HS(r,i,"getOobCode",nE,"EMAIL_PASSWORD_PROVIDER")}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){rI(Object.values(nI).includes(t),e,"invalid-persistence-type"),$s()?rI(t!==nI.SESSION,e,"unsupported-persistence-type"):Qs()?rI(t===nI.NONE,e,"unsupported-persistence-type"):Zk()?rI(t===nI.NONE||t===nI.LOCAL&&to(),e,"unsupported-persistence-type"):rI(t===nI.NONE||Xk(),e,"unsupported-persistence-type")}(this._delegate,e),e){case nI.SESSION:t=hC;break;case nI.LOCAL:t=await pS(IC)._isAvailable()?IC:cC;break;case nI.NONE:t=gS;break;default:return kb("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return dI(this._delegate,async function(e){var t;if(qa(e.app))return Promise.reject(xb(e));const n=OS(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new SE({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await bE(n,{returnSecureToken:!0}),i=await SE._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return dI(this._delegate,RE(this._delegate,e))}signInWithCustomToken(e){return dI(this._delegate,LE(this._delegate,e))}signInWithEmailAndPassword(e,t){return dI(this._delegate,function(e,t,n){return qa(e.app)?Promise.reject(xb(e)):RE(To(e),hE.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&VE(e),t}))}(this._delegate,e,t))}signInWithEmailLink(e,t){return dI(this._delegate,async function(e,t,n){if(qa(e.app))return Promise.reject(xb(e));const r=To(e),i=hE.credentialWithLink(t,n||Db());return Pb(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),RE(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return fI(this._delegate,async function(e,t,n){if(qa(e.app))return Promise.reject(xb(e));const r=OS(e),i=await MC(r,t,To(n));return new LC(i,(e=>RE(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return gI(eI(),this._delegate,"operation-not-supported-in-this-environment"),dI(this._delegate,async function(e,t,n){if(qa(e.app))return Promise.reject(Ib(e,"operation-not-supported-in-this-environment"));const r=OS(e);Ab(e,t,dE);const i=jC(r,n);return new HC(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,lI))}async signInWithRedirect(e){return gI(eI(),this._delegate,"operation-not-supported-in-this-environment"),await sI(this._delegate),ZC(this._delegate,e,lI)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await zE(To(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function vI(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&mI.getOrCreate(e)),error:t,complete:n}}function _I(e,t){const n=function(e,t){const n=oI();if(!n)return[];const r=yS(iI,e,t);switch(n.getItem(r)){case nI.NONE:return[gS];case nI.LOCAL:return[IC,hC];case nI.SESSION:return[hC];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(IC)||n.push(IC),"undefined"!==typeof window)for(const r of[cC,hC])n.includes(r)||n.push(r);return n.includes(gS)||n.push(gS),n}yI.Persistence=nI;class wI{static credential(e,t){return UC.credential(e,t)}constructor(){this.providerId="phone",this._delegate=new UC(cI(yl.auth()))}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}wI.PHONE_SIGN_IN_METHOD=UC.PHONE_SIGN_IN_METHOD,wI.PROVIDER_ID=UC.PROVIDER_ID;const bI=Pb;class SI{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:yl.app();var r;bI(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new DC(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(e){e.INTERNAL.registerComponent(new xo("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new yI(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:fb,PASSWORD_RESET:pb,RECOVER_EMAIL:mb,REVERT_SECOND_FACTOR_ADDITION:gb,VERIFY_AND_CHANGE_EMAIL:yb,VERIFY_EMAIL:vb}},EmailAuthProvider:hE,FacebookAuthProvider:mE,GithubAuthProvider:yE,GoogleAuthProvider:gE,OAuthProvider:pE,SAMLAuthProvider:_E,PhoneAuthProvider:wI,PhoneMultiFactorGenerator:Pk,RecaptchaVerifier:SI,TwitterAuthProvider:wE,Auth:yI,AuthCredential:$S,Error:no}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.5.16")}(yl);const EI="@firebase/database",CI="1.0.10";let kI="";function II(e){kI=e}class TI{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),oo(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:so(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class xI{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return lo(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const AI=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new TI(t)}}catch(SM){}return new xI},NI=AI("localStorage"),PI=AI("sessionStorage"),RI=new jo("@firebase/database"),OI=function(){let e=1;return function(){return e++}}(),DI=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,Rs(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new vo;n.update(t);const r=n.digest();return Ls.encodeByteArray(r)},LI=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=LI.apply(null,n):e+="object"===typeof n?oo(n):n,e+=" "}return e};let MI=null,FI=!0;const UI=function(e,t){Rs(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(RI.logLevel=Do.VERBOSE,MI=RI.log.bind(RI),t&&PI.set("logging_enabled",!0)):"function"===typeof e?MI=e:(MI=null,PI.remove("logging_enabled"))},jI=function(){if(!0===FI&&(FI=!1,null===MI&&!0===PI.get("logging_enabled")&&UI(!0)),MI){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=LI.apply(null,t);MI(r)}},VI=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];jI(e,...n)}},BI=function(){const e="FIREBASE INTERNAL ERROR: "+LI(...arguments);RI.error(e)},zI=function(){const e="FIREBASE FATAL ERROR: ".concat(LI(...arguments));throw RI.error(e),new Error(e)},qI=function(){const e="FIREBASE WARNING: "+LI(...arguments);RI.warn(e)},WI=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},KI="[MIN_NAME]",HI="[MAX_NAME]",GI=function(e,t){if(e===t)return 0;if(e===KI||t===HI)return-1;if(t===KI||e===HI)return 1;{const n=tT(e),r=tT(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},QI=function(e,t){return e===t?0:e<t?-1:1},YI=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+oo(t))},JI=function(e){if("object"!==typeof e||null===e)return oo(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=oo(t[r]),n+=":",n+=JI(e[t[r]]);return n+="}",n},$I=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function XI(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const ZI=function(e){Rs(!WI(e),"Invalid JSON number");const t=1023;let n,r,i,s,o;0===e?(r=0,i=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(s=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=s+t,i=Math.round(e*Math.pow(2,52-s)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const a=[];for(o=52;o;o-=1)a.push(i%2?1:0),i=Math.floor(i/2);for(o=11;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);a.push(n?1:0),a.reverse();const l=a.join("");let c="";for(o=0;o<64;o+=8){let e=parseInt(l.substr(o,8),2).toString(16);1===e.length&&(e="0"+e),c+=e}return c.toLowerCase()};const eT=new RegExp("^-?(0*)\\d{1,10}$"),tT=function(e){if(eT.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},nT=function(e){try{e()}catch(SM){setTimeout((()=>{const t=SM.stack||"";throw qI("Exception was thrown by user callback.",t),SM}),Math.floor(0))}},rT=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class iT{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then((e=>this.appCheck=e))}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){qI('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}class sT{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(jI("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',qI(e)}}class oT{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}oT.OWNER="owner";const aT="5",lT=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,cT="ac",uT="websocket",hT="long_polling";class dT{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=NI.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&NI.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}function fT(e,t,n){let r;if(Rs("string"===typeof t,"typeof type must == string"),Rs("object"===typeof n,"typeof params must == object"),t===uT)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==hT)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return XI(n,((e,t)=>{i.push(e+"="+t)})),r+i.join("&")}class pT{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;lo(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Vs(void 0,this.counters_)}}const mT={},gT={};function yT(e){const t=e.toString();return mT[t]||(mT[t]=new pT),mT[t]}class vT{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&nT((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const _T="start";class wT{constructor(e,t,n,r,i,s,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=VI(e),this.stats_=yT(t),this.urlFn=e=>(this.appCheckToken&&(e[cT]=this.appCheckToken),fT(t,hT,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new vT(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Zs()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new bT((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s,o,a,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===_T)n.id=s,n.password=o;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,(()=>{n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,s)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[_T]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=aT,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[cT]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&lT.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){wT.forceAllow_=!0}static forceDisallow(){wT.forceDisallow_=!0}static isAvailable(){return!Zs()&&(!!wT.forceAllow_||!wT.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=oo(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Fs(t),r=$I(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(Zs())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=oo(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class bT{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Zs())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=OI(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=bT.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(SM){jI("frame writing exception"),SM.stack&&jI(SM.stack),jI(SM)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||jI("No IE domain setting required")}catch(SM){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(r),n()}))}addTag(e,t){Zs()?this.doNodeLongPoll(e,t):setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{jI("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(SM){}}),Math.floor(1))}}let ST=null;"undefined"!==typeof MozWebSocket?ST=MozWebSocket:"undefined"!==typeof WebSocket&&(ST=WebSocket);class ET{constructor(e,t,n,r,i,s,o){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=VI(this.connId),this.stats_=yT(t),this.connURL=ET.connectionURL_(t,s,o,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const s={};return s.v=aT,!Zs()&&"undefined"!==typeof location&&location.hostname&&lT.test(location.hostname)&&(s.r="f"),t&&(s.s=t),n&&(s.ls=n),r&&(s[cT]=r),i&&(s.p=i),fT(e,uT,s)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,NI.set("previous_websocket_failure",!0);try{let e;if(Zs()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":"Firebase/".concat(aT,"/").concat(kI,"/").concat(process.platform,"/").concat(t),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},r=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new ST(this.connURL,[],e)}catch(SM){this.log_("Error instantiating WebSocket.");const t=SM.message||SM.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){ET.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==ST&&!ET.forceDisallow_}static previouslyFailed(){return NI.isInMemoryStorage||!0===NI.get("previous_websocket_failure")}markConnectionHealthy(){NI.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=so(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Rs(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=oo(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=$I(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(SM){this.log_("Exception thrown from WebSocket.send():",SM.message||SM.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ET.responsesRequiredToBeHealthy=2,ET.healthyTimeout=3e4;class CT{static get ALL_TRANSPORTS(){return[wT,ET]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=ET&&ET.isAvailable();let n=t&&!ET.previouslyFailed();if(e.webSocketOnly&&(t||qI("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[ET];else{const e=this.transports_=[];for(const t of CT.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);CT.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}CT.globalTransportInitialized_=!1;class kT{constructor(e,t,n,r,i,s,o,a,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=VI("c:"+this.id+":"),this.transportManager_=new CT(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=rT((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=YI("t",e),n=YI("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=YI("t",e),n=YI("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=YI("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?BI("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):BI("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),aT!==n&&qI("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),rT((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):rT((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(NI.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class IT{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class TT{constructor(e){this.allowedEvents_=e,this.listeners_={},Rs(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let e=0;e<i.length;e++)i[e].callback.apply(i[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){Rs(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class xT extends TT{static getInstance(){return new xT}constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Gs()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}getInitialEvent(e){return Rs("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class AT{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function NT(){return new AT("")}function PT(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function RT(e){return e.pieces_.length-e.pieceNum_}function OT(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new AT(e.pieces_,t)}function DT(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function LT(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function MT(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new AT(t,0)}function FT(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof AT)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new AT(n,0)}function UT(e){return e.pieceNum_>=e.pieces_.length}function jT(e,t){const n=PT(e),r=PT(t);if(null===n)return t;if(n===r)return jT(OT(e),OT(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function VT(e,t){const n=LT(e,0),r=LT(t,0);for(let i=0;i<n.length&&i<r.length;i++){const e=GI(n[i],r[i]);if(0!==e)return e}return n.length===r.length?0:n.length<r.length?-1:1}function BT(e,t){if(RT(e)!==RT(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function zT(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(RT(e)>RT(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class qT{constructor(e,t){this.errorPrefix_=t,this.parts_=LT(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=Io(this.parts_[n]);WT(this)}}function WT(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+KT(e))}function KT(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class HT extends TT{static getInstance(){return new HT}constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}getInitialEvent(e){return Rs("visible"===e,"Unknown event type: "+e),[this.visible_]}}const GT=1e3;class QT extends IT{constructor(e,t,n,r,i,s,o,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.authOverride_=a,this.id=QT.nextPersistentConnectionId_++,this.log_=VI("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=GT,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!Zs())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");HT.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&xT.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(oo(i)),Rs(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new Ws,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Rs(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Rs(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");const o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(s).set(i,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,(i=>{const s=i.d,o=i.s;QT.warnOnListenWarnings_(s,t);(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==o&&this.removeListen_(n,r),e.onComplete&&e.onComplete(o,s))}))}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&lo(e,"w")){const n=co(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();qI("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(e," at ")+"".concat(n," to your security rules for better performance."))}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=ao(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=ao(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Rs(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(e=>{r&&setTimeout((()=>{r(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const s={p:t,d:n};void 0!==i&&(s.h=i),this.outstandingPuts_.push({action:e,request:s,onComplete:r}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+oo(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):BI("Unrecognized action received from server: "+oo(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Rs(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=GT,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=GT,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=GT),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+QT.nextConnectionId_++,i=this.lastSessionId;let s=!1,o=null;const a=function(){o?o.close():(s=!0,n())},l=function(e){Rs(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(e)};this.realtime_={close:a,sendRequest:l};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[a,l]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);s?jI("getToken() completed but was canceled"):(jI("getToken() completed. Creating connection."),this.authToken_=a&&a.accessToken,this.appCheckToken_=l&&l.token,o=new kT(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{qI(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),i))}catch(BI){this.log_("Failed to get token: "+BI),s||(this.repoInfo_.nodeAdmin&&qI(BI),a())}}}interrupt(e){jI("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){jI("Resuming connection for reason: "+e),delete this.interruptReasons_[e],uo(this.interruptReasons_)&&(this.reconnectDelay_=GT,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>JI(e))).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new AT(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){jI("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){jI("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";Zs()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+kI.replace(/\./g,"-")]=1,Gs()?e["framework.cordova"]=1:$s()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=xT.getInstance().currentlyOnline();return uo(this.interruptReasons_)&&e}}QT.nextPersistentConnectionId_=0,QT.nextConnectionId_=0;class YT{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new YT(e,t)}}class JT{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new YT(KI,e),r=new YT(KI,t);return 0!==this.compare(n,r)}minPost(){return YT.MIN}}let $T;class XT extends JT{static get __EMPTY_NODE(){return $T}static set __EMPTY_NODE(e){$T=e}compare(e,t){return GI(e.name,t.name)}isDefinedOn(e){throw Os("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return YT.MIN}maxPost(){return new YT(HI,$T)}makePost(e,t){return Rs("string"===typeof e,"KeyIndex indexValue must always be a string."),new YT(e,$T)}toString(){return".key"}}const ZT=new XT;class ex{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,r&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class tx{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:tx.RED,this.left=null!=r?r:nx.EMPTY_NODE,this.right=null!=i?i:nx.EMPTY_NODE}copy(e,t,n,r,i){return new tx(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return nx.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return nx.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,tx.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,tx.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}tx.RED=!0,tx.BLACK=!1;class nx{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nx.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new nx(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,tx.BLACK,null,null))}remove(e){return new nx(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,tx.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ex(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new ex(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new ex(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new ex(this.root_,null,this.comparator_,!0,e)}}function rx(e,t){return GI(e.name,t.name)}function ix(e,t){return GI(e,t)}let sx;nx.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new tx(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const ox=function(e){return"number"===typeof e?"number:"+ZI(e):"string:"+e},ax=function(e){if(e.isLeafNode()){const t=e.val();Rs("string"===typeof t||"number"===typeof t||"object"===typeof t&&lo(t,".sv"),"Priority must be a string or number.")}else Rs(e===sx||e.isEmpty(),"priority of unexpected type.");Rs(e===sx||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let lx,cx,ux;class hx{static set __childrenNodeConstructor(e){lx=e}static get __childrenNodeConstructor(){return lx}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hx.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,Rs(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),ax(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new hx(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:hx.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return UT(e)?this:".priority"===PT(e)?this.priorityNode_:hx.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:hx.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=PT(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(Rs(".priority"!==n||1===RT(e),".priority must be the last token in a path"),this.updateImmediateChild(n,hx.__childrenNodeConstructor.EMPTY_NODE.updateChild(OT(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+ox(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?ZI(this.value_):this.value_,this.lazyHash_=DI(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===hx.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof hx.__childrenNodeConstructor?-1:(Rs(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=hx.VALUE_TYPE_ORDER.indexOf(t),i=hx.VALUE_TYPE_ORDER.indexOf(n);return Rs(r>=0,"Unknown leaf type: "+t),Rs(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}hx.VALUE_TYPE_ORDER=["object","boolean","number","string"];const dx=new class extends JT{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?GI(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return YT.MIN}maxPost(){return new YT(HI,new hx("[PRIORITY-POST]",ux))}makePost(e,t){const n=cx(e);return new YT(t,new hx("[PRIORITY-POST]",n))}toString(){return".priority"}},fx=Math.log(2);class px{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/fx,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const mx=function(e,t,n,r){e.sort(t);const i=function(t,r){const s=r-t;let o,a;if(0===s)return null;if(1===s)return o=e[t],a=n?n(o):o,new tx(a,o.node,tx.BLACK,null,null);{const l=parseInt(s/2,10)+t,c=i(t,l),u=i(l+1,r);return o=e[l],a=n?n(o):o,new tx(a,o.node,tx.BLACK,c,u)}},s=function(t){let r=null,s=null,o=e.length;const a=function(t,r){const s=o-t,a=o;o-=t;const c=i(s+1,a),u=e[s],h=n?n(u):u;l(new tx(h,u.node,r,null,c))},l=function(e){r?(r.left=e,r=e):(s=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?a(r,tx.BLACK):(a(r,tx.BLACK),a(r,tx.RED))}return s}(new px(e.length));return new nx(r||t,s)};let gx;const yx={};class vx{static get Default(){return Rs(yx&&dx,"ChildrenNode.ts has not been loaded"),gx=gx||new vx({".priority":yx},{".priority":dx}),gx}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=co(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof nx?t:null}hasIndex(e){return lo(this.indexSet_,e.toString())}addIndex(e,t){Rs(e!==ZT,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(YT.Wrap);let s,o=i.getNext();for(;o;)r=r||e.isDefinedOn(o.node),n.push(o),o=i.getNext();s=r?mx(n,e.getCompare()):yx;const a=e.toString(),l=Object.assign({},this.indexSet_);l[a]=e;const c=Object.assign({},this.indexes_);return c[a]=s,new vx(c,l)}addToIndexes(e,t){const n=ho(this.indexes_,((n,r)=>{const i=co(this.indexSet_,r);if(Rs(i,"Missing index implementation for "+r),n===yx){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(YT.Wrap);let s=r.getNext();for(;s;)s.name!==e.name&&n.push(s),s=r.getNext();return n.push(e),mx(n,i.getCompare())}return yx}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new YT(e.name,r))),i.insert(e,e.node)}}));return new vx(n,this.indexSet_)}removeFromIndexes(e,t){const n=ho(this.indexes_,(n=>{if(n===yx)return n;{const r=t.get(e.name);return r?n.remove(new YT(e.name,r)):n}}));return new vx(n,this.indexSet_)}}let _x;class wx{static get EMPTY_NODE(){return _x||(_x=new wx(new nx(ix),null,vx.Default))}constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&ax(this.priorityNode_),this.children_.isEmpty()&&Rs(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||_x}updatePriority(e){return this.children_.isEmpty()?this:new wx(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?_x:t}}getChild(e){const t=PT(e);return null===t?this:this.getImmediateChild(t).getChild(OT(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(Rs(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new YT(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const s=r.isEmpty()?_x:this.priorityNode_;return new wx(r,s,i)}}updateChild(e,t){const n=PT(e);if(null===n)return t;{Rs(".priority"!==PT(e)||1===RT(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(OT(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(dx,((s,o)=>{t[s]=o.val(e),n++,i&&wx.INTEGER_REGEXP_.test(s)?r=Math.max(r,Number(s)):i=!1})),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+ox(this.getPriority().val())+":"),this.forEachChild(dx,((t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":DI(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new YT(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new YT(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new YT(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,YT.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,YT.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===bx?-1:0}withIndex(e){if(e===ZT||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new wx(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===ZT||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(dx),n=t.getIterator(dx);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===ZT?null:this.indexMap_.get(e.toString())}}wx.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const bx=new class extends wx{constructor(){super(new nx(ix),wx.EMPTY_NODE,vx.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return wx.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(YT,{MIN:{value:new YT(KI,wx.EMPTY_NODE)},MAX:{value:new YT(HI,bx)}}),XT.__EMPTY_NODE=wx.EMPTY_NODE,hx.__childrenNodeConstructor=wx,sx=bx,function(e){ux=e}(bx);function Sx(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return wx.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Rs(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new hx(e,Sx(t))}if(e instanceof Array){let n=wx.EMPTY_NODE;return XI(e,((t,r)=>{if(lo(e,t)&&"."!==t.substring(0,1)){const e=Sx(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(Sx(t))}{const n=[];let r=!1;if(XI(e,((e,t)=>{if("."!==e.substring(0,1)){const i=Sx(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new YT(e,i)))}})),0===n.length)return wx.EMPTY_NODE;const i=mx(n,rx,(e=>e.name),ix);if(r){const e=mx(n,dx.getCompare());return new wx(i,Sx(t),new vx({".priority":e},{".priority":dx}))}return new wx(i,Sx(t),vx.Default)}}!function(e){cx=e}(Sx);class Ex extends JT{constructor(e){super(),this.indexPath_=e,Rs(!UT(e)&&".priority"!==PT(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?GI(e.name,t.name):i}makePost(e,t){const n=Sx(e),r=wx.EMPTY_NODE.updateChild(this.indexPath_,n);return new YT(t,r)}maxPost(){const e=wx.EMPTY_NODE.updateChild(this.indexPath_,bx);return new YT(HI,e)}toString(){return LT(this.indexPath_,0).join("/")}}const Cx=new class extends JT{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?GI(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return YT.MIN}maxPost(){return YT.MAX}makePost(e,t){const n=Sx(e);return new YT(t,n)}toString(){return".value"}};function kx(e){return{type:"value",snapshotNode:e}}function Ix(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Tx(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function xx(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class Ax{constructor(e){this.index_=e}updateChild(e,t,n,r,i,s){Rs(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(Tx(t,o)):Rs(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?s.trackChildChange(Ix(t,n)):s.trackChildChange(xx(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(dx,((e,r)=>{t.hasChild(e)||n.trackChildChange(Tx(e,r))})),t.isLeafNode()||t.forEachChild(dx,((t,r)=>{if(e.hasChild(t)){const i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(xx(t,r,i))}else n.trackChildChange(Ix(t,r))}))),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?wx.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Nx{constructor(e){this.indexedFilter_=new Ax(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Nx.getStartPost_(e),this.endPost_=Nx.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,r,i,s){return this.matches(new YT(t,n))||(n=wx.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,s)}updateFullNode(e,t,n){t.isLeafNode()&&(t=wx.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(wx.EMPTY_NODE);const i=this;return t.forEachChild(dx,((e,t)=>{i.matches(new YT(e,t))||(r=r.updateImmediateChild(e,wx.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Px{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new Nx(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,r,i,s){return this.rangedFilter_.matches(new YT(t,n))||(n=wx.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,s):this.fullLimitUpdateChild_(e,t,n,i,s)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=wx.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=wx.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;r=r.updateImmediateChild(t.name,t.node),n++}}}else{let e;r=t.withIndex(this.index_),r=r.updatePriority(wx.EMPTY_NODE),e=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:r=r.updateImmediateChild(t.name,wx.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let s;if(this.reverse_){const e=this.index_.getCompare();s=(t,n)=>e(n,t)}else s=this.index_.getCompare();const o=e;Rs(o.numChildren()===this.limit_,"");const a=new YT(t,n),l=this.reverse_?o.getFirstChild(this.index_):o.getLastChild(this.index_),c=this.rangedFilter_.matches(a);if(o.hasChild(t)){const e=o.getImmediateChild(t);let u=r.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=u&&(u.name===t||o.hasChild(u.name));)u=r.getChildAfterChild(this.index_,u,this.reverse_);const h=null==u?1:s(u,a);if(c&&!n.isEmpty()&&h>=0)return null!=i&&i.trackChildChange(xx(t,n,e)),o.updateImmediateChild(t,n);{null!=i&&i.trackChildChange(Tx(t,e));const n=o.updateImmediateChild(t,wx.EMPTY_NODE);return null!=u&&this.rangedFilter_.matches(u)?(null!=i&&i.trackChildChange(Ix(u.name,u.node)),n.updateImmediateChild(u.name,u.node)):n}}return n.isEmpty()?e:c&&s(l,a)>=0?(null!=i&&(i.trackChildChange(Tx(l.name,l.node)),i.trackChildChange(Ix(t,n))),o.updateImmediateChild(t,n).updateImmediateChild(l.name,wx.EMPTY_NODE)):e}}class Rx{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=dx}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return Rs(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Rs(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:KI}hasEnd(){return this.endSet_}getIndexEndValue(){return Rs(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Rs(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:HI}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return Rs(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===dx}copy(){const e=new Rx;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Ox(e,t,n){const r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Dx(e,t,n){const r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Lx(e,t){const n=e.copy();return n.index_=t,n}function Mx(e){const t={};if(e.isDefault())return t;let n;if(e.index_===dx?n="$priority":e.index_===Cx?n="$value":e.index_===ZT?n="$key":(Rs(e.index_ instanceof Ex,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=oo(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=oo(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+oo(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=oo(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+oo(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function Fx(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==dx&&(t.i=e.index_.toString()),t}class Ux extends IT{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(Rs(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=VI("p:rest:"),this.listens_={}}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const s=Ux.getListenId_(e,n),o={};this.listens_[s]=o;const a=Mx(e._queryParams);this.restRequest_(i+".json",a,((e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(i,a,!1,n),co(this.listens_,s)===o){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}}))}unlisten(e,t){const n=Ux.getListenId_(e,t);delete this.listens_[n]}get(e){const t=Mx(e._queryParams),n=e._path.toString(),r=new Ws;return this.restRequest_(n+".json",t,((e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))})),r.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((r=>{let[i,s]=r;i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+mo(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let e=null;if(a.status>=200&&a.status<300){try{e=so(a.responseText)}catch(SM){qI("Failed to parse JSON response for "+o+": "+a.responseText)}n(null,e)}else 401!==a.status&&404!==a.status&&qI("Got unsuccessful REST response for "+o+" Status: "+a.status),n(a.status);n=null}},a.open("GET",o,!0),a.send()}))}}class jx{constructor(){this.rootNode_=wx.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Vx(){return{value:null,children:new Map}}function Bx(e,t,n){if(UT(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=PT(t);e.children.has(r)||e.children.set(r,Vx());Bx(e.children.get(r),t=OT(t),n)}}function zx(e,t){if(UT(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;{const n=e.value;return e.value=null,n.forEachChild(dx,((t,n)=>{Bx(e,new AT(t),n)})),zx(e,t)}}if(e.children.size>0){const n=PT(t);if(t=OT(t),e.children.has(n)){zx(e.children.get(n),t)&&e.children.delete(n)}return 0===e.children.size}return!0}function qx(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,r)=>{qx(r,new AT(t.toString()+"/"+e),n)}))}class Wx{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&XI(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class Kx{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Wx(e);const n=1e4+2e4*Math.random();rT(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;XI(e,((e,r)=>{r>0&&lo(this.statsToReport_,e)&&(t[e]=r,n=!0)})),n&&this.server_.reportStats(t),rT(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Hx;function Gx(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Hx||(Hx={}));class Qx{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=Hx.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(UT(this.path)){if(null!=this.affectedTree.value)return Rs(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new AT(e));return new Qx(NT(),t,this.revert)}}return Rs(PT(this.path)===e,"operationForChild called for unrelated child."),new Qx(OT(this.path),this.affectedTree,this.revert)}}class Yx{constructor(e,t){this.source=e,this.path=t,this.type=Hx.LISTEN_COMPLETE}operationForChild(e){return UT(this.path)?new Yx(this.source,NT()):new Yx(this.source,OT(this.path))}}class Jx{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=Hx.OVERWRITE}operationForChild(e){return UT(this.path)?new Jx(this.source,NT(),this.snap.getImmediateChild(e)):new Jx(this.source,OT(this.path),this.snap)}}class $x{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=Hx.MERGE}operationForChild(e){if(UT(this.path)){const t=this.children.subtree(new AT(e));return t.isEmpty()?null:t.value?new Jx(this.source,NT(),t.value):new $x(this.source,NT(),t)}return Rs(PT(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new $x(this.source,OT(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Xx{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(UT(e))return this.isFullyInitialized()&&!this.filtered_;const t=PT(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Zx{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function eA(e,t,n,r,i,s){const o=r.filter((e=>e.type===n));o.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw Os("Should only compare child_ events.");const r=new YT(t.childName,t.snapshotNode),i=new YT(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n))),o.forEach((n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);i.forEach((i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function tA(e,t){return{eventCache:e,serverCache:t}}function nA(e,t,n,r){return tA(new Xx(t,n,r),e.serverCache)}function rA(e,t,n,r){return tA(e.eventCache,new Xx(t,n,r))}function iA(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function sA(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let oA;class aA{static fromObject(e){let t=new aA(null);return XI(e,((e,n)=>{t=t.set(new AT(e),n)})),t}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(oA||(oA=new nx(QI)),oA);this.value=e,this.children=t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:NT(),value:this.value};if(UT(e))return null;{const n=PT(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(OT(e),t);if(null!=i){return{path:FT(new AT(n),i.path),value:i.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(UT(e))return this;{const t=PT(e),n=this.children.get(t);return null!==n?n.subtree(OT(e)):new aA(null)}}set(e,t){if(UT(e))return new aA(t,this.children);{const n=PT(e),r=(this.children.get(n)||new aA(null)).set(OT(e),t),i=this.children.insert(n,r);return new aA(this.value,i)}}remove(e){if(UT(e))return this.children.isEmpty()?new aA(null):new aA(null,this.children);{const t=PT(e),n=this.children.get(t);if(n){const r=n.remove(OT(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new aA(null):new aA(this.value,i)}return this}}get(e){if(UT(e))return this.value;{const t=PT(e),n=this.children.get(t);return n?n.get(OT(e)):null}}setTree(e,t){if(UT(e))return t;{const n=PT(e),r=(this.children.get(n)||new aA(null)).setTree(OT(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new aA(this.value,i)}}fold(e){return this.fold_(NT(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((r,i)=>{n[r]=i.fold_(FT(e,r),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,NT(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(UT(e))return null;{const r=PT(e),i=this.children.get(r);return i?i.findOnPath_(OT(e),FT(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,NT(),t)}foreachOnPath_(e,t,n){if(UT(e))return this;{this.value&&n(t,this.value);const r=PT(e),i=this.children.get(r);return i?i.foreachOnPath_(OT(e),FT(t,r),n):new aA(null)}}foreach(e){this.foreach_(NT(),e)}foreach_(e,t){this.children.inorderTraversal(((n,r)=>{r.foreach_(FT(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class lA{constructor(e){this.writeTree_=e}static empty(){return new lA(new aA(null))}}function cA(e,t,n){if(UT(t))return new lA(new aA(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let s=r.value;const o=jT(i,t);return s=s.updateChild(o,n),new lA(e.writeTree_.set(i,s))}{const r=new aA(n),i=e.writeTree_.setTree(t,r);return new lA(i)}}}function uA(e,t,n){let r=e;return XI(n,((e,n)=>{r=cA(r,FT(t,e),n)})),r}function hA(e,t){if(UT(t))return lA.empty();{const n=e.writeTree_.setTree(t,new aA(null));return new lA(n)}}function dA(e,t){return null!=fA(e,t)}function fA(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(jT(n.path,t)):null}function pA(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(dx,((e,n)=>{t.push(new YT(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new YT(e,n.value))})),t}function mA(e,t){if(UT(t))return e;{const n=fA(e,t);return new lA(null!=n?new aA(n):e.writeTree_.subtree(t))}}function gA(e){return e.writeTree_.isEmpty()}function yA(e,t){return vA(NT(),e.writeTree_,t)}function vA(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal(((t,i)=>{".priority"===t?(Rs(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=vA(FT(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(FT(e,".priority"),r)),n}}function _A(e,t){return RA(t,e)}function wA(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));Rs(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,s=!1,o=e.allWrites.length-1;for(;i&&o>=0;){const t=e.allWrites[o];t.visible&&(o>=n&&bA(t,r.path)?i=!1:zT(r.path,t.path)&&(s=!0)),o--}if(i){if(s)return function(e){e.visibleWrites=EA(e.allWrites,SA,NT()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(r.snap)e.visibleWrites=hA(e.visibleWrites,r.path);else{XI(r.children,(t=>{e.visibleWrites=hA(e.visibleWrites,FT(r.path,t))}))}return!0}return!1}function bA(e,t){if(e.snap)return zT(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&zT(FT(e.path,n),t))return!0;return!1}function SA(e){return e.visible}function EA(e,t,n){let r=lA.empty();for(let i=0;i<e.length;++i){const s=e[i];if(t(s)){const e=s.path;let t;if(s.snap)zT(n,e)?(t=jT(n,e),r=cA(r,t,s.snap)):zT(e,n)&&(t=jT(e,n),r=cA(r,NT(),s.snap.getChild(t)));else{if(!s.children)throw Os("WriteRecord should have .snap or .children");if(zT(n,e))t=jT(n,e),r=uA(r,t,s.children);else if(zT(e,n))if(t=jT(e,n),UT(t))r=uA(r,NT(),s.children);else{const e=co(s.children,PT(t));if(e){const n=e.getChild(OT(t));r=cA(r,NT(),n)}}}}}return r}function CA(e,t,n,r,i){if(r||i){const s=mA(e.visibleWrites,t);if(!i&&gA(s))return n;if(i||null!=n||dA(s,NT())){const s=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(zT(e.path,t)||zT(t,e.path))};return yA(EA(e.allWrites,s,t),n||wx.EMPTY_NODE)}return null}{const r=fA(e.visibleWrites,t);if(null!=r)return r;{const r=mA(e.visibleWrites,t);if(gA(r))return n;if(null!=n||dA(r,NT())){return yA(r,n||wx.EMPTY_NODE)}return null}}}function kA(e,t,n,r){return CA(e.writeTree,e.treePath,t,n,r)}function IA(e,t){return function(e,t,n){let r=wx.EMPTY_NODE;const i=fA(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(dx,((e,t)=>{r=r.updateImmediateChild(e,t)})),r;if(n){const i=mA(e.visibleWrites,t);return n.forEachChild(dx,((e,t)=>{const n=yA(mA(i,new AT(e)),t);r=r.updateImmediateChild(e,n)})),pA(i).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}return pA(mA(e.visibleWrites,t)).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function TA(e,t,n,r){return function(e,t,n,r,i){Rs(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=FT(t,n);if(dA(e.visibleWrites,s))return null;{const t=mA(e.visibleWrites,s);return gA(t)?i.getChild(n):yA(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function xA(e,t){return function(e,t){return fA(e.visibleWrites,t)}(e.writeTree,FT(e.treePath,t))}function AA(e,t,n,r,i,s){return function(e,t,n,r,i,s,o){let a;const l=mA(e.visibleWrites,t),c=fA(l,NT());if(null!=c)a=c;else{if(null==n)return[];a=yA(l,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=o.getCompare(),n=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,s)}function NA(e,t,n){return function(e,t,n,r){const i=FT(t,n),s=fA(e.visibleWrites,i);if(null!=s)return s;if(r.isCompleteForChild(n))return yA(mA(e.visibleWrites,i),r.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function PA(e,t){return RA(FT(e.treePath,t),e.writeTree)}function RA(e,t){return{treePath:e,writeTree:t}}class OA{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;Rs("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Rs(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,xx(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,Tx(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,Ix(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Os("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,xx(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const DA=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class LA{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new Xx(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return NA(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:sA(this.viewCache_),i=AA(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function MA(e,t,n,r,i){const s=new OA;let o,a;if(n.type===Hx.OVERWRITE){const l=n;l.source.fromUser?o=jA(e,t,l.path,l.snap,r,i,s):(Rs(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!UT(l.path),o=UA(e,t,l.path,l.snap,r,i,a,s))}else if(n.type===Hx.MERGE){const l=n;l.source.fromUser?o=function(e,t,n,r,i,s,o){let a=t;return r.foreach(((r,l)=>{const c=FT(n,r);VA(t,PT(c))&&(a=jA(e,a,c,l,i,s,o))})),r.foreach(((r,l)=>{const c=FT(n,r);VA(t,PT(c))||(a=jA(e,a,c,l,i,s,o))})),a}(e,t,l.path,l.children,r,i,s):(Rs(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),o=zA(e,t,l.path,l.children,r,i,a,s))}else if(n.type===Hx.ACK_USER_WRITE){const a=n;o=a.revert?function(e,t,n,r,i,s){let o;if(null!=xA(r,n))return t;{const a=new LA(r,t,i),l=t.eventCache.getNode();let c;if(UT(n)||".priority"===PT(n)){let n;if(t.serverCache.isFullyInitialized())n=kA(r,sA(t));else{const e=t.serverCache.getNode();Rs(e instanceof wx,"serverChildren would be complete if leaf node"),n=IA(r,e)}c=e.filter.updateFullNode(l,n,s)}else{const i=PT(n);let u=NA(r,i,t.serverCache);null==u&&t.serverCache.isCompleteForChild(i)&&(u=l.getImmediateChild(i)),c=null!=u?e.filter.updateChild(l,i,u,OT(n),a,s):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(l,i,wx.EMPTY_NODE,OT(n),a,s):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=kA(r,sA(t)),o.isLeafNode()&&(c=e.filter.updateFullNode(c,o,s)))}return o=t.serverCache.isFullyInitialized()||null!=xA(r,NT()),nA(t,c,o,e.filter.filtersNodes())}}(e,t,a.path,r,i,s):function(e,t,n,r,i,s,o){if(null!=xA(i,n))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(UT(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return UA(e,t,n,l.getNode().getChild(n),i,s,a,o);if(UT(n)){let r=new aA(null);return l.getNode().forEachChild(ZT,((e,t)=>{r=r.set(new AT(e),t)})),zA(e,t,n,r,i,s,a,o)}return t}{let c=new aA(null);return r.foreach(((e,t)=>{const r=FT(n,e);l.isCompleteForPath(r)&&(c=c.set(e,l.getNode().getChild(r)))})),zA(e,t,n,c,i,s,a,o)}}(e,t,a.path,a.affectedTree,r,i,s)}else{if(n.type!==Hx.LISTEN_COMPLETE)throw Os("Unknown operation type: "+n.type);o=function(e,t,n,r,i){const s=t.serverCache,o=rA(t,s.getNode(),s.isFullyInitialized()||UT(n),s.isFiltered());return FA(e,o,n,r,DA,i)}(e,t,n.path,r,s)}const l=s.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=iA(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(kx(iA(t)))}}(t,o,l),{viewCache:o,changes:l}}function FA(e,t,n,r,i,s){const o=t.eventCache;if(null!=xA(r,n))return t;{let a,l;if(UT(n))if(Rs(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=sA(t),i=IA(r,n instanceof wx?n:wx.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),i,s)}else{const n=kA(r,sA(t));a=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const c=PT(n);if(".priority"===c){Rs(1===RT(n),"Can't have a priority with additional path components");const i=o.getNode();l=t.serverCache.getNode();const s=TA(r,n,i,l);a=null!=s?e.filter.updatePriority(i,s):o.getNode()}else{const u=OT(n);let h;if(o.isCompleteForChild(c)){l=t.serverCache.getNode();const e=TA(r,n,o.getNode(),l);h=null!=e?o.getNode().getImmediateChild(c).updateChild(u,e):o.getNode().getImmediateChild(c)}else h=NA(r,c,t.serverCache);a=null!=h?e.filter.updateChild(o.getNode(),c,h,u,i,s):o.getNode()}}return nA(t,a,o.isFullyInitialized()||UT(n),e.filter.filtersNodes())}}function UA(e,t,n,r,i,s,o,a){const l=t.serverCache;let c;const u=o?e.filter:e.filter.getIndexedFilter();if(UT(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),e,null)}else{const e=PT(n);if(!l.isCompleteForPath(n)&&RT(n)>1)return t;const i=OT(n),s=l.getNode().getImmediateChild(e).updateChild(i,r);c=".priority"===e?u.updatePriority(l.getNode(),s):u.updateChild(l.getNode(),e,s,i,DA,null)}const h=rA(t,c,l.isFullyInitialized()||UT(n),u.filtersNodes());return FA(e,h,n,i,new LA(i,h,s),a)}function jA(e,t,n,r,i,s,o){const a=t.eventCache;let l,c;const u=new LA(i,t,s);if(UT(n))c=e.filter.updateFullNode(t.eventCache.getNode(),r,o),l=nA(t,c,!0,e.filter.filtersNodes());else{const i=PT(n);if(".priority"===i)c=e.filter.updatePriority(t.eventCache.getNode(),r),l=nA(t,c,a.isFullyInitialized(),a.isFiltered());else{const s=OT(n),c=a.getNode().getImmediateChild(i);let h;if(UT(s))h=r;else{const e=u.getCompleteChild(i);h=null!=e?".priority"===DT(s)&&e.getChild(MT(s)).isEmpty()?e:e.updateChild(s,r):wx.EMPTY_NODE}if(c.equals(h))l=t;else{l=nA(t,e.filter.updateChild(a.getNode(),i,h,s,u,o),a.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function VA(e,t){return e.eventCache.isCompleteForChild(t)}function BA(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function zA(e,t,n,r,i,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=UT(n)?r:new aA(null).setTree(n,r);const u=t.serverCache.getNode();return l.children.inorderTraversal(((n,r)=>{if(u.hasChild(n)){const l=BA(0,t.serverCache.getNode().getImmediateChild(n),r);c=UA(e,c,new AT(n),l,i,s,o,a)}})),l.children.inorderTraversal(((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!u.hasChild(n)&&!l){const l=BA(0,t.serverCache.getNode().getImmediateChild(n),r);c=UA(e,c,new AT(n),l,i,s,o,a)}})),c}class qA{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new Ax(n.getIndex()),i=(s=n).loadsAllData()?new Ax(s.getIndex()):s.hasLimit()?new Px(s):new Nx(s);var s;this.processor_=function(e){return{filter:e}}(i);const o=t.serverCache,a=t.eventCache,l=r.updateFullNode(wx.EMPTY_NODE,o.getNode(),null),c=i.updateFullNode(wx.EMPTY_NODE,a.getNode(),null),u=new Xx(l,o.isFullyInitialized(),r.filtersNodes()),h=new Xx(c,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=tA(h,u),this.eventGenerator_=new Zx(this.query_)}get query(){return this.query_}}function WA(e,t){const n=sA(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!UT(t)&&!n.getImmediateChild(PT(t)).isEmpty())?n.getChild(t):null}function KA(e){return 0===e.eventRegistrations_.length}function HA(e,t,n){const r=[];if(n){Rs(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach((e=>{const t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){const i=e.eventRegistrations_[r];if(i.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}else n.push(i)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function GA(e,t,n,r){t.type===Hx.MERGE&&null!==t.source.queryId&&(Rs(sA(e.viewCache_),"We should always have a full cache before handling merges"),Rs(iA(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,s=MA(e.processor_,i,t,n,r);var o,a;return o=e.processor_,a=s.viewCache,Rs(a.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),Rs(a.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),Rs(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,QA(e,s.changes,s.viewCache.eventCache.getNode(),null)}function QA(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],s=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),eA(e,i,"child_removed",t,r,n),eA(e,i,"child_added",t,r,n),eA(e,i,"child_moved",s,r,n),eA(e,i,"child_changed",t,r,n),eA(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}let YA,JA;class $A{constructor(){this.views=new Map}}function XA(e,t,n,r){const i=t.source.queryId;if(null!==i){const s=e.views.get(i);return Rs(null!=s,"SyncTree gave us an op for an invalid query."),GA(s,t,n,r)}{let i=[];for(const s of e.views.values())i=i.concat(GA(s,t,n,r));return i}}function ZA(e,t,n,r,i){const s=t._queryIdentifier,o=e.views.get(s);if(!o){let e=kA(n,i?r:null),s=!1;e?s=!0:r instanceof wx?(e=IA(n,r),s=!1):(e=wx.EMPTY_NODE,s=!1);const o=tA(new Xx(e,s,!1),new Xx(r,i,!1));return new qA(t,o)}return o}function eN(e,t,n,r,i,s){const o=ZA(e,t,r,i,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){const n=e.viewCache_.eventCache,r=[];n.getNode().isLeafNode()||n.getNode().forEachChild(dx,((e,t)=>{r.push(Ix(e,t))}));return n.isFullyInitialized()&&r.push(kx(n.getNode())),QA(e,r,n.getNode(),t)}(o,n)}function tN(e,t,n,r){const i=t._queryIdentifier,s=[];let o=[];const a=oN(e);if("default"===i)for(const[l,c]of e.views.entries())o=o.concat(HA(c,n,r)),KA(c)&&(e.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const t=e.views.get(i);t&&(o=o.concat(HA(t,n,r)),KA(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||s.push(t.query)))}return a&&!oN(e)&&s.push(new(Rs(YA,"Reference.ts has not been loaded"),YA)(t._repo,t._path)),{removed:s,events:o}}function nN(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function rN(e,t){let n=null;for(const r of e.views.values())n=n||WA(r,t);return n}function iN(e,t){if(t._queryParams.loadsAllData())return aN(e);{const n=t._queryIdentifier;return e.views.get(n)}}function sN(e,t){return null!=iN(e,t)}function oN(e){return null!=aN(e)}function aN(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let lN=1;class cN{constructor(e){this.listenProvider_=e,this.syncPointTree_=new aA(null),this.pendingWriteTree_={visibleWrites:lA.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function uN(e,t,n,r,i){return function(e,t,n,r,i){Rs(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=cA(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?_N(e,new Jx({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function hN(e,t,n,r){!function(e,t,n,r){Rs(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=uA(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);const i=aA.fromObject(n);return _N(e,new $x({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function dN(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(wA(e.pendingWriteTree_,t)){let t=new aA(null);return null!=r.snap?t=t.set(NT(),!0):XI(r.children,(e=>{t=t.set(new AT(e),!0)})),_N(e,new Qx(r.path,t,n))}return[]}function fN(e,t,n){return _N(e,new Jx({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function pN(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=t._path,o=e.syncPointTree_.get(s);let a=[];if(o&&("default"===t._queryIdentifier||sN(o,t))){const l=tN(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!i){const n=-1!==c.findIndex((e=>e._queryParams.loadsAllData())),i=e.syncPointTree_.findOnPath(s,((e,t)=>oN(t)));if(n&&!i){const t=e.syncPointTree_.subtree(s);if(!t.isEmpty()){const n=function(e){return e.fold(((e,t,n)=>{if(t&&oN(t)){return[aN(t)]}{let e=[];return t&&(e=nN(t)),XI(n,((t,n)=>{e=e.concat(n)})),e}}))}(t);for(let t=0;t<n.length;++t){const r=n[t],i=r.query,s=SN(e,r);e.listenProvider_.startListening(xN(i),EN(e,i),s.hashFn,s.onComplete)}}}if(!i&&c.length>0&&!r)if(n){const n=null;e.listenProvider_.stopListening(xN(t),n)}else c.forEach((t=>{const n=e.queryToTagMap.get(CN(t));e.listenProvider_.stopListening(xN(t),n)}))}!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=CN(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,c)}return a}function mN(e,t,n,r){const i=kN(e,r);if(null!=i){const r=IN(i),s=r.path,o=r.queryId,a=jT(s,t);return TN(e,s,new Jx(Gx(o),a,n))}return[]}function gN(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=t._path;let s=null,o=!1;e.syncPointTree_.foreachOnPath(i,((e,t)=>{const n=jT(e,i);s=s||rN(t,n),o=o||oN(t)}));let a,l=e.syncPointTree_.get(i);if(l?(o=o||oN(l),s=s||rN(l,NT())):(l=new $A,e.syncPointTree_=e.syncPointTree_.set(i,l)),null!=s)a=!0;else{a=!1,s=wx.EMPTY_NODE;e.syncPointTree_.subtree(i).foreachChild(((e,t)=>{const n=rN(t,NT());n&&(s=s.updateImmediateChild(e,n))}))}const c=sN(l,t);if(!c&&!t._queryParams.loadsAllData()){const n=CN(t);Rs(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const r=lN++;e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let u=eN(l,t,n,_A(e.pendingWriteTree_,i),s,a);if(!c&&!o&&!r){const n=iN(l,t);u=u.concat(function(e,t,n){const r=t._path,i=EN(e,t),s=SN(e,n),o=e.listenProvider_.startListening(xN(t),i,s.hashFn,s.onComplete),a=e.syncPointTree_.subtree(r);if(i)Rs(!oN(a.value),"If we're adding a query, it shouldn't be shadowed");else{const t=a.fold(((e,t,n)=>{if(!UT(e)&&t&&oN(t))return[aN(t).query];{let e=[];return t&&(e=e.concat(nN(t).map((e=>e.query)))),XI(n,((t,n)=>{e=e.concat(n)})),e}}));for(let n=0;n<t.length;++n){const r=t[n];e.listenProvider_.stopListening(xN(r),EN(e,r))}}return o}(e,t,n))}return u}function yN(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,((e,n)=>{const r=rN(n,jT(e,t));if(r)return r}));return CA(r,t,i,n,!0)}function vN(e,t){const n=t._path;let r=null;e.syncPointTree_.foreachOnPath(n,((e,t)=>{const i=jT(e,n);r=r||rN(t,i)}));let i=e.syncPointTree_.get(n);i?r=r||rN(i,NT()):(i=new $A,e.syncPointTree_=e.syncPointTree_.set(n,i));const s=null!=r,o=s?new Xx(r,!0,!1):null;return function(e){return iA(e.viewCache_)}(ZA(i,t,_A(e.pendingWriteTree_,t._path),s?o.getNode():wx.EMPTY_NODE,s))}function _N(e,t){return wN(t,e.syncPointTree_,null,_A(e.pendingWriteTree_,NT()))}function wN(e,t,n,r){if(UT(e.path))return bN(e,t,n,r);{const i=t.get(NT());null==n&&null!=i&&(n=rN(i,NT()));let s=[];const o=PT(e.path),a=e.operationForChild(o),l=t.children.get(o);if(l&&a){const e=n?n.getImmediateChild(o):null,t=PA(r,o);s=s.concat(wN(a,l,e,t))}return i&&(s=s.concat(XA(i,e,r,n))),s}}function bN(e,t,n,r){const i=t.get(NT());null==n&&null!=i&&(n=rN(i,NT()));let s=[];return t.children.inorderTraversal(((t,i)=>{const o=n?n.getImmediateChild(t):null,a=PA(r,t),l=e.operationForChild(t);l&&(s=s.concat(bN(l,i,o,a)))})),i&&(s=s.concat(XA(i,e,r,n))),s}function SN(e,t){const n=t.query,r=EN(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||wx.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return r?function(e,t,n){const r=kN(e,n);if(r){const n=IN(r),i=n.path,s=n.queryId,o=jT(i,t);return TN(e,i,new Yx(Gx(s),o))}return[]}(e,n._path,r):function(e,t){return _N(e,new Yx({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return pN(e,n,null,r)}}}}function EN(e,t){const n=CN(t);return e.queryToTagMap.get(n)}function CN(e){return e._path.toString()+"$"+e._queryIdentifier}function kN(e,t){return e.tagToQueryMap.get(t)}function IN(e){const t=e.indexOf("$");return Rs(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new AT(e.substr(0,t))}}function TN(e,t,n){const r=e.syncPointTree_.get(t);Rs(r,"Missing sync point for query tag that we're tracking");return XA(r,n,_A(e.pendingWriteTree_,t),null)}function xN(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Rs(JA,"Reference.ts has not been loaded"),JA)(e._repo,e._path):e}class AN{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new AN(t)}node(){return this.node_}}class NN{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=FT(this.path_,e);return new NN(this.syncTree_,t)}node(){return yN(this.syncTree_,this.path_)}}const PN=function(e,t,n){return e&&"object"===typeof e?(Rs(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?RN(e[".sv"],t,n):"object"===typeof e[".sv"]?ON(e[".sv"],t):void Rs(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},RN=function(e,t,n){if("timestamp"===e)return n.timestamp;Rs(!1,"Unexpected server value: "+e)},ON=function(e,t,n){e.hasOwnProperty("increment")||Rs(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!==typeof r&&Rs(!1,"Unexpected increment value: "+r);const i=t.node();if(Rs(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!==typeof s?r:s+r},DN=function(e,t,n,r){return MN(t,new NN(n,e),r)},LN=function(e,t,n){return MN(e,new AN(t),n)};function MN(e,t,n){const r=e.getPriority().val(),i=PN(r,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const r=e,s=PN(r.getValue(),t,n);return s!==r.getValue()||i!==r.getPriority().val()?new hx(s,Sx(i)):e}{const r=e;return s=r,i!==r.getPriority().val()&&(s=s.updatePriority(new hx(i))),r.forEachChild(dx,((e,r)=>{const i=MN(r,t.getImmediateChild(e),n);i!==r&&(s=s.updateImmediateChild(e,i))})),s}}class FN{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function UN(e,t){let n=t instanceof AT?t:new AT(t),r=e,i=PT(n);for(;null!==i;){const e=co(r.node.children,i)||{children:{},childCount:0};r=new FN(i,r,e),n=OT(n),i=PT(n)}return r}function jN(e){return e.node.value}function VN(e,t){e.node.value=t,KN(e)}function BN(e){return e.node.childCount>0}function zN(e,t){XI(e.node.children,((n,r)=>{t(new FN(n,e,r))}))}function qN(e,t,n,r){n&&!r&&t(e),zN(e,(e=>{qN(e,t,!0,r)})),n&&r&&t(e)}function WN(e){return new AT(null===e.parent?e.name:WN(e.parent)+"/"+e.name)}function KN(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===jN(e)&&!BN(e)}(n),i=lo(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,KN(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,KN(e))}(e.parent,e.name,e)}const HN=/[\[\].#$\/\u0000-\u001F\u007F]/,GN=/[\[\].#$\u0000-\u001F\u007F]/,QN=10485760,YN=function(e){return"string"===typeof e&&0!==e.length&&!HN.test(e)},JN=function(e){return"string"===typeof e&&0!==e.length&&!GN.test(e)},$N=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!WI(e)||e&&"object"===typeof e&&lo(e,".sv")},XN=function(e,t,n,r){r&&void 0===t||ZN(Eo(e,"value"),t,n)},ZN=function(e,t,n){const r=n instanceof AT?new qT(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+KT(r));if("function"===typeof t)throw new Error(e+"contains a function "+KT(r)+" with contents = "+t.toString());if(WI(t))throw new Error(e+"contains "+t.toString()+" "+KT(r));if("string"===typeof t&&t.length>QN/3&&Io(t)>QN)throw new Error(e+"contains a string greater than "+QN+" utf8 bytes "+KT(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,i=!1;if(XI(t,((t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!YN(t)))throw new Error(e+" contains an invalid key ("+t+") "+KT(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=Io(t),WT(e)}(r,t),ZN(e,s,r),function(e){const t=e.parts_.pop();e.byteLength_-=Io(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)})),n&&i)throw new Error(e+' contains ".value" child '+KT(r)+" in addition to actual children.")}},eP=function(e,t,n,r){if(r&&void 0===t)return;const i=Eo(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const s=[];XI(t,((e,t)=>{const r=new AT(e);if(ZN(i,t,FT(n,r)),".priority"===DT(r)&&!$N(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)})),function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];const i=LT(r);for(let t=0;t<i.length;t++)if(".priority"===i[t]&&t===i.length-1);else if(!YN(i[t]))throw new Error(e+"contains an invalid key ("+i[t]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(VT);let i=null;for(n=0;n<t.length;n++){if(r=t[n],null!==i&&zT(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},tP=function(e,t,n){if(!n||void 0!==t){if(WI(t))throw new Error(Eo(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!$N(t))throw new Error(Eo(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},nP=function(e,t,n,r){if((!r||void 0!==n)&&!YN(n))throw new Error(Eo(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},rP=function(e,t,n,r){if((!r||void 0!==n)&&!JN(n))throw new Error(Eo(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},iP=function(e,t){if(".info"===PT(t))throw new Error(e+" failed = Can't modify data under /.info/")},sP=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!YN(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),JN(e)}(n))throw new Error(Eo(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class oP{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function aP(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],s=i.getPath();null===n||BT(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)}function lP(e,t,n){aP(e,n),uP(e,(e=>BT(e,t)))}function cP(e,t,n){aP(e,n),uP(e,(e=>zT(e,t)||zT(t,e)))}function uP(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){t(i.path)?(hP(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function hP(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();MI&&jI("event: "+n.toString()),nT(r)}}}const dP="repo_interrupt";class fP{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new oP,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Vx(),this.transactionQueueTree_=new FN,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function pP(e,t,n){if(e.stats_=yT(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Ux(e.repoInfo_,((t,n,r,i)=>{yP(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>vP(e,!0)),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{oo(n)}catch(SM){throw new Error("Invalid authOverride provided: "+SM)}}e.persistentConnection_=new QT(e.repoInfo_,t,((t,n,r,i)=>{yP(e,t,n,r,i)}),(t=>{vP(e,t)}),(t=>{!function(e,t){XI(t,((t,n)=>{_P(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){const n=e.toString();return gT[n]||(gT[n]=t()),gT[n]}(e.repoInfo_,(()=>new Kx(e.stats_,e.server_))),e.infoData_=new jx,e.infoSyncTree_=new cN({startListening:(t,n,r,i)=>{let s=[];const o=e.infoData_.getNode(t._path);return o.isEmpty()||(s=fN(e.infoSyncTree_,t._path,o),setTimeout((()=>{i("ok")}),0)),s},stopListening:()=>{}}),_P(e,"connected",!1),e.serverSyncTree_=new cN({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,((n,r)=>{const s=i(n,r);cP(e.eventQueue_,t._path,s)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function mP(e){const t=e.infoData_.getNode(new AT(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function gP(e){return function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e}({timestamp:mP(e)})}function yP(e,t,n,r,i){e.dataUpdateCount++;const s=new AT(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(i)if(r){const t=ho(n,(e=>Sx(e)));o=function(e,t,n,r){const i=kN(e,r);if(i){const r=IN(i),s=r.path,o=r.queryId,a=jT(s,t),l=aA.fromObject(n);return TN(e,s,new $x(Gx(o),a,l))}return[]}(e.serverSyncTree_,s,t,i)}else{const t=Sx(n);o=mN(e.serverSyncTree_,s,t,i)}else if(r){const t=ho(n,(e=>Sx(e)));o=function(e,t,n){const r=aA.fromObject(n);return _N(e,new $x({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,s,t)}else{const t=Sx(n);o=fN(e.serverSyncTree_,s,t)}let a=s;o.length>0&&(a=NP(e,s)),cP(e.eventQueue_,a,o)}function vP(e,t){_P(e,"connected",t),!1===t&&function(e){IP(e,"onDisconnectEvents");const t=gP(e),n=Vx();qx(e.onDisconnect_,NT(),((r,i)=>{const s=DN(r,i,e.serverSyncTree_,t);Bx(n,r,s)}));let r=[];qx(n,NT(),((t,n)=>{r=r.concat(fN(e.serverSyncTree_,t,n));const i=LP(e,t);NP(e,i)})),e.onDisconnect_=Vx(),cP(e.eventQueue_,NT(),r)}(e)}function _P(e,t,n){const r=new AT("/.info/"+t),i=Sx(n);e.infoData_.updateSnapshot(r,i);const s=fN(e.infoSyncTree_,r,i);cP(e.eventQueue_,r,s)}function wP(e){return e.nextWriteId_++}function bP(e,t,n,r,i){IP(e,"set",{path:t.toString(),value:n,priority:r});const s=gP(e),o=Sx(n,r),a=yN(e.serverSyncTree_,t),l=LN(o,a,s),c=wP(e),u=uN(e.serverSyncTree_,t,l,c,!0);aP(e.eventQueue_,u),e.server_.put(t.toString(),o.val(!0),((n,r)=>{const s="ok"===n;s||qI("set at "+t+" failed: "+n);const o=dN(e.serverSyncTree_,c,!s);cP(e.eventQueue_,t,o),TP(e,i,n,r)}));const h=LP(e,t);NP(e,h),cP(e.eventQueue_,h,[])}function SP(e,t,n){e.server_.onDisconnectCancel(t.toString(),((r,i)=>{"ok"===r&&zx(e.onDisconnect_,t),TP(e,n,r,i)}))}function EP(e,t,n,r){const i=Sx(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),((n,s)=>{"ok"===n&&Bx(e.onDisconnect_,t,i),TP(e,r,n,s)}))}function CP(e,t,n){let r;r=".info"===PT(t._path)?pN(e.infoSyncTree_,t,n):pN(e.serverSyncTree_,t,n),lP(e.eventQueue_,t._path,r)}function kP(e){e.persistentConnection_&&e.persistentConnection_.interrupt(dP)}function IP(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];jI(t,...r)}function TP(e,t,n,r){t&&nT((()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let i=e;r&&(i+=": "+r);const s=new Error(i);s.code=e,t(s)}}))}function xP(e,t,n){return yN(e.serverSyncTree_,t,n)||wx.EMPTY_NODE}function AP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||DP(e,t),jN(t)){const n=RP(e,t);Rs(n.length>0,"Sending zero length transaction queue");n.every((e=>0===e.status))&&function(e,t,n){const r=n.map((e=>e.currentWriteId)),i=xP(e,t,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const e=n[c];Rs(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=jT(t,e.path);s=s.updateChild(r,e.currentOutputSnapshotRaw)}const a=s.val(!0),l=t;e.server_.put(l.toString(),a,(r=>{IP(e,"transaction put response",{path:l.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(dN(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();DP(e,UN(e.transactionQueueTree_,t)),AP(e,e.transactionQueueTree_),cP(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)nT(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{qI("transaction at "+l.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}NP(e,t)}}),o)}(e,WN(t),n)}else BN(t)&&zN(t,(t=>{AP(e,t)}))}function NP(e,t){const n=PP(e,t),r=WN(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const s=t.filter((e=>0===e.status)),o=s.map((e=>e.currentWriteId));for(let l=0;l<t.length;l++){const s=t[l],c=jT(n,s.path);let u,h=!1;if(Rs(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)h=!0,u=s.abortReason,i=i.concat(dN(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=25)h=!0,u="maxretry",i=i.concat(dN(e.serverSyncTree_,s.currentWriteId,!0));else{const n=xP(e,s.path,o);s.currentInputSnapshot=n;const r=t[l].update(n.val());if(void 0!==r){ZN("transaction failed: Data returned ",r,s.path);let t=Sx(r);"object"===typeof r&&null!=r&&lo(r,".priority")||(t=t.updatePriority(n.getPriority()));const a=s.currentWriteId,l=gP(e),c=LN(t,n,l);s.currentOutputSnapshotRaw=t,s.currentOutputSnapshotResolved=c,s.currentWriteId=wP(e),o.splice(o.indexOf(a),1),i=i.concat(uN(e.serverSyncTree_,s.path,c,s.currentWriteId,s.applyLocally)),i=i.concat(dN(e.serverSyncTree_,a,!0))}else h=!0,u="nodata",i=i.concat(dN(e.serverSyncTree_,s.currentWriteId,!0))}cP(e.eventQueue_,n,i),i=[],h&&(t[l].status=2,a=t[l].unwatcher,setTimeout(a,Math.floor(0)),t[l].onComplete&&("nodata"===u?r.push((()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot))):r.push((()=>t[l].onComplete(new Error(u),!1,null)))))}var a;DP(e,e.transactionQueueTree_);for(let l=0;l<r.length;l++)nT(r[l]);AP(e,e.transactionQueueTree_)}(e,RP(e,n),r),r}function PP(e,t){let n,r=e.transactionQueueTree_;for(n=PT(t);null!==n&&void 0===jN(r);)r=UN(r,n),n=PT(t=OT(t));return r}function RP(e,t){const n=[];return OP(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function OP(e,t,n){const r=jN(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);zN(t,(t=>{OP(e,t,n)}))}function DP(e,t){const n=jN(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,VN(t,n.length>0?n:void 0)}zN(t,(t=>{DP(e,t)}))}function LP(e,t){const n=WN(PP(e,t)),r=UN(e.transactionQueueTree_,t);return function(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,(t=>{MP(e,t)})),MP(e,r),qN(r,(t=>{MP(e,t)})),n}function MP(e,t){const n=jN(t);if(n){const r=[];let i=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(Rs(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):(Rs(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(dN(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?VN(t,void 0):n.length=s+1,cP(e.eventQueue_,WN(t),i);for(let e=0;e<r.length;e++)nT(r[e])}}const FP=function(e,t){const n=UP(e),r=n.namespace;"firebase.com"===n.domain&&zI(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||zI("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&qI("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new dT(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new AT(n.pathString)}},UP=function(e){let t="",n="",r="",i="",s="",o=!0,a="https",l=443;if("string"===typeof e){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(u,h)),u<h&&(i=function(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let e=n[r];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(SM){}t+="/"+e}return t}(e.substring(u,h)));const d=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):qI("Invalid query segment '".concat(n,"' in query '").concat(e,"'"))}return t}(e.substring(Math.min(e.length,h)));c=t.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(t.substring(c+1),10)):c=t.length;const f=t.slice(0,c);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=r}"ns"in d&&(s=d.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}},jP="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",VP=function(){let e=0;const t=[];return function(n){const r=n===e;let i;e=n;const s=new Array(8);for(i=7;i>=0;i--)s[i]=jP.charAt(n%64),n=Math.floor(n/64);Rs(0===n,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&63===t[i];i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)o+=jP.charAt(t[i]);return Rs(20===o.length,"nextPushId: Length should be 20."),o}}();class BP{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+oo(this.snapshot.exportVal())}}class zP{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class qP{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return Rs(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class WP{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new Ws;return SP(this._repo,this._path,e.wrapCallback((()=>{}))),e.promise}remove(){iP("OnDisconnect.remove",this._path);const e=new Ws;return EP(this._repo,this._path,null,e.wrapCallback((()=>{}))),e.promise}set(e){iP("OnDisconnect.set",this._path),XN("OnDisconnect.set",e,this._path,!1);const t=new Ws;return EP(this._repo,this._path,e,t.wrapCallback((()=>{}))),t.promise}setWithPriority(e,t){iP("OnDisconnect.setWithPriority",this._path),XN("OnDisconnect.setWithPriority",e,this._path,!1),tP("OnDisconnect.setWithPriority",t,!1);const n=new Ws;return function(e,t,n,r,i){const s=Sx(n,r);e.server_.onDisconnectPut(t.toString(),s.val(!0),((n,r)=>{"ok"===n&&Bx(e.onDisconnect_,t,s),TP(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((()=>{}))),n.promise}update(e){iP("OnDisconnect.update",this._path),eP("OnDisconnect.update",e,this._path,!1);const t=new Ws;return function(e,t,n,r){if(uo(n))return jI("onDisconnect().update() called with empty data.  Don't do anything."),void TP(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,((i,s)=>{"ok"===i&&XI(n,((n,r)=>{const i=Sx(r);Bx(e.onDisconnect_,FT(t,n),i)})),TP(0,r,i,s)}))}(this._repo,this._path,e,t.wrapCallback((()=>{}))),t.promise}}class KP{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return UT(this._path)?null:DT(this._path)}get ref(){return new YP(this._repo,this._path)}get _queryIdentifier(){const e=Fx(this._queryParams),t=JI(e);return"{}"===t?"default":t}get _queryObject(){return Fx(this._queryParams)}isEqual(e){if(!((e=To(e))instanceof KP))return!1;const t=this._repo===e._repo,n=BT(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}function HP(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function GP(e){let t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===ZT){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==KI)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==HI)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===dx){if(null!=t&&!$N(t)||null!=n&&!$N(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Rs(e.getIndex()instanceof Ex||e.getIndex()===Cx,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function QP(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class YP extends KP{constructor(e,t){super(e,t,new Rx,!1)}get parent(){const e=MT(this._path);return null===e?null:new YP(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class JP{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new AT(e),n=ZP(this.ref,e);return new JP(this._node.getChild(t),n,dx)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,((t,n)=>e(new JP(n,ZP(this.ref,t),dx))))}hasChild(e){const t=new AT(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function $P(e,t){return(e=To(e))._checkNotDeleted("ref"),void 0!==t?ZP(e._root,t):e._root}function XP(e,t){(e=To(e))._checkNotDeleted("refFromURL");const n=FP(t,e._repo.repoInfo_.nodeAdmin);sP("refFromURL",n);const r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||zI("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),$P(e,n.path.toString())}function ZP(e,t){var n,r,i,s;return null===PT((e=To(e))._path)?(n="child",r="path",s=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),rP(n,r,i,s)):rP("child","path",t,!1),new YP(e._repo,FT(e._path,t))}function eR(e,t){e=To(e),iP("set",e._path),XN("set",t,e._path,!1);const n=new Ws;return bP(e._repo,e._path,t,null,n.wrapCallback((()=>{}))),n.promise}function tR(e,t){eP("update",t,e._path,!1);const n=new Ws;return function(e,t,n,r){IP(e,"update",{path:t.toString(),value:n});let i=!0;const s=gP(e),o={};if(XI(n,((n,r)=>{i=!1,o[n]=DN(FT(t,n),Sx(r),e.serverSyncTree_,s)})),i)jI("update() called with empty data.  Don't do anything."),TP(0,r,"ok",void 0);else{const i=wP(e),s=hN(e.serverSyncTree_,t,o,i);aP(e.eventQueue_,s),e.server_.merge(t.toString(),n,((n,s)=>{const o="ok"===n;o||qI("update at "+t+" failed: "+n);const a=dN(e.serverSyncTree_,i,!o),l=a.length>0?NP(e,t):t;cP(e.eventQueue_,l,a),TP(0,r,n,s)})),XI(n,(n=>{const r=LP(e,FT(t,n));NP(e,r)})),cP(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((()=>{}))),n.promise}function nR(e){e=To(e);const t=new qP((()=>{})),n=new rR(t);return function(e,t,n){const r=vN(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((r=>{const i=Sx(r).withIndex(t._queryParams.getIndex());let s;if(gN(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())s=fN(e.serverSyncTree_,t._path,i);else{const n=EN(e.serverSyncTree_,t);s=mN(e.serverSyncTree_,t._path,i,n)}return cP(e.eventQueue_,t._path,s),pN(e.serverSyncTree_,t,n,null,!0),i}),(n=>(IP(e,"get for query "+oo(t)+" failed: "+n),Promise.reject(new Error(n)))))}(e._repo,e,n).then((t=>new JP(t,new YP(e._repo,e._path),e._queryParams.getIndex())))}class rR{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new BP("value",this,new JP(e.snapshotNode,new YP(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new zP(this,e,t):null}matches(e){return e instanceof rR&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class iR{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new zP(this,e,t):null}createEvent(e,t){Rs(null!=e.childName,"Child events should have a childName.");const n=ZP(new YP(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new BP(e.type,this,new JP(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof iR&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))}hasAnyCallback(){return!!this.callbackContext}}function sR(e,t,n,r,i){let s;if("object"===typeof r&&(s=void 0,i=r),"function"===typeof r&&(s=r),i&&i.onlyOnce){const t=n,r=(n,r)=>{CP(e._repo,e,a),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const o=new qP(n,s||void 0),a="value"===t?new rR(o):new iR(t,o);return function(e,t,n){let r;r=".info"===PT(t._path)?gN(e.infoSyncTree_,t,n):gN(e.serverSyncTree_,t,n),lP(e.eventQueue_,t._path,r)}(e._repo,e,a),()=>CP(e._repo,e,a)}function oR(e,t,n,r){return sR(e,"value",t,n,r)}function aR(e,t,n,r){return sR(e,"child_added",t,n,r)}function lR(e,t,n,r){return sR(e,"child_changed",t,n,r)}function cR(e,t,n,r){return sR(e,"child_moved",t,n,r)}function uR(e,t,n,r){return sR(e,"child_removed",t,n,r)}function hR(e,t,n){let r=null;const i=n?new qP(n):null;"value"===t?r=new rR(i):t&&(r=new iR(t,i)),CP(e._repo,e,r)}class dR{}class fR extends dR{constructor(e,t){super(),this._value=e,this._key=t,this.type="endAt"}_apply(e){XN("endAt",this._value,e._path,!0);const t=Dx(e._queryParams,this._value,this._key);if(QP(t),GP(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new KP(e._repo,e._path,t,e._orderByCalled)}}class pR extends dR{constructor(e,t){super(),this._value=e,this._key=t,this.type="endBefore"}_apply(e){XN("endBefore",this._value,e._path,!1);const t=function(e,t,n){let r;return r=e.index_===ZT||n?Dx(e,t,n):Dx(e,t,KI),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(QP(t),GP(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new KP(e._repo,e._path,t,e._orderByCalled)}}class mR extends dR{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAt"}_apply(e){XN("startAt",this._value,e._path,!0);const t=Ox(e._queryParams,this._value,this._key);if(QP(t),GP(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new KP(e._repo,e._path,t,e._orderByCalled)}}class gR extends dR{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAfter"}_apply(e){XN("startAfter",this._value,e._path,!1);const t=function(e,t,n){let r;return r=e.index_===ZT||n?Ox(e,t,n):Ox(e,t,HI),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(QP(t),GP(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new KP(e._repo,e._path,t,e._orderByCalled)}}class yR extends dR{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new KP(e._repo,e._path,function(e,t){const n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}class vR extends dR{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new KP(e._repo,e._path,function(e,t){const n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}class _R extends dR{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){HP(e,"orderByChild");const t=new AT(this._path);if(UT(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const n=new Ex(t),r=Lx(e._queryParams,n);return GP(r),new KP(e._repo,e._path,r,!0)}}class wR extends dR{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){HP(e,"orderByKey");const t=Lx(e._queryParams,ZT);return GP(t),new KP(e._repo,e._path,t,!0)}}class bR extends dR{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){HP(e,"orderByPriority");const t=Lx(e._queryParams,dx);return GP(t),new KP(e._repo,e._path,t,!0)}}class SR extends dR{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){HP(e,"orderByValue");const t=Lx(e._queryParams,Cx);return GP(t),new KP(e._repo,e._path,t,!0)}}class ER extends dR{constructor(e,t){super(),this._value=e,this._key=t,this.type="equalTo"}_apply(e){if(XN("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new fR(this._value,this._key)._apply(new mR(this._value,this._key)._apply(e))}}function CR(e){let t=To(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(const s of r)t=s._apply(t);return t}!function(e){Rs(!YA,"__referenceConstructor has already been defined"),YA=e}(YP),function(e){Rs(!JA,"__referenceConstructor has already been defined"),JA=e}(YP);const kR={};let IR=!1;function TR(e,t,n,r,i){let s=r||e.options.databaseURL;void 0===s&&(e.options.projectId||zI("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),jI("Using default host for project ",e.options.projectId),s="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));let o,a,l=FP(s,i),c=l.repoInfo;"undefined"!==typeof process&&(a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),a?(o=!0,s="http://".concat(a,"?ns=").concat(c.namespace),l=FP(s,i),c=l.repoInfo):o=!l.repoInfo.secure;const u=i&&o?new oT(oT.OWNER):new sT(e.name,e.options,t);sP("Invalid Firebase Database URL",l),UT(l.path)||zI("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function(e,t,n,r){let i=kR[t.name];i||(i={},kR[t.name]=i);let s=i[e.toURLString()];s&&zI("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return s=new fP(e,IR,n,r),i[e.toURLString()]=s,s}(c,e,u,new iT(e.name,n));return new xR(h,e)}class xR{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(pP(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new YP(this._repo,NT())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=kR[t];n&&n[e.key]===e||zI("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),kP(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&zI("Cannot call "+e+" on a deleted database.")}}function AR(){CT.IS_TRANSPORT_INITIALIZED&&qI("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function NR(){AR(),wT.forceDisallow()}function PR(){AR(),ET.forceDisallow(),wT.forceAllow()}function RR(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=To(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&zI("Cannot call useEmulator() after instance has already been initialized.");const i=e._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&zI('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new oT(oT.OWNER);else if(r.mockUserToken){const t="string"===typeof r.mockUserToken?r.mockUserToken:Ks(r.mockUserToken,e.app.options.projectId);s=new oT(t)}!function(e,t,n,r){e.repoInfo_=new dT("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,s)}function OR(e){var t;(e=To(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(dP)}function DR(e,t){UI(e,t)}const LR={".sv":"timestamp"};class MR{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function FR(e,t,n){var r;if(e=To(e),iP("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";const i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,s=new Ws,o=oR(e,(()=>{}));return function(e,t,n,r,i,s){IP(e,"transaction on "+t);const o={path:t,update:n,onComplete:r,status:null,order:OI(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=xP(e,t,void 0);o.currentInputSnapshot=a;const l=o.update(a.val());if(void 0===l)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{ZN("transaction failed: Data returned ",l,o.path),o.status=0;const n=UN(e.transactionQueueTree_,t),r=jN(n)||[];let i;r.push(o),VN(n,r),"object"===typeof l&&null!==l&&lo(l,".priority")?(i=co(l,".priority"),Rs($N(i),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):i=(yN(e.serverSyncTree_,t)||wx.EMPTY_NODE).getPriority().val();const s=gP(e),c=Sx(l,i),u=LN(c,a,s);o.currentOutputSnapshotRaw=c,o.currentOutputSnapshotResolved=u,o.currentWriteId=wP(e);const h=uN(e.serverSyncTree_,t,u,o.currentWriteId,o.applyLocally);cP(e.eventQueue_,t,h),AP(e,e.transactionQueueTree_)}}(e._repo,e._path,t,((t,n,r)=>{let i=null;t?s.reject(t):(i=new JP(r,new YP(e._repo,e._path),dx),s.resolve(new MR(n,i)))}),o,i),s.promise}QT.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},QT.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){II(Qa),ja(new xo("database",((e,t)=>{let{instanceIdentifier:n}=t;return TR(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),el(EI,CI,e),el(EI,CI,"esm2017")}();const UR=new jo("@firebase/database-compat"),jR=function(e){const t="FIREBASE WARNING: "+e;UR.warn(t)};class VR{constructor(e){this._delegate=e}cancel(e){So("OnDisconnect.cancel",0,1,arguments.length),Co("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then((()=>e(null)),(t=>e(t))),t}remove(e){So("OnDisconnect.remove",0,1,arguments.length),Co("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then((()=>e(null)),(t=>e(t))),t}set(e,t){So("OnDisconnect.set",1,2,arguments.length),Co("OnDisconnect.set","onComplete",t,!0);const n=this._delegate.set(e);return t&&n.then((()=>t(null)),(e=>t(e))),n}setWithPriority(e,t,n){So("OnDisconnect.setWithPriority",2,3,arguments.length),Co("OnDisconnect.setWithPriority","onComplete",n,!0);const r=this._delegate.setWithPriority(e,t);return n&&r.then((()=>n(null)),(e=>n(e))),r}update(e,t){if(So("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const t={};for(let n=0;n<e.length;++n)t[""+n]=e[n];e=t,jR("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Co("OnDisconnect.update","onComplete",t,!0);const n=this._delegate.update(e);return t&&n.then((()=>t(null)),(e=>t(e))),n}}class BR{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return So("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class zR{constructor(e,t){this._database=e,this._delegate=t}val(){return So("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return So("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return So("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return So("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return So("DataSnapshot.child",0,1,arguments.length),e=String(e),rP("DataSnapshot.child","path",e,!1),new zR(this._database,this._delegate.child(e))}hasChild(e){return So("DataSnapshot.hasChild",1,1,arguments.length),rP("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return So("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return So("DataSnapshot.forEach",1,1,arguments.length),Co("DataSnapshot.forEach","action",e,!1),this._delegate.forEach((t=>e(new zR(this._database,t))))}hasChildren(){return So("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return So("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return So("DataSnapshot.ref",0,0,arguments.length),new WR(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class qR{constructor(e,t){this.database=e,this._delegate=t}on(e,t,n,r){var i;So("Query.on",2,4,arguments.length),Co("Query.on","callback",t,!1);const s=qR.getCancelAndContextArgs_("Query.on",n,r),o=(e,n)=>{t.call(s.context,new zR(this.database,e),n)};o.userCallback=t,o.context=s.context;const a=null===(i=s.cancel)||void 0===i?void 0:i.bind(s.context);switch(e){case"value":return oR(this._delegate,o,a),t;case"child_added":return aR(this._delegate,o,a),t;case"child_removed":return uR(this._delegate,o,a),t;case"child_changed":return lR(this._delegate,o,a),t;case"child_moved":return cR(this._delegate,o,a),t;default:throw new Error(Eo("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,n){if(So("Query.off",0,3,arguments.length),function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Eo(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}("Query.off",e,!0),Co("Query.off","callback",t,!0),ko("Query.off","context",n,!0),t){const r=()=>{};r.userCallback=t,r.context=n,hR(this._delegate,e,r)}else hR(this._delegate,e)}get(){return nR(this._delegate).then((e=>new zR(this.database,e)))}once(e,t,n,r){So("Query.once",1,4,arguments.length),Co("Query.once","callback",t,!0);const i=qR.getCancelAndContextArgs_("Query.once",n,r),s=new Ws,o=(e,n)=>{const r=new zR(this.database,e);t&&t.call(i.context,r,n),s.resolve(r)};o.userCallback=t,o.context=i.context;const a=e=>{i.cancel&&i.cancel.call(i.context,e),s.reject(e)};switch(e){case"value":oR(this._delegate,o,a,{onlyOnce:!0});break;case"child_added":aR(this._delegate,o,a,{onlyOnce:!0});break;case"child_removed":uR(this._delegate,o,a,{onlyOnce:!0});break;case"child_changed":lR(this._delegate,o,a,{onlyOnce:!0});break;case"child_moved":cR(this._delegate,o,a,{onlyOnce:!0});break;default:throw new Error(Eo("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}limitToFirst(e){return So("Query.limitToFirst",1,1,arguments.length),new qR(this.database,CR(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new yR(e)}(e)))}limitToLast(e){return So("Query.limitToLast",1,1,arguments.length),new qR(this.database,CR(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new vR(e)}(e)))}orderByChild(e){return So("Query.orderByChild",1,1,arguments.length),new qR(this.database,CR(this._delegate,function(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return rP("orderByChild","path",e,!1),new _R(e)}(e)))}orderByKey(){return So("Query.orderByKey",0,0,arguments.length),new qR(this.database,CR(this._delegate,new wR))}orderByPriority(){return So("Query.orderByPriority",0,0,arguments.length),new qR(this.database,CR(this._delegate,new bR))}orderByValue(){return So("Query.orderByValue",0,0,arguments.length),new qR(this.database,CR(this._delegate,new SR))}startAt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return So("Query.startAt",0,2,arguments.length),new qR(this.database,CR(this._delegate,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return nP("startAt","key",t,!0),new mR(e,t)}(e,t)))}startAfter(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return So("Query.startAfter",0,2,arguments.length),new qR(this.database,CR(this._delegate,function(e,t){return nP("startAfter","key",t,!0),new gR(e,t)}(e,t)))}endAt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return So("Query.endAt",0,2,arguments.length),new qR(this.database,CR(this._delegate,function(e,t){return nP("endAt","key",t,!0),new fR(e,t)}(e,t)))}endBefore(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return So("Query.endBefore",0,2,arguments.length),new qR(this.database,CR(this._delegate,function(e,t){return nP("endBefore","key",t,!0),new pR(e,t)}(e,t)))}equalTo(e,t){return So("Query.equalTo",1,2,arguments.length),new qR(this.database,CR(this._delegate,function(e,t){return nP("equalTo","key",t,!0),new ER(e,t)}(e,t)))}toString(){return So("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return So("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(So("Query.isEqual",1,1,arguments.length),!(e instanceof qR)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,n){const r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,Co(e,"cancel",r.cancel,!0),r.context=n,ko(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(Eo(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}get ref(){return new WR(this.database,new YP(this._delegate._repo,this._delegate._path))}}class WR extends qR{constructor(e,t){super(e,new KP(t._repo,t._path,new Rx,!1)),this.database=e,this._delegate=t}getKey(){return So("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return So("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new WR(this.database,ZP(this._delegate,e))}getParent(){So("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new WR(this.database,e):null}getRoot(){return So("Reference.root",0,0,arguments.length),new WR(this.database,this._delegate.root)}set(e,t){So("Reference.set",1,2,arguments.length),Co("Reference.set","onComplete",t,!0);const n=eR(this._delegate,e);return t&&n.then((()=>t(null)),(e=>t(e))),n}update(e,t){if(So("Reference.update",1,2,arguments.length),Array.isArray(e)){const t={};for(let n=0;n<e.length;++n)t[""+n]=e[n];e=t,jR("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}iP("Reference.update",this._delegate._path),Co("Reference.update","onComplete",t,!0);const n=tR(this._delegate,e);return t&&n.then((()=>t(null)),(e=>t(e))),n}setWithPriority(e,t,n){So("Reference.setWithPriority",2,3,arguments.length),Co("Reference.setWithPriority","onComplete",n,!0);const r=function(e,t,n){if(iP("setWithPriority",e._path),XN("setWithPriority",t,e._path,!1),tP("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";const r=new Ws;return bP(e._repo,e._path,t,n,r.wrapCallback((()=>{}))),r.promise}(this._delegate,e,t);return n&&r.then((()=>n(null)),(e=>n(e))),r}remove(e){So("Reference.remove",0,1,arguments.length),Co("Reference.remove","onComplete",e,!0);const t=function(e){return iP("remove",e._path),eR(e,null)}(this._delegate);return e&&t.then((()=>e(null)),(t=>e(t))),t}transaction(e,t,n){So("Reference.transaction",1,3,arguments.length),Co("Reference.transaction","transactionUpdate",e,!1),Co("Reference.transaction","onComplete",t,!0),function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(Eo(e,t)+"must be a boolean.")}("Reference.transaction","applyLocally",n,!0);const r=FR(this._delegate,e,{applyLocally:n}).then((e=>new BR(e.committed,new zR(this.database,e.snapshot))));return t&&r.then((e=>t(null,e.committed,e.snapshot)),(e=>t(e,!1,null))),r}setPriority(e,t){So("Reference.setPriority",1,2,arguments.length),Co("Reference.setPriority","onComplete",t,!0);const n=function(e,t){e=To(e),iP("setPriority",e._path),tP("setPriority",t,!1);const n=new Ws;return bP(e._repo,FT(e._path,".priority"),t,null,n.wrapCallback((()=>{}))),n.promise}(this._delegate,e);return t&&n.then((()=>t(null)),(e=>t(e))),n}push(e,t){So("Reference.push",0,2,arguments.length),Co("Reference.push","onComplete",t,!0);const n=function(e,t){e=To(e),iP("push",e._path),XN("push",t,e._path,!0);const n=mP(e._repo),r=VP(n),i=ZP(e,r),s=ZP(e,r);let o;return o=null!=t?eR(s,t).then((()=>s)):Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}(this._delegate,e),r=n.then((e=>new WR(this.database,e)));t&&r.then((()=>t(null)),(e=>t(e)));const i=new WR(this.database,n);return i.then=r.then.bind(r),i.catch=r.catch.bind(r,void 0),i}onDisconnect(){return iP("Reference.onDisconnect",this._delegate._path),new VR(new WP(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class KR{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:NR,forceLongPolling:PR}}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};RR(this._delegate,e,t,n)}ref(e){if(So("database.ref",0,1,arguments.length),e instanceof WR){const t=XP(this._delegate,e.toString());return new WR(this,t)}{const t=$P(this._delegate,e);return new WR(this,t)}}refFromURL(e){So("database.refFromURL",1,1,arguments.length);const t=XP(this._delegate,e);return new WR(this,t)}goOffline(){return So("database.goOffline",0,0,arguments.length),function(e){(e=To(e))._checkNotDeleted("goOffline"),kP(e._repo)}(this._delegate)}goOnline(){return So("database.goOnline",0,0,arguments.length),OR(this._delegate)}}KR.ServerValue={TIMESTAMP:LR,increment:e=>function(e){return{".sv":{increment:e}}}(e)};var HR=Object.freeze({__proto__:null,initStandalone:function(e){let{app:t,url:n,version:r,customAuthImpl:i,customAppCheckImpl:s,namespace:o,nodeAdmin:a=!1}=e;II(r);const l=new Ro("database-standalone"),c=new No("auth-internal",l);let u;return c.setComponent(new xo("auth-internal",(()=>i),"PRIVATE")),s&&(u=new No("app-check-internal",l),u.setComponent(new xo("app-check-internal",(()=>s),"PRIVATE"))),{instance:new KR(TR(t,c,u,n,a),t),namespace:o}}});const GR=KR.ServerValue;!function(e){e.INTERNAL.registerComponent(new xo("database-compat",((e,t)=>{let{instanceIdentifier:n}=t;const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new KR(i,r)}),"PUBLIC").setServiceProps({Reference:WR,Query:qR,Database:KR,DataSnapshot:zR,enableLogging:DR,INTERNAL:HR,ServerValue:GR}).setMultipleInstances(!0)),e.registerVersion("@firebase/database-compat","2.0.1")}(yl);yl.initializeApp({apiKey:"AIzaSyB85Z9_uI5uExZVlqDRoK3lvrqLZ5Qlnew",authDomain:"challenge-cef04.firebaseapp.com",projectId:"challenge-cef04",storageBucket:"challenge-cef04.firebasestorage.app",messagingSenderId:"516556868203",appId:"1:516556868203:web:43cab9fc9e555bc9baff2e",measurementId:"G-9H4CNCJP7Z"}).firestore();const QR=yl.auth();const YR=function(){const[{cart:e,user:t},n]=xs();return(0,Ur.jsxs)("div",{className:"header",children:[(0,Ur.jsx)(Es,{to:"/",children:(0,Ur.jsx)("img",{className:"header__logo",src:"https://pngimg.com/uploads/amazon/amazon_PNG11.png",alt:"isidhid"})}),(0,Ur.jsxs)("div",{className:"header__search",children:[(0,Ur.jsx)("input",{className:"header__searchInput",type:"text"}),(0,Ur.jsx)($r,{className:"header__searchIcon"})]}),(0,Ur.jsxs)("div",{className:"header__nav",children:[(0,Ur.jsx)(Es,{to:!t&&"/login",children:(0,Ur.jsxs)("div",{onClick:()=>{t&&QR.signOut()},className:"header__option",children:[(0,Ur.jsxs)("span",{className:"header__optionLineOne",children:["Hello ",t?t.email:"Guest"]}),(0,Ur.jsx)("span",{className:"header__optionLineTwo",children:t?"Sign Out":"Sign In"})]})}),(0,Ur.jsxs)("div",{className:"header__option",children:[(0,Ur.jsx)("span",{className:"header__optionLineOne",children:"Returns"}),(0,Ur.jsx)("span",{className:"header__optionLineTwo",children:"& Orders"})]}),(0,Ur.jsxs)("div",{className:"header__option",children:[(0,Ur.jsx)("span",{className:"header__optionLineOne",children:"Your"}),(0,Ur.jsx)("span",{className:"header__optionLineTwo",children:"Prime"})]}),(0,Ur.jsx)(Es,{to:"/checkout",children:(0,Ur.jsxs)("div",{className:"header__optionCart",children:[(0,Ur.jsx)(Xr,{}),(0,Ur.jsx)("span",{className:"header__optionLineTwo header__CartCount",children:null===e||void 0===e?void 0:e.length})]})})]})]})};const JR=function(e){let{id:t,title:n,image:r,price:i,rating:s}=e;const[{cart:o},a]=xs();return(0,Ur.jsxs)("div",{className:"product",children:[(0,Ur.jsxs)("div",{className:"product__info",children:[(0,Ur.jsx)("p",{children:n}),(0,Ur.jsxs)("p",{className:"product__price",children:[(0,Ur.jsx)("small",{children:"\u20b9"}),(0,Ur.jsx)("strong",{children:i})]}),(0,Ur.jsx)("div",{className:"product__rating",children:Array(s).fill().map(((e,t)=>(0,Ur.jsx)("p",{children:"\u2b50"})))})]}),(0,Ur.jsx)("img",{src:r,alt:"suchitaa"}),(0,Ur.jsx)("button",{onClick:()=>{a({type:"ADD_TO_CART",item:{id:t,title:n,image:r,price:i,rating:s}})},children:"Add to Cart"})]})};const $R=function(){return(0,Ur.jsx)("div",{className:"home",children:(0,Ur.jsxs)("div",{className:"home__container",children:[(0,Ur.jsx)("img",{className:"home__image",src:"https://images-eu.ssl-images-amazon.com/images/G/02/digital/video/merch2016/Hero/Covid19/Generic/GWBleedingHero_ENG_COVIDUPDATE__XSite_1500x600_PV_en-GB._CB428684220_.jpg",alt:""}),(0,Ur.jsxs)("div",{className:"home__row",children:[(0,Ur.jsx)(JR,{id:"1231341",title:"The Lean Startup: How Constant Innovation Creates Radically successful Businesses Paperback",price:450.99,image:"https://www.globalorange.nl/wp-content/uploads/2022/09/booktip_lean-startup-eric-ries_NEW.png",rating:4}),(0,Ur.jsx)(JR,{id:"49538094",title:"Kenwood kMix Stand Mixer with Baking, Stylish Kitchen Mixer with K-beater, Dough Hook and Whisk, 5 Litre Glass Bowl",price:31000.99,image:"https://m.media-amazon.com/images/I/310emBhITrL._SY300_SX300_QL70_FMwebp_.jpg",rating:4})]}),(0,Ur.jsxs)("div",{className:"home__row",children:[(0,Ur.jsx)(JR,{title:"Samsung LC49RG90SSUXEN 49' Curved LED Gaming Monitor",price:70000.99,image:"https://m.media-amazon.com/images/I/41MNtotCCRL._SX466_.jpg",rating:4}),(0,Ur.jsx)(JR,{title:"Amazon Echo (3rd generation) | Smart speaker with Alexa, Charcoal Fabric",price:5000.99,image:"https://m.media-amazon.com/images/I/71xaI+n5CSL._SX679_.jpg",rating:3}),(0,Ur.jsx)(JR,{title:"New Apple iPad Pro (12.9-inch, Wi-Fi, 128GB) - Silver (4th Generation)",price:33490.99,image:"https://m.media-amazon.com/images/I/61uA2UVnYWL._SL1500_.jpg",rating:5})]}),(0,Ur.jsxs)("div",{className:"home__row",children:[(0,Ur.jsx)(JR,{title:"Samsung LC49RG90SSUXEN 49' Curved LED Gaming Monitor",price:33490.99,image:"https://images-na.ssl-images-amazon.com/images/I/6125mFrzr6L._AC_SX355_.jpg",rating:4}),(0,Ur.jsx)("image",{width:"300%"})]})]})})};function XR(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}var ZR;function eO(){}function tO(e){return!!(e||"").match(/\d/)}function nO(e){return null===e||void 0===e}function rO(e){return nO(e)||function(e){return"number"===typeof e&&isNaN(e)}(e)||"number"===typeof e&&!isFinite(e)}function iO(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function sO(e,t){void 0===t&&(t=!0);var n="-"===e[0],r=n&&t,i=(e=e.replace("-","")).split(".");return{beforeDecimal:i[0],afterDecimal:i[1]||"",hasNegation:n,addNegation:r}}function oO(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}function aO(e,t){return Array(t+1).join(e)}function lO(e){var t=e+"",n="-"===t[0]?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],s=r[1];if(!(s=Number(s)))return n+i;var o=1+s,a=(i=i.replace(".","")).length;return o<0?i="0."+aO("0",Math.abs(o))+i:o>=a?i+=aO("0",o-a):i=(i.substring(0,o)||"0")+"."+i.substring(o),n+i}function cO(e,t,n){if(-1!==["","-"].indexOf(e))return e;var r=(-1!==e.indexOf(".")||n)&&t,i=sO(e),s=i.beforeDecimal,o=i.afterDecimal,a=i.hasNegation,l=parseFloat("0."+(o||"0")),c=(o.length<=t?"0."+o:l.toFixed(t)).split("."),u=s;return s&&Number(c[0])&&(u=s.split("").reverse().reduce((function(e,t,n){return e.length>n?(Number(e[0])+Number(t)).toString()+e.substring(1,e.length):t+e}),c[0])),""+(a?"-":"")+u+(r?".":"")+oO(c[1]||"",t,n)}function uO(e,t){if(e.value=e.value,null!==e){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||0===e.selectionStart?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}!function(e){e.event="event",e.props="prop"}(ZR||(ZR={}));var hO=function(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every((function(e,n){return e===t[n]}))?n:(t=r,n=e.apply(void 0,r))}}((function(e,t){for(var n=0,r=0,i=e.length,s=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[s-1-r]&&s-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:s-r}}}));function dO(e){return Math.max(e.selectionStart,e.selectionEnd)}function fO(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function pO(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function mO(e,t,n,r){var i,s,o,a=e.length;if(i=t,s=0,o=a,t=Math.min(Math.max(i,s),o),"left"===r){for(;t>=0&&!n[t];)t--;-1===t&&(t=n.indexOf(!0))}else{for(;t<=a&&!n[t];)t++;t>a&&(t=n.lastIndexOf(!0))}return-1===t&&(t=a),t}function gO(e){for(var t=Array.from({length:e.length+1}).map((function(){return!0})),n=0,r=t.length;n<r;n++)t[n]=Boolean(tO(e[n])||tO(e[n-1]));return t}function yO(e,t,n,i,s,o){void 0===o&&(o=eO);var a=function(e){var t=(0,r.useRef)(e);t.current=e;var n=(0,r.useRef)((function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return t.current.apply(t,e)}));return n.current}((function(e,t){var n,r;return rO(e)?(r="",n=""):"number"===typeof e||t?(r="number"===typeof e?lO(e):e,n=i(r)):(r=s(e,void 0),n=i(r)),{formattedValue:n,numAsString:r}})),l=(0,r.useState)((function(){return a(nO(e)?t:e,n)})),c=l[0],u=l[1],h=e,d=n;nO(e)&&(h=c.numAsString,d=!0);var f=a(h,d);return(0,r.useMemo)((function(){u(f)}),[f.formattedValue]),[c,function(e,t){e.formattedValue!==c.formattedValue&&u({formattedValue:e.formattedValue,numAsString:e.value}),o(e,t)}]}function vO(e){return e.replace(/[^0-9]/g,"")}function _O(e){return e}function wO(e){var t=e.type;void 0===t&&(t="text");var n=e.displayType;void 0===n&&(n="input");var i=e.customInput,s=e.renderText,o=e.getInputRef,a=e.format;void 0===a&&(a=_O);var l=e.removeFormatting;void 0===l&&(l=vO);var c=e.defaultValue,u=e.valueIsNumericString,h=e.onValueChange,d=e.isAllowed,f=e.onChange;void 0===f&&(f=eO);var p=e.onKeyDown;void 0===p&&(p=eO);var m=e.onMouseUp;void 0===m&&(m=eO);var g=e.onFocus;void 0===g&&(g=eO);var y=e.onBlur;void 0===y&&(y=eO);var v=e.value,_=e.getCaretBoundary;void 0===_&&(_=gO);var w=e.isValidInputCharacter;void 0===w&&(w=tO);var b=e.isCharacterSame,S=XR(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),E=yO(v,c,Boolean(u),a,l,h),C=E[0],k=C.formattedValue,I=C.numAsString,T=E[1],x=(0,r.useRef)(),A=(0,r.useRef)({formattedValue:k,numAsString:I}),N=function(e,t){A.current={formattedValue:e.formattedValue,numAsString:e.value},T(e,t)},P=(0,r.useState)(!1),R=P[0],O=P[1],D=(0,r.useRef)(null),L=(0,r.useRef)({setCaretTimeout:null,focusTimeout:null});(0,r.useEffect)((function(){return O(!0),function(){clearTimeout(L.current.setCaretTimeout),clearTimeout(L.current.focusTimeout)}}),[]);var M=a,F=function(e,t){var n=parseFloat(t);return{formattedValue:e,value:t,floatValue:isNaN(n)?void 0:n}},U=function(e,t,n){0===e.selectionStart&&e.selectionEnd===e.value.length||(uO(e,t),L.current.setCaretTimeout=setTimeout((function(){e.value===n&&e.selectionStart!==t&&uO(e,t)}),0))},j=function(e,t,n){return mO(e,t,_(e),n)},V=function(e,t,n){var r=_(t),i=function(e,t,n,r,i,s,o){void 0===o&&(o=pO);var a=i.findIndex((function(e){return e})),l=e.slice(0,a);t||n.startsWith(l)||(t=l,n=l+n,r+=l.length);for(var c=n.length,u=e.length,h={},d=new Array(c),f=0;f<c;f++){d[f]=-1;for(var p=0,m=u;p<m;p++)if(o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:f,formattedValueIndex:p})&&!0!==h[p]){d[f]=p,h[p]=!0;break}}for(var g=r;g<c&&(-1===d[g]||!s(n[g]));)g++;var y=g===c||-1===d[g]?u:d[g];for(g=r-1;g>0&&-1===d[g];)g--;var v=-1===g||-1===d[g]?0:d[g]+1;return v>y?y:r-v<y-r?v:y}(t,k,e,n,r,w,b);return i=mO(t,i,r)};(0,r.useEffect)((function(){var e=A.current,t=e.formattedValue,n=e.numAsString;k===t&&I===n||N(F(k,I),{event:void 0,source:ZR.props})}),[k,I]);var B=D.current?dO(D.current):void 0;("undefined"!==typeof window?r.useLayoutEffect:r.useEffect)((function(){var e=D.current;if(k!==A.current.formattedValue&&e){var t=V(A.current.formattedValue,k,B);e.value=k,U(e,t,k)}}),[k]);var z=function(e,t,n){var r=t.target,i=x.current?function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}}(x.current,r.selectionEnd):hO(k,e),s=Object.assign(Object.assign({},i),{lastValue:k}),o=l(e,s),a=M(o);if(o=l(a,void 0),d&&!d(F(a,o))){var c=t.target,u=dO(c),h=V(e,k,u);return c.value=k,U(c,h,k),!1}return function(e){var t=e.formattedValue;void 0===t&&(t="");var n,r=e.input,i=e.source,s=e.event,o=e.numAsString;if(r){var a=e.inputValue||r.value,l=dO(r);r.value=t,void 0!==(n=V(a,t,l))&&U(r,n,t)}t!==k&&N(F(t,o),{event:s,source:i})}({formattedValue:a,numAsString:o,inputValue:e,event:t,source:n,input:t.target}),!0},q=function(e,t){void 0===t&&(t=0);var n=e.selectionStart,r=e.selectionEnd;x.current={selectionStart:n,selectionEnd:r+t}},W=!R||"undefined"===typeof navigator||navigator.platform&&/iPhone|iPod/.test(navigator.platform)?void 0:"numeric",K=Object.assign({inputMode:W},S,{type:t,value:k,onChange:function(e){var t=e.target.value;z(t,e,ZR.event)&&f(e),x.current=void 0},onKeyDown:function(e){var t,n=e.target,r=e.key,i=n.selectionStart,s=n.selectionEnd,o=n.value;void 0===o&&(o=""),"ArrowLeft"===r||"Backspace"===r?t=Math.max(i-1,0):"ArrowRight"===r?t=Math.min(i+1,o.length):"Delete"===r&&(t=i);var a=0;"Delete"===r&&i===s&&(a=1);var l="ArrowLeft"===r||"ArrowRight"===r;if(void 0===t||i!==s&&!l)return p(e),void q(n,a);var c=t;l?(c=j(o,t,"ArrowLeft"===r?"left":"right"))!==t&&e.preventDefault():"Delete"!==r||w(o[t])?"Backspace"!==r||w(o[t])||(c=j(o,t,"left")):c=j(o,t,"right");c!==t&&U(n,c,o),p(e),q(n,a)},onMouseUp:function(e){var t=e.target,n=function(){var e=t.selectionStart,n=t.selectionEnd,r=t.value;if(void 0===r&&(r=""),e===n){var i=j(r,e);i!==e&&U(t,i,r)}};n(),requestAnimationFrame((function(){n()})),m(e),q(t)},onFocus:function(e){e.persist&&e.persist();var t=e.target,n=e.currentTarget;D.current=t,L.current.focusTimeout=setTimeout((function(){var r=t.selectionStart,i=t.selectionEnd,s=t.value;void 0===s&&(s="");var o=j(s,r);o===r||0===r&&i===s.length||U(t,o,s),g(Object.assign(Object.assign({},e),{currentTarget:n}))}),0)},onBlur:function(e){D.current=null,clearTimeout(L.current.focusTimeout),clearTimeout(L.current.setCaretTimeout),y(e)}});if("text"===n)return s?r.createElement(r.Fragment,null,s(k,S)||null):r.createElement("span",Object.assign({},S,{ref:o}),k);if(i){var H=i;return r.createElement(H,Object.assign({},K,{ref:o}))}return r.createElement("input",Object.assign({},K,{ref:o}))}function bO(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;void 0===i&&(i="");var s=t.suffix;void 0===s&&(s="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(void 0===a&&(a="thousand"),""===e||"-"===e)return e;var l=SO(t),c=l.thousandSeparator,u=l.decimalSeparator,h=0!==n&&-1!==e.indexOf(".")||n&&r,d=sO(e,o),f=d.beforeDecimal,p=d.afterDecimal,m=d.addNegation;return void 0!==n&&(p=oO(p,n,!!r)),c&&(f=function(e,t,n){var r=function(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;default:return/(\d)(?=(\d{3})+(?!\d))/g}}(n),i=e.search(/[1-9]/);return i=-1===i?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}(f,c,a)),i&&(f=i+f),s&&(p+=s),m&&(f="-"+f),e=f+(h&&u||"")+p}function SO(e){var t=e.decimalSeparator;void 0===t&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return!0===n&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function EO(e,t,n){var r;void 0===t&&(t=fO(e));var i=n.allowNegative,s=n.prefix;void 0===s&&(s="");var o=n.suffix;void 0===o&&(o="");var a=n.decimalScale,l=t.from,c=t.to,u=c.start,h=c.end,d=SO(n),f=d.allowedDecimalSeparators,p=d.decimalSeparator,m=e[h]===p;if(tO(e)&&(e===s||e===o)&&""===t.lastValue)return e;if(h-u===1&&-1!==f.indexOf(e[u])){var g=0===a?"":p;e=e.substring(0,u)+g+e.substring(u+1,e.length)}var y=function(e,t,n){var r=!1,i=!1;s.startsWith("-")?r=!1:e.startsWith("--")?(r=!1,i=!0):o.startsWith("-")&&e.length===o.length?r=!1:"-"===e[0]&&(r=!0);var a=r?1:0;return i&&(a=2),a&&(e=e.substring(a),t-=a,n-=a),{value:e,start:t,end:n,hasNegation:r}},v=y(e,u,h),_=v.hasNegation;e=(r=v).value,u=r.start,h=r.end;var w=y(t.lastValue,l.start,l.end),b=w.start,S=w.end,E=w.value,C=e.substring(u,h);!(e.length&&E.length&&(b>E.length-o.length||S<s.length))||C&&o.startsWith(C)||(e=E);var k=0;e.startsWith(s)?k+=s.length:u<s.length&&(k=u),h-=k;var I=(e=e.substring(k)).length,T=e.length-o.length;e.endsWith(o)?I=T:(h>T||h>e.length-o.length)&&(I=h),e=e.substring(0,I),e=function(e,t){void 0===e&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}(_?"-"+e:e,i),e=(e.match(function(e,t){return new RegExp("(^-)|[0-9]|"+iO(e),t?"g":void 0)}(p,!0))||[]).join("");var x=e.indexOf(p),A=sO(e=e.replace(new RegExp(iO(p),"g"),(function(e,t){return t===x?".":""})),i),N=A.beforeDecimal,P=A.afterDecimal,R=A.addNegation;return c.end-c.start<l.end-l.start&&""===N&&m&&!parseFloat(P)&&(e=R?"-":""),e}function CO(e){e=function(e){var t=SO(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;void 0===i&&(i="");var s=e.allowNegative;if(void 0===s&&(s=!0),n===r)throw new Error("\n        Decimal separator can't be same as thousand separator.\n        thousandSeparator: "+n+' (thousandSeparator = {true} is same as thousandSeparator = ",")\n        decimalSeparator: '+r+" (default value for decimalSeparator is .)\n     ");return i.startsWith("-")&&s&&(console.error("\n      Prefix can't start with '-' when allowNegative is true.\n      prefix: "+i+"\n      allowNegative: "+s+"\n    "),s=!1),Object.assign(Object.assign({},e),{allowNegative:s})}(e);e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;void 0===i&&(i=eO);var s=e.onBlur;void 0===s&&(s=eO);var o=e.thousandSeparator,a=e.decimalScale,l=e.fixedDecimalScale,c=e.prefix;void 0===c&&(c="");var u=e.defaultValue,h=e.value,d=e.valueIsNumericString,f=e.onValueChange,p=XR(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),m=SO(e),g=m.decimalSeparator,y=m.allowedDecimalSeparators,v=function(t){return bO(t,e)},_=function(t,n){return EO(t,n,e)},w=nO(h)?u:h,b=null!==d&&void 0!==d?d:function(e,t,n){return""===e||!(null===t||void 0===t?void 0:t.match(/\d/))&&!(null===n||void 0===n?void 0:n.match(/\d/))&&"string"===typeof e&&!isNaN(Number(e))}(w,c,t);nO(h)?nO(u)||(b=b||"number"===typeof u):b=b||"number"===typeof h;var S=function(e){return rO(e)?e:("number"===typeof e&&(e=lO(e)),b&&"number"===typeof a?cO(e,a,Boolean(l)):e)},E=yO(S(h),S(u),Boolean(b),v,_,f),C=E[0],k=C.numAsString,I=C.formattedValue,T=E[1];return Object.assign(Object.assign({},p),{value:I,valueIsNumericString:!1,isValidInputCharacter:function(e){return e===g||tO(e)},isCharacterSame:function(e){var t=e.currentValue,n=e.lastValue,r=e.formattedValue,i=e.currentValueIndex,s=e.formattedValueIndex,o=t[i],u=r[s],d=hO(n,t).to,f=function(e){return _(e).indexOf(".")+c.length};return!(0===h&&l&&a&&t[d.start]===g&&f(t)<i&&f(r)>s)&&(!!(i>=d.start&&i<d.end&&y&&y.includes(o)&&u===g)||o===u)},onValueChange:T,format:v,removeFormatting:_,getCaretBoundary:function(t){return function(e,t){var n=t.prefix;void 0===n&&(n="");var r=t.suffix;void 0===r&&(r="");var i=Array.from({length:e.length+1}).map((function(){return!0})),s="-"===e[0];i.fill(!1,0,n.length+(s?1:0));var o=e.length;return i.fill(!1,o-r.length+1,o+1),i}(t,e)},onKeyDown:function(e){var t=e.target,r=e.key,s=t.selectionStart,u=t.selectionEnd,h=t.value;if(void 0===h&&(h=""),("Backspace"===r||"Delete"===r)&&u<c.length)e.preventDefault();else if(s===u){"Backspace"===r&&"-"===h[0]&&s===c.length+1&&n&&uO(t,1),a&&l&&("Backspace"===r&&h[s-1]===g?(uO(t,s-1),e.preventDefault()):"Delete"===r&&h[s]===g&&e.preventDefault()),(null===y||void 0===y?void 0:y.includes(r))&&h[s]===g&&uO(t,s+1);var d=!0===o?",":o;"Backspace"===r&&h[s-1]===d&&uO(t,s-1),"Delete"===r&&h[s]===d&&uO(t,s+1),i(e)}else i(e)},onBlur:function(t){var n=k;if(n.match(/\d/g)||(n=""),r||(n=function(e){if(!e)return e;var t="-"===e[0];t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}(n)),l&&a&&(n=cO(n,a,l)),n!==k){var i=bO(n,e);T({formattedValue:i,value:n,floatValue:parseFloat(n)},{event:t,source:ZR.event})}s(t)}})}function kO(e){var t=CO(e);return r.createElement(wO,Object.assign({},t))}const IO=e=>null===e||void 0===e?void 0:e.reduce(((e,t)=>t.price+e),0),TO=(e,t)=>{switch(console.log(t),t.type){case"ADD_TO_CART":return u(u({},e),{},{cart:[...e.cart,t.item]});case"REMOVE_FROM_CART":const n=e.cart.findIndex((e=>e.title===t.title));let r=[...e.cart];return n>=0?r.splice(n,1):console.warn("Cant remove product (title: ".concat(t.title,") as its not in cart!")),u(u({},e),{},{cart:r});case"SET_USER":return u(u({},e),{},{user:t.user});default:return e}};const xO=function(){const e=Yi(),[{cart:t},n]=xs();return(0,Ur.jsxs)("div",{className:"subtotal",children:[(0,Ur.jsx)(kO,{renderText:e=>(0,Ur.jsxs)(Ur.Fragment,{children:[(0,Ur.jsxs)("p",{children:["Subtotal(",t.length," items):",(0,Ur.jsx)("strong",{children:e})]}),(0,Ur.jsxs)("small",{className:"subtotal__gift",children:[(0,Ur.jsx)("input",{type:"checkbox"})," This order contains a gift"]})]}),decimalScale:2,value:IO(t),displayType:"text",thousandSeparator:!0,prefix:"\u20b9"}),(0,Ur.jsx)("button",{onClick:t=>e("/payment"),children:"Proceed to Checkout"})]})};const AO=function(e){let{image:t,title:n,price:r,rating:i}=e;const[{cart:s},o]=xs();return(0,Ur.jsxs)("div",{className:"checkoutProduct",children:[(0,Ur.jsx)("img",{className:"checkoutProduct__image",src:t,alt:"sidhdi"}),(0,Ur.jsxs)("div",{className:"checkoutProduct__info",children:[(0,Ur.jsx)("p",{className:"checkoutProduct__title",children:n}),(0,Ur.jsxs)("p",{className:"checkoutProduct__price",children:[(0,Ur.jsx)("small",{children:"\u20b9"}),(0,Ur.jsx)("strong",{children:r}),(0,Ur.jsx)("div",{className:"checkoutProduct__rating",children:Array(i).fill().map((()=>(0,Ur.jsx)("p",{children:"\u2b50"})))}),(0,Ur.jsx)("button",{onClick:()=>{o({type:"REMOVE_FROM_CART",title:n})},children:"Remove from Cart"})]})]})]})};const NO=function(){const[{cart:e,user:t},n]=xs();return(0,Ur.jsxs)("div",{className:"checkout",children:[(0,Ur.jsxs)("div",{className:"checkout__left",children:[(0,Ur.jsx)("img",{className:"checkout__ad",src:"https://images-na.ssl-images-amazon.com/images/G/02/UK_CCMP/TM/OCC_Amazon1._CB423492668_.jpg",alt:"siddhi"}),(0,Ur.jsxs)("div",{children:[(0,Ur.jsxs)("h3",{children:["Hello, ",null===t||void 0===t?void 0:t.email]}),(0,Ur.jsx)("h2",{className:"checkout__title",children:"Your Shopping Cart"}),e.map((e=>(0,Ur.jsx)(AO,{title:e.title,image:e.image,price:e.price,rating:e.rating})))]})]}),(0,Ur.jsx)("div",{className:"checkout__right",children:(0,Ur.jsx)(xO,{})})]})};const PO=function(){const e=Yi(),[t,n]=(0,r.useState)(""),[i,s]=(0,r.useState)("");return(0,Ur.jsxs)("div",{className:"login",children:[(0,Ur.jsx)(Es,{to:"/",children:(0,Ur.jsx)("img",{className:"login__logo",src:"https://cdn2.downdetector.com/static/uploads/logo/amazon.png",alt:"sunill"})}),(0,Ur.jsxs)("div",{className:"login__container",children:[(0,Ur.jsx)("h1",{children:"Sign-In"}),(0,Ur.jsxs)("form",{children:[(0,Ur.jsx)("h5",{children:"E-mail"}),(0,Ur.jsx)("input",{type:"text",value:t,onChange:e=>n(e.target.value)}),(0,Ur.jsx)("h5",{children:"Password"}),(0,Ur.jsx)("input",{type:"password",value:i,onChange:e=>s(e.target.value)}),(0,Ur.jsx)("button",{type:"submit",onClick:n=>{n.preventDefault(),QR.signInWithEmailAndPassword(t,i).then((t=>{e("/")})).catch((e=>alert(e.message)))},className:"login__signInButton",children:"Sign In"})]}),(0,Ur.jsx)("p",{children:"By signing-in you agree to Amazon's Conditions of Use & Sale. Please see our Privacy Notice, our Cookies Notice and our Interest-Based Ads"}),(0,Ur.jsx)("button",{onClick:n=>{n.preventDefault(),QR.createUserWithEmailAndPassword(t,i).then((t=>{t&&e("/")})).catch((e=>alert(e.message)))},className:"login__registerButton",children:"Create your amazon account"})]})]})};var RO=n(393);function OO(e,t){return function(){return e.apply(t,arguments)}}const{toString:DO}=Object.prototype,{getPrototypeOf:LO}=Object,MO=(FO=Object.create(null),e=>{const t=DO.call(e);return FO[t]||(FO[t]=t.slice(8,-1).toLowerCase())});var FO;const UO=e=>(e=e.toLowerCase(),t=>MO(t)===e),jO=e=>t=>typeof t===e,{isArray:VO}=Array,BO=jO("undefined");const zO=UO("ArrayBuffer");const qO=jO("string"),WO=jO("function"),KO=jO("number"),HO=e=>null!==e&&"object"===typeof e,GO=e=>{if("object"!==MO(e))return!1;const t=LO(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},QO=UO("Date"),YO=UO("File"),JO=UO("Blob"),$O=UO("FileList"),XO=UO("URLSearchParams"),[ZO,eD,tD,nD]=["ReadableStream","Request","Response","Headers"].map(UO);function rD(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),VO(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=i?Object.getOwnPropertyNames(e):Object.keys(e),s=r.length;let o;for(n=0;n<s;n++)o=r[n],t.call(null,e[o],o,e)}}function iD(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const sD="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,oD=e=>!BO(e)&&e!==sD;const aD=(lD="undefined"!==typeof Uint8Array&&LO(Uint8Array),e=>lD&&e instanceof lD);var lD;const cD=UO("HTMLFormElement"),uD=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),hD=UO("RegExp"),dD=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};rD(n,((n,i)=>{let s;!1!==(s=t(n,i,e))&&(r[i]=s||n)})),Object.defineProperties(e,r)},fD="abcdefghijklmnopqrstuvwxyz",pD="0123456789",mD={DIGIT:pD,ALPHA:fD,ALPHA_DIGIT:fD+fD.toUpperCase()+pD};const gD=UO("AsyncFunction"),yD=(vD="function"===typeof setImmediate,_D=WO(sD.postMessage),vD?setImmediate:_D?((e,t)=>(sD.addEventListener("message",(n=>{let{source:r,data:i}=n;r===sD&&i===e&&t.length&&t.shift()()}),!1),n=>{t.push(n),sD.postMessage(e,"*")}))("axios@".concat(Math.random()),[]):e=>setTimeout(e));var vD,_D;const wD="undefined"!==typeof queueMicrotask?queueMicrotask.bind(sD):"undefined"!==typeof process&&process.nextTick||yD,bD={isArray:VO,isArrayBuffer:zO,isBuffer:function(e){return null!==e&&!BO(e)&&null!==e.constructor&&!BO(e.constructor)&&WO(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||WO(e.append)&&("formdata"===(t=MO(e))||"object"===t&&WO(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&zO(e.buffer),t},isString:qO,isNumber:KO,isBoolean:e=>!0===e||!1===e,isObject:HO,isPlainObject:GO,isReadableStream:ZO,isRequest:eD,isResponse:tD,isHeaders:nD,isUndefined:BO,isDate:QO,isFile:YO,isBlob:JO,isRegExp:hD,isFunction:WO,isStream:e=>HO(e)&&WO(e.pipe),isURLSearchParams:XO,isTypedArray:aD,isFileList:$O,forEach:rD,merge:function e(){const{caseless:t}=oD(this)&&this||{},n={},r=(r,i)=>{const s=t&&iD(n,i)||i;GO(n[s])&&GO(r)?n[s]=e(n[s],r):GO(r)?n[s]=e({},r):VO(r)?n[s]=r.slice():n[s]=r};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&rD(arguments[i],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return rD(t,((t,r)=>{n&&WO(t)?e[r]=OO(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,s,o;const a={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)o=i[s],r&&!r(o,e,t)||a[o]||(t[o]=e[o],a[o]=!0);e=!1!==n&&LO(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:MO,kindOfTest:UO,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(VO(e))return e;let t=e.length;if(!KO(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:cD,hasOwnProperty:uD,hasOwnProp:uD,reduceDescriptors:dD,freezeMethods:e=>{dD(e,((t,n)=>{if(WO(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];WO(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return VO(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:iD,global:sD,isContextDefined:oD,ALPHABET:mD,generateString:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mD.ALPHA_DIGIT,n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&WO(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(HO(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=VO(e)?[]:{};return rD(e,((e,t)=>{const s=n(e,r+1);!BO(s)&&(i[t]=s)})),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:gD,isThenable:e=>e&&(HO(e)||WO(e))&&WO(e.then)&&WO(e.catch),setImmediate:yD,asap:wD};function SD(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}bD.inherits(SD,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:bD.toJSONObject(this.config),code:this.code,status:this.status}}});const ED=SD.prototype,CD={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{CD[e]={value:e}})),Object.defineProperties(SD,CD),Object.defineProperty(ED,"isAxiosError",{value:!0}),SD.from=(e,t,n,r,i,s)=>{const o=Object.create(ED);return bD.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),SD.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};const kD=SD;function ID(e){return bD.isPlainObject(e)||bD.isArray(e)}function TD(e){return bD.endsWith(e,"[]")?e.slice(0,-2):e}function xD(e,t,n){return e?e.concat(t).map((function(e,t){return e=TD(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const AD=bD.toFlatObject(bD,{},null,(function(e){return/^is[A-Z]/.test(e)}));const ND=function(e,t,n){if(!bD.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=bD.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!bD.isUndefined(t[e])}))).metaTokens,i=n.visitor||c,s=n.dots,o=n.indexes,a=(n.Blob||"undefined"!==typeof Blob&&Blob)&&bD.isSpecCompliantForm(t);if(!bD.isFunction(i))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(bD.isDate(e))return e.toISOString();if(!a&&bD.isBlob(e))throw new kD("Blob is not supported. Use a Buffer instead.");return bD.isArrayBuffer(e)||bD.isTypedArray(e)?a&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,i){let a=e;if(e&&!i&&"object"===typeof e)if(bD.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(bD.isArray(e)&&function(e){return bD.isArray(e)&&!e.some(ID)}(e)||(bD.isFileList(e)||bD.endsWith(n,"[]"))&&(a=bD.toArray(e)))return n=TD(n),a.forEach((function(e,r){!bD.isUndefined(e)&&null!==e&&t.append(!0===o?xD([n],r,s):null===o?n:n+"[]",l(e))})),!1;return!!ID(e)||(t.append(xD(i,n,s),l(e)),!1)}const u=[],h=Object.assign(AD,{defaultVisitor:c,convertValue:l,isVisitable:ID});if(!bD.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!bD.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),bD.forEach(n,(function(n,s){!0===(!(bD.isUndefined(n)||null===n)&&i.call(t,n,bD.isString(s)?s.trim():s,r,h))&&e(n,r?r.concat(s):[s])})),u.pop()}}(e),t};function PD(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function RD(e,t){this._pairs=[],e&&ND(e,this,t)}const OD=RD.prototype;OD.append=function(e,t){this._pairs.push([e,t])},OD.toString=function(e){const t=e?function(t){return e.call(this,t,PD)}:PD;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const DD=RD;function LD(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function MD(e,t,n){if(!t)return e;const r=n&&n.encode||LD;bD.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(s=i?i(t,n):bD.isURLSearchParams(t)?t.toString():new DD(t,n).toString(r),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}const FD=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){bD.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},UD={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},jD={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:DD,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},VD="undefined"!==typeof window&&"undefined"!==typeof document,BD="object"===typeof navigator&&navigator||void 0,zD=VD&&(!BD||["ReactNative","NativeScript","NS"].indexOf(BD.product)<0),qD="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,WD=VD&&window.location.href||"http://localhost",KD=u(u({},t),jD);const HD=function(e){function t(e,n,r,i){let s=e[i++];if("__proto__"===s)return!0;const o=Number.isFinite(+s),a=i>=e.length;if(s=!s&&bD.isArray(r)?r.length:s,a)return bD.hasOwnProp(r,s)?r[s]=[r[s],n]:r[s]=n,!o;r[s]&&bD.isObject(r[s])||(r[s]=[]);return t(e,n,r[s],i)&&bD.isArray(r[s])&&(r[s]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],t[s]=e[s];return t}(r[s])),!o}if(bD.isFormData(e)&&bD.isFunction(e.entries)){const n={};return bD.forEachEntry(e,((e,r)=>{t(function(e){return bD.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null};const GD={transitional:UD,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=bD.isObject(e);i&&bD.isHTMLForm(e)&&(e=new FormData(e));if(bD.isFormData(e))return r?JSON.stringify(HD(e)):e;if(bD.isArrayBuffer(e)||bD.isBuffer(e)||bD.isStream(e)||bD.isFile(e)||bD.isBlob(e)||bD.isReadableStream(e))return e;if(bD.isArrayBufferView(e))return e.buffer;if(bD.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return ND(e,new KD.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return KD.isNode&&bD.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((s=bD.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return ND(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e,t,n){if(bD.isString(e))try{return(t||JSON.parse)(e),bD.trim(e)}catch(SM){if("SyntaxError"!==SM.name)throw SM}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||GD.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(bD.isResponse(e)||bD.isReadableStream(e))return e;if(e&&bD.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(SM){if(n){if("SyntaxError"===SM.name)throw kD.from(SM,kD.ERR_BAD_RESPONSE,this,null,this.response);throw SM}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:KD.classes.FormData,Blob:KD.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};bD.forEach(["delete","get","head","post","put","patch"],(e=>{GD.headers[e]={}}));const QD=GD,YD=bD.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),JD=Symbol("internals");function $D(e){return e&&String(e).trim().toLowerCase()}function XD(e){return!1===e||null==e?e:bD.isArray(e)?e.map(XD):String(e)}function ZD(e,t,n,r,i){return bD.isFunction(r)?r.call(this,t,n):(i&&(t=n),bD.isString(t)?bD.isString(r)?-1!==t.indexOf(r):bD.isRegExp(r)?r.test(t):void 0:void 0)}class eL{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=$D(t);if(!i)throw new Error("header name must be a non-empty string");const s=bD.findKey(r,i);(!s||void 0===r[s]||!0===n||void 0===n&&!1!==r[s])&&(r[s||t]=XD(e))}const s=(e,t)=>bD.forEach(e,((e,n)=>i(e,n,t)));if(bD.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(bD.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))s((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&YD[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t);else if(bD.isHeaders(e))for(const[o,a]of e.entries())i(a,o,n);else null!=e&&i(t,e,n);return this}get(e,t){if(e=$D(e)){const n=bD.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(bD.isFunction(t))return t.call(this,e,n);if(bD.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=$D(e)){const n=bD.findKey(this,e);return!(!n||void 0===this[n]||t&&!ZD(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=$D(e)){const i=bD.findKey(n,e);!i||t&&!ZD(0,n[i],i,t)||(delete n[i],r=!0)}}return bD.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!ZD(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return bD.forEach(this,((r,i)=>{const s=bD.findKey(n,i);if(s)return t[s]=XD(r),void delete t[i];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();o!==i&&delete t[i],t[o]=XD(r),n[o]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return bD.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&bD.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[JD]=this[JD]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=$D(e);t[r]||(!function(e,t){const n=bD.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return bD.isArray(e)?e.forEach(r):r(e),this}}eL.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),bD.reduceDescriptors(eL.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),bD.freezeMethods(eL);const tL=eL;function nL(e,t){const n=this||QD,r=t||n,i=tL.from(r.headers);let s=r.data;return bD.forEach(e,(function(e){s=e.call(n,s,i.normalize(),t?t.status:void 0)})),i.normalize(),s}function rL(e){return!(!e||!e.__CANCEL__)}function iL(e,t,n){kD.call(this,null==e?"canceled":e,kD.ERR_CANCELED,t,n),this.name="CanceledError"}bD.inherits(iL,kD,{__CANCEL__:!0});const sL=iL;function oL(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new kD("Request failed with status code "+n.status,[kD.ERR_BAD_REQUEST,kD.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const aL=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,s=0,o=0;return t=void 0!==t?t:1e3,function(a){const l=Date.now(),c=r[o];i||(i=l),n[s]=a,r[s]=l;let u=o,h=0;for(;u!==s;)h+=n[u++],u%=e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),l-i<t)return;const d=c&&l-c;return d?Math.round(1e3*h/d):void 0}};const lL=function(e,t){let n,r,i=0,s=1e3/t;const o=function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();i=s,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[function(){const e=Date.now(),t=e-i;for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];t>=s?o(l,e):(n=l,r||(r=setTimeout((()=>{r=null,o(n)}),s-t)))},()=>n&&o(n)]},cL=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const i=aL(50,250);return lL((n=>{const s=n.loaded,o=n.lengthComputable?n.total:void 0,a=s-r,l=i(a);r=s;e({loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&s<=o?(o-s)/l:void 0,event:n,lengthComputable:null!=o,[t?"download":"upload"]:!0})}),n)},uL=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},hL=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return bD.asap((()=>e(...n)))},dL=KD.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,KD.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(KD.origin),KD.navigator&&/(msie|trident)/i.test(KD.navigator.userAgent)):()=>!0,fL=KD.hasStandardBrowserEnv?{write(e,t,n,r,i,s){const o=[e+"="+encodeURIComponent(t)];bD.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),bD.isString(r)&&o.push("path="+r),bD.isString(i)&&o.push("domain="+i),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function pL(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const mL=e=>e instanceof tL?u({},e):e;function gL(e,t){t=t||{};const n={};function r(e,t,n,r){return bD.isPlainObject(e)&&bD.isPlainObject(t)?bD.merge.call({caseless:r},e,t):bD.isPlainObject(t)?bD.merge({},t):bD.isArray(t)?t.slice():t}function i(e,t,n,i){return bD.isUndefined(t)?bD.isUndefined(e)?void 0:r(void 0,e,0,i):r(e,t,0,i)}function s(e,t){if(!bD.isUndefined(t))return r(void 0,t)}function o(e,t){return bD.isUndefined(t)?bD.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,i,s){return s in t?r(n,i):s in e?r(void 0,n):void 0}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(e,t,n)=>i(mL(e),mL(t),0,!0)};return bD.forEach(Object.keys(Object.assign({},e,t)),(function(r){const s=l[r]||i,o=s(e[r],t[r],r);bD.isUndefined(o)&&s!==a||(n[r]=o)})),n}const yL=e=>{const t=gL({},e);let n,{data:r,withXSRFToken:i,xsrfHeaderName:s,xsrfCookieName:o,headers:a,auth:l}=t;if(t.headers=a=tL.from(a),t.url=MD(pL(t.baseURL,t.url),e.params,e.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),bD.isFormData(r))if(KD.hasStandardBrowserEnv||KD.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(!1!==(n=a.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];a.setContentType([e||"multipart/form-data",...t].join("; "))}if(KD.hasStandardBrowserEnv&&(i&&bD.isFunction(i)&&(i=i(t)),i||!1!==i&&dL(t.url))){const e=s&&o&&fL.read(o);e&&a.set(s,e)}return t},vL="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const r=yL(e);let i=r.data;const s=tL.from(r.headers).normalize();let o,a,l,c,u,{responseType:h,onUploadProgress:d,onDownloadProgress:f}=r;function p(){c&&c(),u&&u(),r.cancelToken&&r.cancelToken.unsubscribe(o),r.signal&&r.signal.removeEventListener("abort",o)}let m=new XMLHttpRequest;function g(){if(!m)return;const r=tL.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());oL((function(e){t(e),p()}),(function(e){n(e),p()}),{data:h&&"text"!==h&&"json"!==h?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:r,config:e,request:m}),m=null}m.open(r.method.toUpperCase(),r.url,!0),m.timeout=r.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(n(new kD("Request aborted",kD.ECONNABORTED,e,m)),m=null)},m.onerror=function(){n(new kD("Network Error",kD.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const i=r.transitional||UD;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new kD(t,i.clarifyTimeoutError?kD.ETIMEDOUT:kD.ECONNABORTED,e,m)),m=null},void 0===i&&s.setContentType(null),"setRequestHeader"in m&&bD.forEach(s.toJSON(),(function(e,t){m.setRequestHeader(t,e)})),bD.isUndefined(r.withCredentials)||(m.withCredentials=!!r.withCredentials),h&&"json"!==h&&(m.responseType=r.responseType),f&&([l,u]=cL(f,!0),m.addEventListener("progress",l)),d&&m.upload&&([a,c]=cL(d),m.upload.addEventListener("progress",a),m.upload.addEventListener("loadend",c)),(r.cancelToken||r.signal)&&(o=t=>{m&&(n(!t||t.type?new sL(null,e,m):t),m.abort(),m=null)},r.cancelToken&&r.cancelToken.subscribe(o),r.signal&&(r.signal.aborted?o():r.signal.addEventListener("abort",o)));const y=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);y&&-1===KD.protocols.indexOf(y)?n(new kD("Unsupported protocol "+y+":",kD.ERR_BAD_REQUEST,e)):m.send(i||null)}))},_L=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const i=function(e){if(!n){n=!0,o();const t=e instanceof Error?e:this.reason;r.abort(t instanceof kD?t:new sL(t instanceof Error?t.message:t))}};let s=t&&setTimeout((()=>{s=null,i(new kD("timeout ".concat(t," of ms exceeded"),kD.ETIMEDOUT))}),t);const o=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)})),e=null)};e.forEach((e=>e.addEventListener("abort",i)));const{signal:a}=r;return a.unsubscribe=()=>bD.asap(o),a}};function wL(e,t){this.v=e,this.k=t}function bL(e){return function(){return new SL(e.apply(this,arguments))}}function SL(e){var t,n;function r(t,n){try{var s=e[t](n),o=s.value,a=o instanceof wL;Promise.resolve(a?o.v:o).then((function(n){if(a){var l="return"===t?"return":"next";if(!o.k||n.done)return r(l,n);n=e[l](n).value}i(s.done?"return":"normal",n)}),(function(e){r("throw",e)}))}catch(e){i("throw",e)}}function i(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,i){return new Promise((function(s,o){var a={key:e,arg:i,resolve:s,reject:o,next:null};n?n=n.next=a:(t=n=a,r(e,i))}))},"function"!=typeof e.return&&(this.return=void 0)}function EL(e){return new wL(e,0)}function CL(e){var t={},n=!1;function r(t,r){return n=!0,r=new Promise((function(n){n(e[t](r))})),{done:!1,value:new wL(r,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):r("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return r("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):r("return",e)}),t}function kL(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new IL(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function IL(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return IL=function(e){this.s=e,this.n=e.next},IL.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new IL(e)}SL.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},SL.prototype.next=function(e){return this._invoke("next",e)},SL.prototype.throw=function(e){return this._invoke("throw",e)},SL.prototype.return=function(e){return this._invoke("return",e)};const TL=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,i=0;for(;i<n;)r=i+t,yield e.slice(i,r),i=r},xL=function(){var e=bL((function*(e,t){var n,r=!1,i=!1;try{for(var s,o=kL(AL(e));r=!(s=yield EL(o.next())).done;r=!1){const e=s.value;yield*CL(kL(TL(e,t)))}}catch(a){i=!0,n=a}finally{try{r&&null!=o.return&&(yield EL(o.return()))}finally{if(i)throw n}}}));return function(t,n){return e.apply(this,arguments)}}(),AL=function(){var e=bL((function*(e){if(e[Symbol.asyncIterator])return void(yield*CL(kL(e)));const t=e.getReader();try{for(;;){const{done:e,value:n}=yield EL(t.read());if(e)break;yield n}}finally{yield EL(t.cancel())}}));return function(t){return e.apply(this,arguments)}}(),NL=(e,t,n,r)=>{const i=xL(e,t);let s,o=0,a=e=>{s||(s=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await i.next();if(t)return a(),void e.close();let s=r.byteLength;if(n){let e=o+=s;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw a(t),t}},cancel:e=>(a(e),i.return())},{highWaterMark:2})},PL="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,RL=PL&&"function"===typeof ReadableStream,OL=PL&&("function"===typeof TextEncoder?(DL=new TextEncoder,e=>DL.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var DL;const LL=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e(...n)}catch(SM){return!1}},ML=RL&&LL((()=>{let e=!1;const t=new Request(KD.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),FL=RL&&LL((()=>bD.isReadableStream(new Response("").body))),UL={stream:FL&&(e=>e.body)};var jL;PL&&(jL=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!UL[e]&&(UL[e]=bD.isFunction(jL[e])?t=>t[e]():(t,n)=>{throw new kD("Response type '".concat(e,"' is not supported"),kD.ERR_NOT_SUPPORT,n)})})));const VL=async(e,t)=>{const n=bD.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(bD.isBlob(e))return e.size;if(bD.isSpecCompliantForm(e)){const t=new Request(KD.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return bD.isArrayBufferView(e)||bD.isArrayBuffer(e)?e.byteLength:(bD.isURLSearchParams(e)&&(e+=""),bD.isString(e)?(await OL(e)).byteLength:void 0)})(t):n},BL=PL&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:h,withCredentials:d="same-origin",fetchOptions:f}=yL(e);c=c?(c+"").toLowerCase():"text";let p,m=_L([i,s&&s.toAbortSignal()],o);const g=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let y;try{if(l&&ML&&"get"!==n&&"head"!==n&&0!==(y=await VL(h,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(bD.isFormData(r)&&(e=n.headers.get("content-type"))&&h.setContentType(e),n.body){const[e,t]=uL(y,cL(hL(l)));r=NL(n.body,65536,e,t)}}bD.isString(d)||(d=d?"include":"omit");const i="credentials"in Request.prototype;p=new Request(t,u(u({},f),{},{signal:m,method:n.toUpperCase(),headers:h.normalize().toJSON(),body:r,duplex:"half",credentials:i?d:void 0}));let s=await fetch(p);const o=FL&&("stream"===c||"response"===c);if(FL&&(a||o&&g)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=s[t]}));const t=bD.toFiniteNumber(s.headers.get("content-length")),[n,r]=a&&uL(t,cL(hL(a),!0))||[];s=new Response(NL(s.body,65536,n,(()=>{r&&r(),g&&g()})),e)}c=c||"text";let v=await UL[bD.findKey(UL,c)||"text"](s,e);return!o&&g&&g(),await new Promise(((t,n)=>{oL(t,n,{data:v,headers:tL.from(s.headers),status:s.status,statusText:s.statusText,config:e,request:p})}))}catch(v){if(g&&g(),v&&"TypeError"===v.name&&/fetch/i.test(v.message))throw Object.assign(new kD("Network Error",kD.ERR_NETWORK,e,p),{cause:v.cause||v});throw kD.from(v,v&&v.code,e,p)}}),zL={http:null,xhr:vL,fetch:BL};bD.forEach(zL,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(SM){}Object.defineProperty(e,"adapterName",{value:t})}}));const qL=e=>"- ".concat(e),WL=e=>bD.isFunction(e)||null===e||!1===e,KL=e=>{e=bD.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let s=0;s<t;s++){let t;if(n=e[s],r=n,!WL(n)&&(r=zL[(t=String(n)).toLowerCase()],void 0===r))throw new kD("Unknown adapter '".concat(t,"'"));if(r)break;i[t||"#"+s]=r}if(!r){const e=Object.entries(i).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(qL).join("\n"):" "+qL(e[0]):"as no adapter specified";throw new kD("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function HL(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new sL(null,e)}function GL(e){HL(e),e.headers=tL.from(e.headers),e.data=nL.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return KL(e.adapter||QD.adapter)(e).then((function(t){return HL(e),t.data=nL.call(e,e.transformResponse,t),t.headers=tL.from(t.headers),t}),(function(t){return rL(t)||(HL(e),t&&t.response&&(t.response.data=nL.call(e,e.transformResponse,t.response),t.response.headers=tL.from(t.response.headers))),Promise.reject(t)}))}const QL="1.7.9",YL={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{YL[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const JL={};YL.transitional=function(e,t,n){function r(e,t){return"[Axios v1.7.9] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,s)=>{if(!1===e)throw new kD(r(i," has been removed"+(t?" in "+t:"")),kD.ERR_DEPRECATED);return t&&!JL[i]&&(JL[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,s)}},YL.spelling=function(e){return(t,n)=>(console.warn("".concat(n," is likely a misspelling of ").concat(e)),!0)};const $L={assertOptions:function(e,t,n){if("object"!==typeof e)throw new kD("options must be an object",kD.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const s=r[i],o=t[s];if(o){const t=e[s],n=void 0===t||o(t,s,e);if(!0!==n)throw new kD("option "+s+" must be "+n,kD.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new kD("Unknown option "+s,kD.ERR_BAD_OPTION)}},validators:YL},XL=$L.validators;class ZL{constructor(e){this.defaults=e,this.interceptors={request:new FD,response:new FD}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(SM){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=gL(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&$L.assertOptions(n,{silentJSONParsing:XL.transitional(XL.boolean),forcedJSONParsing:XL.transitional(XL.boolean),clarifyTimeoutError:XL.transitional(XL.boolean)},!1),null!=r&&(bD.isFunction(r)?t.paramsSerializer={serialize:r}:$L.assertOptions(r,{encode:XL.function,serialize:XL.function},!0)),$L.assertOptions(t,{baseUrl:XL.spelling("baseURL"),withXsrfToken:XL.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=i&&bD.merge(i.common,i[t.method]);i&&bD.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=tL.concat(s,i);const o=[];let a=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let u,h=0;if(!a){const e=[GL.bind(this),void 0];for(e.unshift.apply(e,o),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);h<u;)c=c.then(e[h++],e[h++]);return c}u=o.length;let d=t;for(h=0;h<u;){const e=o[h++],t=o[h++];try{d=e(d)}catch(BI){t.call(this,BI);break}}try{c=GL.call(this,d)}catch(BI){return Promise.reject(BI)}for(h=0,u=l.length;h<u;)c=c.then(l[h++],l[h++]);return c}getUri(e){return MD(pL((e=gL(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}bD.forEach(["delete","get","head","options"],(function(e){ZL.prototype[e]=function(t,n){return this.request(gL(n||{},{method:e,url:t,data:(n||{}).data}))}})),bD.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(gL(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}ZL.prototype[e]=t(),ZL.prototype[e+"Form"]=t(!0)}));const eM=ZL;class tM{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,i){n.reason||(n.reason=new sL(e,r,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new tM((function(t){e=t})),cancel:e}}}const nM=tM;const rM={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(rM).forEach((e=>{let[t,n]=e;rM[n]=t}));const iM=rM;const sM=function e(t){const n=new eM(t),r=OO(eM.prototype.request,n);return bD.extend(r,eM.prototype,n,{allOwnKeys:!0}),bD.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(gL(t,n))},r}(QD);sM.Axios=eM,sM.CanceledError=sL,sM.CancelToken=nM,sM.isCancel=rL,sM.VERSION=QL,sM.toFormData=ND,sM.AxiosError=kD,sM.Cancel=sM.CanceledError,sM.all=function(e){return Promise.all(e)},sM.spread=function(e){return function(t){return e.apply(null,t)}},sM.isAxiosError=function(e){return bD.isObject(e)&&!0===e.isAxiosError},sM.mergeConfig=gL,sM.AxiosHeaders=tL,sM.formToJSON=e=>HD(bD.isHTMLForm(e)?new FormData(e):e),sM.getAdapter=KL,sM.HttpStatusCode=iM,sM.default=sM;const oM=sM.create({baseURL:"http://127.0.00.1:5001/challenge-cef04/us-central1/api"});const aM=function(){const[{cart:e,user:t}]=xs(),[n,i]=(0,r.useState)(""),[s,o]=(0,r.useState)(null),[a,l]=(0,r.useState)(!0),[c,u]=(0,r.useState)(!0);return(0,r.useEffect)((()=>{(async()=>{const e=await oM({method:"post",url:"/payments/create?total=\u20b9{getCartTotal(cart) * 100}"});u(e.data.clientSecret)})()}),[e]),console.log("THE SECRET IS >>>",c),console.log("\ud83d\udc71",t),(0,Ur.jsx)("div",{className:"payment",children:(0,Ur.jsxs)("div",{className:"payment__container",children:[(0,Ur.jsxs)("h1",{children:["Checkout (",(0,Ur.jsxs)(Es,{to:"/checkout",children:[" ",null===e||void 0===e?void 0:e.length," items"]}),")"]}),(0,Ur.jsxs)("div",{className:"payment__section",children:[(0,Ur.jsx)("div",{className:"payment__title",children:(0,Ur.jsx)("h3",{children:"Delivery Address"})}),(0,Ur.jsxs)("div",{className:"payment__address",children:[(0,Ur.jsx)("p",{children:null===t||void 0===t?void 0:t.email}),(0,Ur.jsx)("p",{children:"123 React Lane"}),(0,Ur.jsx)("p",{children:"Los Angeles, CA"})]})]}),(0,Ur.jsxs)("div",{className:"payment__section",children:[(0,Ur.jsx)("div",{className:"payment__title",children:(0,Ur.jsx)("h3",{children:"Review items and delivery"})}),(0,Ur.jsx)("div",{className:"payment__items",children:e.map((e=>(0,Ur.jsx)(AO,{title:e.title,image:e.image,price:e.price,rating:e.rating})))})]}),(0,Ur.jsxs)("div",{className:"payment__section",children:[(0,Ur.jsx)("div",{className:"payment__title",children:(0,Ur.jsx)("h3",{children:"Payment Method"})}),(0,Ur.jsx)("div",{className:"payment__details",children:(0,Ur.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),i(!0)},children:[(0,Ur.jsx)(RO.CardElement,{onChange:e=>{l(e.empty),o(e.error?e.error.message:"")}}),(0,Ur.jsxs)("div",{className:"payment__priceContainer",children:[(0,Ur.jsx)(kO,{renderText:e=>(0,Ur.jsxs)("h3",{children:["Order Total : ",e]}),decimalScale:2,value:IO(e),displayType:"text",thousandSeparator:!0,prefix:"\u20b9"}),(0,Ur.jsx)("button",{disabled:n||a,children:(0,Ur.jsx)("span",{children:n?(0,Ur.jsx)("p",{children:"Processing"}):"Buy Now"})})]}),s&&(0,Ur.jsx)("div",{children:s})]})})]})]})})};var lM,cM="https://js.stripe.com/v3",uM=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,hM="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",dM=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(cM).concat(t);var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(n),n},fM=null,pM=null,mM=null,gM=function(e){return null!==fM?fM:(fM=new Promise((function(t,n){if("undefined"!==typeof window&&"undefined"!==typeof document)if(window.Stripe&&e&&console.warn(hM),window.Stripe)t(window.Stripe);else try{var r=function(){for(var e=document.querySelectorAll('script[src^="'.concat(cM,'"]')),t=0;t<e.length;t++){var n=e[t];if(uM.test(n.src))return n}return null}();if(r&&e)console.warn(hM);else if(r){if(r&&null!==mM&&null!==pM){var i;r.removeEventListener("load",mM),r.removeEventListener("error",pM),null===(i=r.parentNode)||void 0===i||i.removeChild(r),r=dM(e)}}else r=dM(e);mM=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}}(t,n),pM=function(e){return function(){e(new Error("Failed to load Stripe.js"))}}(n),r.addEventListener("load",mM),r.addEventListener("error",pM)}catch(BI){return void n(BI)}else t(null)})),fM.catch((function(e){return fM=null,Promise.reject(e)})))},yM=!1,vM=function(){return lM||(lM=gM(null).catch((function(e){return lM=null,Promise.reject(e)})),lM)};Promise.resolve().then((function(){return vM()})).catch((function(e){yM||console.warn(e)}));const _M=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];yM=!0;var r=Date.now();return vM().then((function(e){return function(e,t,n){if(null===e)return null;var r=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"5.4.0",startTime:t})}(r,n),r}(e,t,r)}))}("pk_test_51QQECfGGyHymmqTlGzFUURxNVacdgon3HXIJMCHJZzKogSGirCKdBewKM8X69xRqrOG3ofT7QHi1icbXBdDTIkJL00TbkqZrWC");const wM=function(){return(0,r.useEffect)((()=>{QR.onAuthStateChanged((e=>{console.log("THE USER IS >>>",e)}))}),[]),(0,Ur.jsx)(ws,{children:(0,Ur.jsx)("div",{className:"app",children:(0,Ur.jsxs)(ps,{children:[(0,Ur.jsx)(ds,{path:"/login",element:[(0,Ur.jsx)(PO,{})]}),(0,Ur.jsx)(ds,{path:"/checkout",element:[(0,Ur.jsx)(NO,{})]}),(0,Ur.jsx)(ds,{path:"/payment",element:[(0,Ur.jsx)(RO.Elements,{stripe:_M,children:(0,Ur.jsx)(aM,{})})]}),(0,Ur.jsx)(ds,{path:"/",element:[(0,Ur.jsx)(YR,{}),(0,Ur.jsx)($R,{})]})]})})})},bM=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:s,getTTFB:o}=t;n(e),r(e),i(e),s(e),o(e)}))};s.createRoot(document.getElementById("root")).render((0,Ur.jsx)(r.StrictMode,{children:(0,Ur.jsx)(Ts,{initialState:{cart:[],user:null},reducer:TO,children:(0,Ur.jsx)(wM,{})})})),bM()})()})();
//# sourceMappingURL=main.9abed5ad.js.map